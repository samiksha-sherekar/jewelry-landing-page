"use strict";(self.webpackChunkresin_jewellery=self.webpackChunkresin_jewellery||[]).push([[179],{58:(ao,Qn,nt)=>{nt.d(Qn,{BH:()=>Lt,G6:()=>Z,L:()=>pt,LL:()=>me,Pz:()=>St,Sg:()=>wr,UG:()=>Ht,ZB:()=>Ne,ZR:()=>J,aH:()=>en,b$:()=>Or,eu:()=>te,hl:()=>Y,jU:()=>le,m9:()=>hs,n2:()=>tn,ne:()=>xi,pd:()=>ta,r3:()=>tr,ru:()=>Yt,tV:()=>se,uI:()=>bn,vZ:()=>Cn,w1:()=>gt,xO:()=>hu,xb:()=>cs,z$:()=>je,zd:()=>Ni});const ee=function(M){const D=[];let L=0;for(let ne=0;ne<M.length;ne++){let k=M.charCodeAt(ne);k<128?D[L++]=k:k<2048?(D[L++]=k>>6|192,D[L++]=63&k|128):55296==(64512&k)&&ne+1<M.length&&56320==(64512&M.charCodeAt(ne+1))?(k=65536+((1023&k)<<10)+(1023&M.charCodeAt(++ne)),D[L++]=k>>18|240,D[L++]=k>>12&63|128,D[L++]=k>>6&63|128,D[L++]=63&k|128):(D[L++]=k>>12|224,D[L++]=k>>6&63|128,D[L++]=63&k|128)}return D},an={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(M,D){if(!Array.isArray(M))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,ne=[];for(let k=0;k<M.length;k+=3){const Ce=M[k],We=k+1<M.length,Ue=We?M[k+1]:0,Cr=k+2<M.length,nn=Cr?M[k+2]:0;let Ct=(15&Ue)<<2|nn>>6,Oi=63&nn;Cr||(Oi=64,We||(Ct=64)),ne.push(L[Ce>>2],L[(3&Ce)<<4|Ue>>4],L[Ct],L[Oi])}return ne.join("")},encodeString(M,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(M):this.encodeByteArray(ee(M),D)},decodeString(M,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(M):function(M){const D=[];let L=0,ne=0;for(;L<M.length;){const k=M[L++];if(k<128)D[ne++]=String.fromCharCode(k);else if(k>191&&k<224){const Ce=M[L++];D[ne++]=String.fromCharCode((31&k)<<6|63&Ce)}else if(k>239&&k<365){const Cr=((7&k)<<18|(63&M[L++])<<12|(63&M[L++])<<6|63&M[L++])-65536;D[ne++]=String.fromCharCode(55296+(Cr>>10)),D[ne++]=String.fromCharCode(56320+(1023&Cr))}else{const Ce=M[L++],We=M[L++];D[ne++]=String.fromCharCode((15&k)<<12|(63&Ce)<<6|63&We)}}return D.join("")}(this.decodeStringToByteArray(M,D))},decodeStringToByteArray(M,D){this.init_();const L=D?this.charToByteMapWebSafe_:this.charToByteMap_,ne=[];for(let k=0;k<M.length;){const Ce=L[M.charAt(k++)],Ue=k<M.length?L[M.charAt(k)]:0;++k;const nn=k<M.length?L[M.charAt(k)]:64;++k;const rt=k<M.length?L[M.charAt(k)]:64;if(++k,null==Ce||null==Ue||null==nn||null==rt)throw new pn;ne.push(Ce<<2|Ue>>4),64!==nn&&(ne.push(Ue<<4&240|nn>>2),64!==rt&&ne.push(nn<<6&192|rt))}return ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let M=0;M<this.ENCODED_VALS.length;M++)this.byteToCharMap_[M]=this.ENCODED_VALS.charAt(M),this.charToByteMap_[this.byteToCharMap_[M]]=M,this.byteToCharMapWebSafe_[M]=this.ENCODED_VALS_WEBSAFE.charAt(M),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[M]]=M,M>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(M)]=M,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(M)]=M)}}};class pn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pt=function(M){return function(M){const D=ee(M);return an.encodeByteArray(D,!0)}(M).replace(/\./g,"")},se=function(M){try{return an.decodeString(M,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Ne(M,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===M&&(M={});break;case Array:M=[];break;default:return D}for(const L in D)!D.hasOwnProperty(L)||!lt(L)||(M[L]=Ne(M[L],D[L]));return M}function lt(M){return"__proto__"!==M}const ot=()=>{try{return function Tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const M=process.env.__FIREBASE_DEFAULTS__;return M?JSON.parse(M):void 0})()||(()=>{if(typeof document>"u")return;let M;try{M=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=M&&se(M[1]);return D&&JSON.parse(D)})()}catch(M){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${M}`)}},en=()=>{var M;return null===(M=ot())||void 0===M?void 0:M.config},St=M=>{var D;return null===(D=ot())||void 0===D?void 0:D[`_${M}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,L)=>{this.resolve=D,this.reject=L})}wrapCallback(D){return(L,ne)=>{L?this.reject(L):this.resolve(ne),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(L):D(L,ne))}}}function wr(M,D){if(M.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ne=D||"demo-project",k=M.iat||0,Ce=M.sub||M.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${ne}`,aud:ne,iat:k,exp:k+3600,auth_time:k,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},M);return[pt(JSON.stringify({alg:"none",type:"JWT"})),pt(JSON.stringify(We)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Ht(){var M;const D=null===(M=ot())||void 0===M?void 0:M.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function le(){return typeof window<"u"||tn()}function tn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Yt(){const M="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof M&&void 0!==M.id}function Or(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gt(){const M=je();return M.indexOf("MSIE ")>=0||M.indexOf("Trident/")>=0}function Z(){return!Ht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((M,D)=>{try{let L=!0;const ne="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(ne);k.onsuccess=()=>{k.result.close(),L||self.indexedDB.deleteDatabase(ne),M(!0)},k.onupgradeneeded=()=>{L=!1},k.onerror=()=>{var Ce;D((null===(Ce=k.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(L){D(L)}})}class J extends Error{constructor(D,L,ne){super(L),this.code=D,this.customData=ne,this.name="FirebaseError",Object.setPrototypeOf(this,J.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(D,L,ne){this.service=D,this.serviceName=L,this.errors=ne}create(D,...L){const ne=L[0]||{},k=`${this.service}/${D}`,Ce=this.errors[D],We=Ce?function vt(M,D){return M.replace(Oe,(L,ne)=>{const k=D[ne];return null!=k?String(k):`<${ne}?>`})}(Ce,ne):"Error";return new J(k,`${this.serviceName}: ${We} (${k}).`,ne)}}const Oe=/\{\$([^}]+)}/g;function tr(M,D){return Object.prototype.hasOwnProperty.call(M,D)}function cs(M){for(const D in M)if(Object.prototype.hasOwnProperty.call(M,D))return!1;return!0}function Cn(M,D){if(M===D)return!0;const L=Object.keys(M),ne=Object.keys(D);for(const k of L){if(!ne.includes(k))return!1;const Ce=M[k],We=D[k];if(ls(Ce)&&ls(We)){if(!Cn(Ce,We))return!1}else if(Ce!==We)return!1}for(const k of ne)if(!L.includes(k))return!1;return!0}function ls(M){return null!==M&&"object"==typeof M}function hu(M){const D=[];for(const[L,ne]of Object.entries(M))Array.isArray(ne)?ne.forEach(k=>{D.push(encodeURIComponent(L)+"="+encodeURIComponent(k))}):D.push(encodeURIComponent(L)+"="+encodeURIComponent(ne));return D.length?"&"+D.join("&"):""}function Ni(M){const D={};return M.replace(/^\?/,"").split("&").forEach(ne=>{if(ne){const[k,Ce]=ne.split("=");D[decodeURIComponent(k)]=decodeURIComponent(Ce)}}),D}function ta(M){const D=M.indexOf("?");if(!D)return"";const L=M.indexOf("#",D);return M.substring(D,L>0?L:void 0)}function xi(M,D){const L=new Pn(M,D);return L.subscribe.bind(L)}class Pn{constructor(D,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{D(this)}).catch(ne=>{this.error(ne)})}next(D){this.forEachObserver(L=>{L.next(D)})}error(D){this.forEachObserver(L=>{L.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,L,ne){let k;if(void 0===D&&void 0===L&&void 0===ne)throw new Error("Missing Observer.");k=function Tn(M,D){if("object"!=typeof M||null===M)return!1;for(const L of D)if(L in M&&"function"==typeof M[L])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:L,complete:ne},void 0===k.next&&(k.next=br),void 0===k.error&&(k.error=br),void 0===k.complete&&(k.complete=br);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),Ce}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,D)}sendOne(D,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{L(this.observers[D])}catch(ne){typeof console<"u"&&console.error&&console.error(ne)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function br(){}function hs(M){return M&&M._delegate?M._delegate:M}},713:(ao,Qn,nt)=>{function T(n){return"function"==typeof n}function ze(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Se=ze(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ee(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(T(r))try{r()}catch(o){e=o instanceof Se?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Yn(o)}catch(s){e=e??[],s instanceof Se?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Se(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Yn(e);else{if(e instanceof bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)}remove(e){const{_finalizers:t}=this;t&&ee(t,e),e instanceof bt&&e._removeParent(this)}}bt.EMPTY=(()=>{const n=new bt;return n.closed=!0,n})();const an=bt.EMPTY;function pn(n){return n instanceof bt||n&&"closed"in n&&T(n.remove)&&T(n.add)&&T(n.unsubscribe)}function Yn(n){T(n)?n():n.unsubscribe()}const pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},se={setTimeout(n,e,...t){const{delegate:r}=se;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=se;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ge(n){se.setTimeout(()=>{const{onUnhandledError:e}=pt;if(!e)throw n;e(n)})}function Ne(){}const lt=At("C",void 0,void 0);function At(n,e,t){return{kind:n,value:e,error:t}}let Ke=null;function ot(n){if(pt.useDeprecatedSynchronousErrorHandling){const e=!Ke;if(e&&(Ke={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ke;if(Ke=null,t)throw r}}else n()}class er extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pn(e)&&e.add(this)):this.destination=le}static create(e,t,r){return new wr(e,t,r)}next(e){this.isStopped?Ht(function Jn(n){return At("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ht(function Tt(n){return At("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ht(lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const en=Function.prototype.bind;function St(n,e){return en.call(n,e)}class Lt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){je(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){je(r)}else je(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){je(t)}}}class wr extends er{constructor(e,t,r){let i;if(super(),T(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&pt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&St(e.next,o),error:e.error&&St(e.error,o),complete:e.complete&&St(e.complete,o)}):i=e}this.destination=new Lt(i)}}function je(n){pt.useDeprecatedSynchronousErrorHandling?function Xn(n){pt.useDeprecatedSynchronousErrorHandling&&Ke&&(Ke.errorThrown=!0,Ke.error=n)}(n):ge(n)}function Ht(n,e){const{onStoppedNotification:t}=pt;t&&se.setTimeout(()=>t(n,e))}const le={closed:!0,next:Ne,error:function bn(n){throw n},complete:Ne},tn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Yt(n){return n}function Mi(n){return 0===n.length?Yt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let gt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function Z(n){return n&&n instanceof er||function lu(n){return n&&T(n.next)&&T(n.error)&&T(n.complete)}(n)&&pn(n)}(t)?t:new wr(t,r,i);return ot(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=us(r))((i,o)=>{const s=new wr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[tn](){return this}pipe(...t){return Mi(t)(this)}toPromise(t){return new(t=us(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function us(n){var e;return null!==(e=n??pt.Promise)&&void 0!==e?e:Promise}const Y=ze(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class n extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ie(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Y}next(t){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?an:(this.currentObservers=null,o.push(t),new bt(()=>{this.currentObservers=null,ee(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new gt;return t.source=this,t}}return n.create=(e,t)=>new ie(e,t),n})();class ie extends te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:an}}function _e(n){return T(n?.lift)}function J(n){return e=>{if(_e(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new vt(n,e,t,r,i)}class vt extends er{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return J((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var Le=nt(582);const yt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ut(n){return T(n?.then)}function mi(n){return T(n[tn])}function Nt(n){return Symbol.asyncIterator&&T(n?.[Symbol.asyncIterator])}function Vn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const tr=function Rn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kr(n){return T(n?.[tr])}function cs(n){return(0,Le.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Le.qq)(t.read());if(i)return yield(0,Le.qq)(void 0);yield yield(0,Le.qq)(r)}}finally{t.releaseLock()}})}function du(n){return T(n?.getReader)}function Cn(n){if(n instanceof gt)return n;if(null!=n){if(mi(n))return function ls(n){return new gt(e=>{const t=n[tn]();if(T(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yt(n))return function ea(n){return new gt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ut(n))return function hu(n){return new gt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ge)})}(n);if(Nt(n))return ta(n);if(kr(n))return function Ni(n){return new gt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(du(n))return function ti(n){return ta(cs(n))}(n)}throw Vn(n)}function ta(n){return new gt(e=>{(function xi(n,e){var t,r,i,o;return(0,Le.mG)(this,void 0,void 0,function*(){try{for(t=(0,Le.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Pn(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Tn(n,e,t=1/0){return T(e)?Tn((r,i)=>Oe((o,s)=>e(r,o,i,s))(Cn(n(r,i))),t):("number"==typeof e&&(t=e),J((r,i)=>function Gi(n,e,t,r,i,o,s,a){const u=[];let d=0,g=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},I=P=>d<r?C(P):u.push(P),C=P=>{o&&e.next(P),d++;let N=!1;Cn(t(P,g++)).subscribe(me(e,G=>{i?.(G),o?I(G):e.next(G)},()=>{N=!0},void 0,()=>{if(N)try{for(d--;u.length&&d<r;){const G=u.shift();s?Pn(e,s,()=>C(G)):C(G)}v()}catch(G){e.error(G)}}))};return n.subscribe(me(e,I,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function br(n=1/0){return Tn(Yt,n)}const hr=new gt(n=>n.complete());function Vr(n){return n[n.length-1]}function ds(n){return T(Vr(n))?n.pop():void 0}function Fn(n){return function fu(n){return n&&T(n.schedule)}(Vr(n))?n.pop():void 0}function ni(n,e=0){return J((t,r)=>{t.subscribe(me(r,i=>Pn(r,n,()=>r.next(i),e),()=>Pn(r,n,()=>r.complete(),e),i=>Pn(r,n,()=>r.error(i),e)))})}function Fr(n,e=0){return J((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ko(n,e){if(!n)throw new Error("Iterable cannot be null");return new gt(t=>{Pn(t,e,()=>{const r=n[Symbol.asyncIterator]();Pn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function D(n,e){return e?function M(n,e){if(null!=n){if(mi(n))return function Oo(n,e){return Cn(n).pipe(Fr(e),ni(e))}(n,e);if(yt(n))return function na(n,e){return new gt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ut(n))return function gu(n,e){return Cn(n).pipe(Fr(e),ni(e))}(n,e);if(Nt(n))return ko(n,e);if(kr(n))return function xc(n,e){return new gt(t=>{let r;return Pn(t,e,()=>{r=n[tr](),Pn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>T(r?.return)&&r.return()})}(n,e);if(du(n))return function hs(n,e){return ko(cs(n),e)}(n,e)}throw Vn(n)}(n,e):Cn(n)}function L(...n){const e=Fn(n),t=function pu(n,e){return"number"==typeof Vr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Cn(r[0]):br(t)(D(r,e)):hr}class ne extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return D(n,Fn(n))}function Ce(n={}){const{connector:e=(()=>new te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,d=0,g=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},I=()=>{v(),s=u=void 0,g=m=!1},C=()=>{const P=s;I(),P?.unsubscribe()};return J((P,N)=>{d++,!m&&!g&&v();const G=u=u??e();N.add(()=>{d--,0===d&&!m&&!g&&(a=We(C,i))}),G.subscribe(N),!s&&d>0&&(s=new wr({next:F=>G.next(F),error:F=>{m=!0,v(),a=We(I,t,F),G.error(F)},complete:()=>{g=!0,v(),a=We(I,r),G.complete()}}),Cn(P).subscribe(s))})(o)}}function We(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new wr({next:()=>{r.unsubscribe(),n()}});return Cn(e(...t)).subscribe(r)}function Ue(n,e){return J((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(me(r,u=>{i?.unsubscribe();let d=0;const g=o++;Cn(n(u,g)).subscribe(i=me(r,m=>r.next(e?e(u,m,g,d++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Cr(n,e=Yt){return n=n??nn,J((t,r)=>{let i,o=!0;t.subscribe(me(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function nn(n,e){return n===e}function Ze(n){for(let e in n)if(n[e]===Ze)return e;throw Error("Could not find renamed property on target object.")}function rt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ct(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ct).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Oi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const fs=Ze({__forward_ref__:Ze});function Ot(n){return n.__forward_ref__=Ot,n.toString=function(){return Ct(this())},n}function $e(n){return uo(n)?n():n}function uo(n){return"function"==typeof n&&n.hasOwnProperty(fs)&&n.__forward_ref__===Ot}function ra(n){return n&&!!n.\u0275providers}const co="https://g.co/ng/security#xss";class S extends Error{constructor(e,t){super(function j(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function z(n){return"string"==typeof n?n:null==n?"":String(n)}function zt(n,e){throw new S(-201,!1)}function yi(n,e){null==n&&function qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nr(n){return{providers:n.providers||[],imports:n.imports||[]}}function ia(n){return kg(n,Vc)||kg(n,Fg)}function kg(n,e){return n.hasOwnProperty(e)?n[e]:null}function mu(n){return n&&(n.hasOwnProperty(Fc)||n.hasOwnProperty(oa))?n[Fc]:null}const Vc=Ze({\u0275prov:Ze}),Fc=Ze({\u0275inj:Ze}),Fg=Ze({ngInjectableDef:Ze}),oa=Ze({ngInjectorDef:Ze});var ht=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ht||{});let _u;function fr(n){const e=_u;return _u=n,e}function Ug(n,e,t){const r=ia(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ht.Optional?null:void 0!==e?e:void zt(Ct(n))}const qt=globalThis;class we{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gs={},eh="__NG_DI_FLAG__",aa="ngTempTokenPath",lo=/\n/gm,qg="__source";let Tr;function Wi(n){const e=Tr;return Tr=n,e}function $E(n,e=ht.Default){if(void 0===Tr)throw new S(-203,!1);return null===Tr?Ug(n,void 0,e):Tr.get(n,e&ht.Optional?null:void 0,e)}function pe(n,e=ht.Default){return(function Lg(){return _u}()||$E)($e(n),e)}function Pe(n,e=ht.Default){return pe(n,Lc(e))}function Lc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function nh(n){const e=[];for(let t=0;t<n.length;t++){const r=$e(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,o=ht.Default;for(let s=0;s<r.length;s++){const a=r[s],u=_s(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(pe(i,o))}else e.push(pe(r))}return e}function ms(n,e){return n[eh]=e,n.prototype[eh]=e,n}function _s(n){return n[eh]}function ri(n){return{toString:n}.toString()}var rh=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rh||{}),ii=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ii||{});const qn={},mt=[],ho=Ze({\u0275cmp:Ze}),Uc=Ze({\u0275dir:Ze}),Bc=Ze({\u0275pipe:Ze}),ih=Ze({\u0275mod:Ze}),fo=Ze({\u0275fac:Ze}),Zi=Ze({__NG_ELEMENT_ID__:Ze}),Wg=Ze({__NG_ENV_ID__:Ze});function wu(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function jc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];$c(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function oh(n){return 3===n||4===n||6===n}function $c(n){return 64===n.charCodeAt(0)}function pr(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||sh(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function sh(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const Zg="ng-template";function ah(n,e,t){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const s=n[r++];if(t&&"class"===o&&-1!==wu(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function bu(n){return 4===n.type&&n.value!==Zg}function Kg(n,e,t){return e===(4!==n.type||t?n.value:Zg)}function Qg(n,e,t){let r=4;const i=n.attrs||[],o=function zc(n){for(let e=0;e<n.length;e++)if(oh(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Kg(n,u,t)||""===u&&1===e.length){if(ki(r))return!1;s=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!ah(n.attrs,d,t)){if(ki(r))return!1;s=!0}continue}const m=uh(8&r?"class":u,i,bu(n),t);if(-1===m){if(ki(r))return!1;s=!0;continue}if(""!==d){let v;v=m>o?"":i[m+1].toLowerCase();const I=8&r?v:null;if(I&&-1!==wu(I,d,0)||2&r&&d!==v){if(ki(r))return!1;s=!0}}}}else{if(!s&&!ki(r)&&!ki(u))return!1;if(s&&ki(u))continue;s=!1,r=u|1&r}}return ki(r)||s}function ki(n){return 0==(1&n)}function uh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function lh(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Hc(n,e,t=!1){for(let r=0;r<e.length;r++)if(Qg(n,e[r],t))return!0;return!1}function Yg(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function qc(n,e){return n?":not("+e.trim()+")":e}function Jg(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ki(s)&&(e+=qc(o,i),i=""),r=s,o=o||!ki(r);t++}return""!==i&&(e+=qc(o,i)),e}function Vi(n){return ri(()=>{const e=Zc(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ii.Emulated,styles:n.styles||mt,_:null,schemas:n.schemas||null,tView:null,id:""};tm(t);const r=n.dependencies;return t.directiveDefs=ua(r,!1),t.pipeDefs=ua(r,!0),t.id=function fh(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function hh(n){return ft(n)||Ln(n)}function em(n){return null!==n}function Gn(n){return ri(()=>({type:n.type,bootstrap:n.bootstrap||mt,declarations:n.declarations||mt,imports:n.imports||mt,exports:n.exports||mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Wc(n,e){if(null==n)return qn;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}function Ge(n){return ri(()=>{const e=Zc(n);return tm(e),e})}function ft(n){return n[ho]||null}function Ln(n){return n[Uc]||null}function rr(n){return n[Bc]||null}function Dr(n,e){const t=n[ih]||null;if(!t&&!0===e)throw new Error(`Type ${Ct(n)} does not have '\u0275mod' property.`);return t}function Zc(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||qn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||mt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Wc(n.inputs,e),outputs:Wc(n.outputs)}}function tm(n){n.features?.forEach(e=>e(n))}function ua(n,e){if(!n)return null;const t=e?rr:hh;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(em)}const gn=0,Te=1,et=2,Gt=3,Fi=4,ys=5,mr=6,Vo=7,Dn=8,Fo=9,Lo=10,Ye=11,Cu=12,Kc=13,ca=14,un=15,Tu=16,Uo=17,Ki=18,vs=19,nm=20,Qi=21,go=22,Es=23,Du=24,ct=25,ph=1,gh=2,vi=7,Li=9,ir=11;function Lr(n){return Array.isArray(n)&&"object"==typeof n[ph]}function Ar(n){return Array.isArray(n)&&!0===n[ph]}function mh(n){return 0!=(4&n.flags)}function da(n){return n.componentOffset>-1}function _h(n){return 1==(1&n.flags)}function Yi(n){return!!n.template}function Au(n){return 0!=(512&n[et])}function Is(n,e){return n.hasOwnProperty(fo)?n[fo]:null}let Mn=null,vh=!1;function Un(n){const e=Mn;return Mn=n,e}const om={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function fa(n){if(!Pu(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Xc(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function um(n){n.dirty=!0,function am(n){if(void 0===n.liveConsumerNode)return;const e=vh;vh=!0;try{for(const t of n.liveConsumerNode)t.dirty||um(t)}finally{vh=e}}(n),n.consumerMarkedDirty?.(n)}function Su(n){return n&&(n.nextProducerIndex=0),Un(n)}function Eh(n,e){if(Un(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Pu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ru(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Xc(n){mo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(fa(t),r!==t.version))return!0}return!1}function cm(n){if(mo(n),Pu(n))for(let e=0;e<n.producerNode.length;e++)Ru(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ru(n,e){if(function Ih(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),mo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Ru(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mo(i),i.producerIndexOfThis[r]=e}}function Pu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let fm=null;const _m=()=>{},eI=(()=>({...om,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:_m}))();class tI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function oi(){return vm}function vm(n){return n.type.prototype.ngOnChanges&&(n.setInput=Em),nI}function nI(){const n=wm(this),e=n?.current;if(e){const t=n.previous;if(t===qn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Em(n,e,t,r){const i=this.declaredInputs[t],o=wm(n)||function rI(n,e){return n[Im]=e}(n,{previous:qn,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new tI(u&&u.currentValue,e,a===qn),n[r]=e}oi.ngInherit=!0;const Im="__ngSimpleChanges__";function wm(n){return n[Im]||null}const Ei=function(n,e,t){},bm="svg";function Wt(n){for(;Array.isArray(n);)n=n[gn];return n}function ws(n,e){return Wt(e[n])}function _r(n,e){return Wt(e[n.index])}function nl(n,e){return n.data[e]}function Bn(n,e){const t=e[n];return Lr(t)?t:t[gn]}function jo(n,e){return null==e?null:n[e]}function rl(n){n[Uo]=0}function Cm(n){1024&n[et]||(n[et]|=1024,Dm(n,1))}function Tm(n){1024&n[et]&&(n[et]&=-1025,Dm(n,-1))}function Dm(n,e){let t=n[Gt];if(null===t)return;t[ys]+=e;let r=t;for(t=t[Gt];null!==t&&(1===e&&1===r[ys]||-1===e&&0===r[ys]);)t[ys]+=e,r=t,t=t[Gt]}const He={lFrame:Lh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rm(){return He.bindingsEnabled}function ga(){return null!==He.skipHydrationRootTNode}function ae(){return He.lFrame.lView}function Et(){return He.lFrame.tView}function bs(n){return He.lFrame.contextLView=n,n[Dn]}function Cs(n){return He.lFrame.contextLView=null,n}function jn(){let n=Pm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Pm(){return He.lFrame.currentTNode}function Ii(n,e){const t=He.lFrame;t.currentTNode=n,t.isParent=e}function Mh(){return He.lFrame.isParent}function Nh(){He.lFrame.isParent=!1}function $o(){return He.lFrame.bindingIndex++}function _o(n){const e=He.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Nm(n,e){const t=He.lFrame;t.bindingIndex=t.bindingRootIndex=n,sl(e)}function sl(n){He.lFrame.currentDirectiveIndex=n}function Vh(n){He.lFrame.currentQueryIndex=n}function hI(n){const e=n[Te];return 2===e.type?e.declTNode:1===e.type?n[mr]:null}function al(n,e,t){if(t&ht.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&ht.Host||(i=hI(o),null===i||(o=o[ca],10&i.type))););if(null===i)return!1;e=i,n=o}const r=He.lFrame=Om();return r.currentTNode=e,r.lView=n,!0}function Fh(n){const e=Om(),t=n[Te];He.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Om(){const n=He.lFrame,e=null===n?null:n.child;return null===e?Lh(n):e}function Lh(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function km(){const n=He.lFrame;return He.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Lu=km;function Uh(){const n=km();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Sr(){return He.lFrame.selectedIndex}function Ts(n){He.lFrame.selectedIndex=n}function cn(){const n=He.lFrame;return nl(n.tView,n.selectedIndex)}function ul(){He.lFrame.currentNamespace=bm}let Fm=!0;function ll(){return Fm}function Ho(n){Fm=n}function dl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function hl(n,e,t){Um(n,e,3,t)}function fl(n,e,t,r){(3&n[et])===t&&Um(n,e,t,r)}function Bh(n,e){let t=n[et];(3&t)===e&&(t&=8191,t+=1,n[et]=t)}function Um(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Uo]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Uo]+=65536),(a<o||-1==o)&&(jh(n,t,e,u),n[Uo]=(4294901760&n[Uo])+u+2),u++}function pl(n,e){Ei(4,n,e);const t=Un(null);try{e.call(n)}finally{Un(t),Ei(5,n,e)}}function jh(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[et]>>13<n[Uo]>>16&&(3&n[et])===e&&(n[et]+=8192,pl(a,o)):pl(a,o)}const ma=-1;class Ds{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function _a(n){return n!==ma}function ya(n){return 32767&n}function Uu(n,e){let t=function $m(n){return n>>16}(n),r=e;for(;t>0;)r=r[ca],t--;return r}let Hh=!0;function gl(n){const e=Hh;return Hh=n,e}const Hm=255,zh=5;let II=0;const yo={};function Xi(n,e){const t=zm(n,e);if(-1!==t)return t;const r=e[Te];r.firstCreatePass&&(n.injectorIndex=e.length,qh(r.data,n),qh(e,null),qh(r.blueprint,null));const i=va(n,e),o=n.injectorIndex;if(_a(i)){const s=ya(i),a=Uu(i,e),u=a[Te].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|u[s+d]}return e[o+8]=i,o}function qh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function va(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Ym(i),null===r)return ma;if(t++,i=i[ca],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ma}function Gh(n,e,t){!function wI(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Zi)&&(r=t[Zi]),null==r&&(r=t[Zi]=II++);const i=r&Hm;e.data[n+(i>>zh)]|=1<<i}(n,e,t)}function qm(n,e,t){if(t&ht.Optional||void 0!==n)return n;zt()}function Gm(n,e,t,r){if(t&ht.Optional&&void 0===r&&(r=null),!(t&(ht.Self|ht.Host))){const i=n[Fo],o=fr(void 0);try{return i?i.get(e,r,t&ht.Optional):Ug(e,r,t&ht.Optional)}finally{fr(o)}}return qm(r,0,t)}function ml(n,e,t,r=ht.Default,i){if(null!==n){if(2048&e[et]&&!(r&ht.Self)){const s=function Zh(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[et]&&!(512&s[et]);){const a=Wm(o,s,t,r|ht.Self,yo);if(a!==yo)return a;let u=o.parent;if(!u){const d=s[nm];if(d){const g=d.get(t,yo,r);if(g!==yo)return g}u=Ym(s),s=s[ca]}o=u}return i}(n,e,t,r,yo);if(s!==yo)return s}const o=Wm(n,e,t,r,yo);if(o!==yo)return o}return Gm(e,t,r,i)}function Wm(n,e,t,r,i){const o=function CI(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Zi)?n[Zi]:void 0;return"number"==typeof e?e>=0?e&Hm:TI:e}(t);if("function"==typeof o){if(!al(e,n,r))return r&ht.Host?qm(i,0,r):Gm(e,t,r,i);try{let s;if(s=o(r),null!=s||r&ht.Optional)return s;zt()}finally{Lu()}}else if("number"==typeof o){let s=null,a=zm(n,e),u=ma,d=r&ht.Host?e[un][mr]:null;for((-1===a||r&ht.SkipSelf)&&(u=-1===a?va(n,e):e[a+8],u!==ma&&Km(r,!1)?(s=e[Te],a=ya(u),e=Uu(u,e)):a=-1);-1!==a;){const g=e[Te];if(Zm(o,a,g.data)){const m=bI(a,e,t,s,r,d);if(m!==yo)return m}u=e[a+8],u!==ma&&Km(r,e[Te].data[a+8]===d)&&Zm(o,a,e)?(s=g,a=ya(u),e=Uu(u,e)):a=-1}}return i}function bI(n,e,t,r,i,o){const s=e[Te],a=s.data[n+8],g=function Ea(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,g=o>>20,v=i?a+g:n.directiveEnd;for(let I=r?a:a+g;I<v;I++){const C=s[I];if(I<u&&t===C||I>=u&&C.type===t)return I}if(i){const I=s[u];if(I&&Yi(I)&&I.type===t)return u}return null}(a,s,t,null==r?da(a)&&Hh:r!=s&&0!=(3&a.type),i&ht.Host&&o===a);return null!==g?As(e,s,g,a):yo}function As(n,e,t,r){let i=n[t];const o=e.data;if(function _I(n){return n instanceof Ds}(i)){const s=i;s.resolving&&function Qe(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function he(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():z(n)}(o[t]));const a=gl(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?fr(s.injectImpl):null;al(n,r,ht.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Lm(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=vm(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==d&&fr(d),gl(a),s.resolving=!1,Lu()}}return i}function Zm(n,e,t){return!!(t[e+(n>>zh)]&1<<n)}function Km(n,e){return!(n&ht.Self||n&ht.Host&&e)}class or{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ml(this._tNode,this._lView,e,Lc(r),t)}}function TI(){return new or(jn(),ae())}function sr(n){return ri(()=>{const e=n.prototype.constructor,t=e[fo]||ju(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[fo]||ju(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ju(n){return uo(n)?()=>{const e=ju($e(n));return e&&e()}:Is(n)}function Ym(n){const e=n[Te],t=e.type;return 2===t?e.declTNode:1===t?n[mr]:null}const Ia="__parameters__";function ba(n,e,t){return ri(()=>{const r=function yl(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,d,g){const m=u.hasOwnProperty(Ia)?u[Ia]:Object.defineProperty(u,Ia,{value:[]})[Ia];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Da(n,e){n.forEach(t=>Array.isArray(t)?Da(t,e):e(t))}function Br(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function zo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Aa(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function jr(n,e,t){let r=si(n,e);return r>=0?n[1|r]=t:(r=~r,function Qh(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Yh(n,e){const t=si(n,e);if(t>=0)return n[1|t]}function si(n,e){return function t_(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Sa=ms(ba("Optional"),8),El=ms(ba("SkipSelf"),4);function h_(n){return 128==(128&n.flags)}var Ra=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ra||{});const VI=new Map;let wB=0;const LI="__ngContext__";function Hr(n,e){Lr(e)?(n[LI]=e[vs],function CB(n){VI.set(n[vs],n)}(e)):n[LI]=e}let UI;function BI(n,e){return UI(n,e)}function lf(n){const e=n[Gt];return Ar(e)?e[Gt]:e}function cS(n){return dS(n[Cu])}function lS(n){return dS(n[Fi])}function dS(n){for(;null!==n&&!Ar(n);)n=n[Fi];return n}function Tl(n,e,t,r,i){if(null!=r){let o,s=!1;Ar(r)?o=r:Lr(r)&&(s=!0,r=r[gn]);const a=Wt(r);0===n&&null!==t?null==i?gS(e,t,a):Hu(e,t,a,i||null,!0):1===n&&null!==t?Hu(e,t,a,i||null,!0):2===n?function v_(n,e,t){const r=__(n,e);r&&function HB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function GB(n,e,t,r,i){const o=t[vi];o!==Wt(t)&&Tl(e,n,r,o,i);for(let a=ir;a<t.length;a++){const u=t[a];hf(u[Te],u,n,e,r,o)}}(e,n,o,t,i)}}function g_(n,e,t){return n.createElement(e,t)}function fS(n,e){const t=n[Li],r=t.indexOf(e);Tm(e),t.splice(r,1)}function m_(n,e){if(n.length<=ir)return;const t=ir+e,r=n[t];if(r){const i=r[Tu];null!==i&&i!==n&&fS(i,r),e>0&&(n[t-1][Fi]=r[Fi]);const o=zo(n,ir+e);!function kB(n,e){hf(n,e,e[Ye],2,null,null),e[gn]=null,e[mr]=null}(r[Te],r);const s=o[Ki];null!==s&&s.detachView(o[Te]),r[Gt]=null,r[Fi]=null,r[et]&=-129}return r}function $I(n,e){if(!(256&e[et])){const t=e[Ye];e[Es]&&cm(e[Es]),e[Du]&&cm(e[Du]),t.destroyNode&&hf(n,e,t,3,null,null),function LB(n){let e=n[Cu];if(!e)return HI(n[Te],n);for(;e;){let t=null;if(Lr(e))t=e[Cu];else{const r=e[ir];r&&(t=r)}if(!t){for(;e&&!e[Fi]&&e!==n;)Lr(e)&&HI(e[Te],e),e=e[Gt];null===e&&(e=n),Lr(e)&&HI(e[Te],e),t=e&&e[Fi]}e=t}}(e)}}function HI(n,e){if(!(256&e[et])){e[et]&=-129,e[et]|=256,function $B(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ds)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Ei(4,a,u);try{u.call(a)}finally{Ei(5,a,u)}}else{Ei(4,i,o);try{o.call(i)}finally{Ei(5,i,o)}}}}}(n,e),function jB(n,e){const t=n.cleanup,r=e[Vo];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[Vo]=null);const i=e[Qi];if(null!==i){e[Qi]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[Te].type&&e[Ye].destroy();const t=e[Tu];if(null!==t&&Ar(e[Gt])){t!==e[Gt]&&fS(t,e);const r=e[Ki];null!==r&&r.detachView(n)}!function TB(n){VI.delete(n[vs])}(e)}}function zI(n,e,t){return function pS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[gn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===ii.None||o===ii.Emulated)return null}return _r(r,t)}}(n,e.parent,t)}function Hu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gS(n,e,t){n.appendChild(e,t)}function mS(n,e,t,r,i){null!==r?Hu(n,e,t,r,i):gS(n,e,t)}function __(n,e){return n.parentNode(e)}function _S(n,e,t){return vS(n,e,t)}let qI,KI,vS=function yS(n,e,t){return 40&n.type?_r(n,t):null};function y_(n,e,t,r){const i=zI(n,r,e),o=e[Ye],a=_S(r.parent||e[mr],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)mS(o,i,t[u],a,!1);else mS(o,i,t,a,!1);void 0!==qI&&qI(o,r,e,t,i)}function df(n,e){if(null!==e){const t=e.type;if(3&t)return _r(e,n);if(4&t)return GI(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return df(n,r);{const i=n[e.index];return Ar(i)?GI(-1,i):Wt(i)}}if(32&t)return BI(e,n)()||Wt(n[e.index]);{const r=IS(n,e);return null!==r?Array.isArray(r)?r[0]:df(lf(n[un]),r):df(n,e.next)}}return null}function IS(n,e){return null!==e?n[un][mr].projection[e.projection]:null}function GI(n,e){const t=ir+n+1;if(t<e.length){const r=e[t],i=r[Te].firstChild;if(null!==i)return df(r,i)}return e[vi]}function WI(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&Hr(Wt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)WI(n,e,t.child,r,i,o,!1),Tl(e,n,i,a,o);else if(32&u){const d=BI(t,r);let g;for(;g=d();)Tl(e,n,i,g,o);Tl(e,n,i,a,o)}else 16&u?bS(n,e,r,t,i,o):Tl(e,n,i,a,o);t=s?t.projectionNext:t.next}}function hf(n,e,t,r,i,o){WI(t,r,n.firstChild,e,i,o,!1)}function bS(n,e,t,r,i,o){const s=t[un],u=s[mr].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Tl(e,n,i,u[d],o);else{let d=u;const g=s[Gt];h_(r)&&(d.flags|=128),WI(n,e,d,g,i,o,!0)}}function CS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function TS(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&jc(n,e,r),null!==i&&CS(n,e,i),null!==o&&function ZB(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}class RS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${co})`}}function Pa(n){return n instanceof RS?n.changingThisBreaksApplicationSecurity:n}const uj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Sl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sl||{});function gf(n){const e=function mf(){const n=ae();return n&&n[Lo].sanitizer}();return e?e.sanitize(Sl.URL,n)||"":function ff(n,e){const t=function ij(n){return n instanceof RS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${co})`)}return t===e}(n,"URL")?Pa(n):function YI(n){return(n=String(n)).match(uj)?n:"unsafe:"+n}(z(n))}const _f=new we("ENVIRONMENT_INITIALIZER"),LS=new we("INJECTOR",-1),US=new we("INJECTOR_DEF_TYPES");class tw{get(e,t=gs){if(t===gs){const r=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw r.name="NullInjectorError",r}return t}}function Ij(...n){return{\u0275providers:jS(0,n),\u0275fromNgModule:!0}}function jS(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return Da(e,s=>{const a=s;b_(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&$S(i,o),t}function $S(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];nw(i,o=>{e(o,r)})}}function b_(n,e,t,r){if(!(n=$e(n)))return!1;let i=null,o=mu(n);const s=!o&&ft(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=mu(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of u)b_(d,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;r.add(i);try{Da(o.imports,g=>{b_(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&$S(d,e)}if(!a){const d=Is(i)||(()=>new i);e({provide:i,useFactory:d,deps:mt},i),e({provide:US,useValue:i,multi:!0},i),e({provide:_f,useValue:()=>pe(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const d=n;nw(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function nw(n,e){for(let t of n)ra(t)&&(t=t.\u0275providers),Array.isArray(t)?nw(t,e):e(t)}const wj=Ze({provide:String,useValue:Ze});function rw(n){return null!==n&&"object"==typeof n&&wj in n}function zu(n){return"function"==typeof n}const iw=new we("Set Injector scope."),C_={},Cj={};let ow;function T_(){return void 0===ow&&(ow=new tw),ow}class eo{}class Rl extends eo{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,aw(e,s=>this.processProvider(s)),this.records.set(LS,Pl(void 0,this)),i.has("environment")&&this.records.set(eo,Pl(void 0,this));const o=this.records.get(iw);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(US.multi,mt,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Wi(this),r=fr(void 0);try{return e()}finally{Wi(t),fr(r)}}get(e,t=gs,r=ht.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Wg))return e[Wg](this);r=Lc(r);const o=Wi(this),s=fr(void 0);try{if(!(r&ht.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function Rj(n){return"function"==typeof n||"object"==typeof n&&n instanceof we}(e)&&ia(e);u=d&&this.injectableDefInScope(d)?Pl(sw(e),C_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ht.Self?T_():this.parent).get(e,t=r&ht.Optional&&t===gs?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[aa]=a[aa]||[]).unshift(Ct(e)),o)throw a;return function HE(n,e,t,r){const i=n[aa];throw e[qg]&&i.unshift(e[qg]),n.message=function zE(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ct(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(lo,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[aa]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{fr(s),Wi(o)}}resolveInjectorInitializers(){const e=Wi(this),t=fr(void 0);try{const i=this.get(_f.multi,mt,ht.Self);for(const o of i)o()}finally{Wi(e),fr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=zu(e=$e(e))?e:$e(e&&e.provide);const r=function Dj(n){return rw(n)?Pl(void 0,n.useValue):Pl(qS(n),C_)}(e);if(zu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Pl(void 0,C_,!0),i.factory=()=>nh(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===C_&&(t.value=Cj,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Sj(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=$e(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function sw(n){const e=ia(n),t=null!==e?e.factory:Is(n);if(null!==t)return t;if(n instanceof we)throw new S(204,!1);if(n instanceof Function)return function Tj(n){const e=n.length;if(e>0)throw Aa(e,"?"),new S(204,!1);const t=function Vg(n){return n&&(n[Vc]||n[Fg])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function qS(n,e,t){let r;if(zu(n)){const i=$e(n);return Is(i)||sw(i)}if(rw(n))r=()=>$e(n.useValue);else if(function zS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...nh(n.deps||[]));else if(function HS(n){return!(!n||!n.useExisting)}(n))r=()=>pe($e(n.useExisting));else{const i=$e(n&&(n.useClass||n.provide));if(!function Aj(n){return!!n.deps}(n))return Is(i)||sw(i);r=()=>new i(...nh(n.deps))}return r}function Pl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function aw(n,e){for(const t of n)Array.isArray(t)?aw(t,e):t&&ra(t)?aw(t.\u0275providers,e):e(t)}const D_=new we("AppId",{providedIn:"root",factory:()=>Pj}),Pj="ng",GS=new we("Platform Initializer"),Eo=new we("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WS=new we("CSP nonce",{providedIn:"root",factory:()=>function Al(){if(void 0!==KI)return KI;if(typeof document<"u")return document;throw new S(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ZS=(n,e,t)=>null;function gw(n,e,t=!1){return ZS(n,e,t)}class Bj{}class YS{}class $j{resolveComponentFactory(e){throw function jj(n){const e=Error(`No component factory found for ${Ct(n)}.`);return e.ngComponent=n,e}(e)}}let Ef=(()=>{class n{static#e=this.NULL=new $j}return n})();function Hj(){return xl(jn(),ae())}function xl(n,e){return new yr(_r(n,e))}let yr=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Hj}return n})();class N_{}let Io=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function qj(){const n=ae(),t=Bn(jn().index,n);return(Lr(t)?t:n)[Ye]}()}return n})(),Gj=(()=>{class n{static#e=this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>null})}return n})();class Ol{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const XS=new Ol("16.2.12"),yw={};function rR(n,e=null,t=null,r){const i=iR(n,e,t,r);return i.resolveInjectorInitializers(),i}function iR(n,e=null,t=null,r,i=new Set){const o=[t||mt,Ij(n)];return r=r||("object"==typeof n?void 0:Ct(n)),new Rl(o,e||T_(),r||null,i)}let zr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=gs;static#t=this.NULL=new tw;static create(t,r){if(Array.isArray(t))return rR({name:""},r,t,"");{const i=t.name??"";return rR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Re({token:n,providedIn:"any",factory:()=>pe(LS)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function Ew(n){return n.ngOriginalError}class Rs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ew(e);for(;t&&Ew(t);)t=Ew(t);return t||null}}function ww(n){return e=>{setTimeout(n,void 0,e)}}const Pt=class Xj extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=ww(o),i&&(i=ww(i)),s&&(s=ww(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof bt&&e.add(a),a}};function sR(...n){}class Mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function e4(){const n="function"==typeof qt.requestAnimationFrame;let e=qt[n?"requestAnimationFrame":"setTimeout"],t=qt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function r4(n){const e=()=>{!function n4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Cw(n),n.isCheckStableRunning=!0,bw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Cw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function o4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,o,s,a);try{return aR(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),uR(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return aR(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),uR(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Cw(n),bw(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mt.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(Mt.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,t4,sR,sR);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const t4={};function bw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Cw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function aR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function uR(n){n._nesting--,bw(n)}class i4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const cR=new we("",{providedIn:"root",factory:lR});function lR(){const n=Pe(Mt);let e=!0;return L(new gt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new gt(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Mt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Ce()))}function Tw(n){return n.ownerDocument.defaultView}function Ps(n){return n instanceof Function?n():n}let Dw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>new n})}return n})();function If(n){for(;n;){n[et]|=64;const e=lf(n);if(Au(n)&&!e)return n;n=e}return null}const gR=new we("",{providedIn:"root",factory:()=>!1});let O_=null;function vR(n,e){return n[e]??wR()}function ER(n,e){const t=wR();t.producerNode?.length&&(n[e]=O_,t.lView=n,O_=IR())}const p4={...om,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{If(n.lView)},lView:null};function IR(){return Object.create(p4)}function wR(){return O_??=IR(),O_}const it={};function Sn(n){bR(Et(),ae(),Sr()+n,!1)}function bR(n,e,t,r){if(!r)if(3==(3&e[et])){const o=n.preOrderCheckHooks;null!==o&&hl(e,o,t)}else{const o=n.preOrderHooks;null!==o&&fl(e,o,0,t)}Ts(t)}function ue(n,e=ht.Default){const t=ae();return null===t?pe(n,e):ml(jn(),t,$e(n),e)}function k_(n,e,t,r,i,o,s,a,u,d,g){const m=e.blueprint.slice();return m[gn]=i,m[et]=140|r,(null!==d||n&&2048&n[et])&&(m[et]|=2048),rl(m),m[Gt]=m[ca]=n,m[Dn]=t,m[Lo]=s||n&&n[Lo],m[Ye]=a||n&&n[Ye],m[Fo]=u||n&&n[Fo]||null,m[mr]=o,m[vs]=function bB(){return wB++}(),m[go]=g,m[nm]=d,m[un]=2==e.type?n[un]:m,m}function Fl(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Aw(n,e,t,r,i){const o=Pm(),s=Mh(),u=n.data[e]=function w4(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ga()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(n,e,t,r,i),function Mm(){return He.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Vu(){const n=He.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ii(o,!0),o}function wf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function TR(n,e,t,r,i){const o=vR(e,Es),s=Sr(),a=2&r;try{Ts(-1),a&&e.length>ct&&bR(n,e,ct,!1),Ei(a?2:0,i);const d=a?o:null,g=Su(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{Eh(d,g)}}finally{a&&null===e[Es]&&ER(e,Es),Ts(s),Ei(a?3:1,i)}}function Sw(n,e,t){if(mh(e)){const r=Un(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Un(r)}}}function Rw(n,e,t){Rm()&&(function R4(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;da(t)&&function V4(n,e,t){const r=_r(e,n),i=DR(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=V_(n,k_(n,i,null,s,r,e,null,n[Lo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Xi(t,e),Hr(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],d=As(e,n,a,t);Hr(d,e),null!==s&&F4(0,a-i,d,u,0,s),Yi(u)&&(Bn(t.index,e)[Dn]=As(e,n,a,t))}}(n,e,t,_r(t,e)),64==(64&t.flags)&&MR(n,e,t))}function Pw(n,e,t=_r){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function DR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Mw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Mw(n,e,t,r,i,o,s,a,u,d,g){const m=ct+r,v=m+i,I=function m4(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:it);return t}(m,v),C="function"==typeof d?d():d;return I[Te]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:g}}let AR=n=>null;function SR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?RR(t,e,i,o):r.hasOwnProperty(i)&&RR(t,e,r[i],o)}return t}function RR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Bi(n,e,t,r,i,o,s,a){const u=_r(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(Vw(n,t,g,r,i),da(e)&&function T4(n,e){const t=Bn(e,n);16&t[et]||(t[et]|=64)}(t,e.index)):3&e.type&&(r=function C4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function Nw(n,e,t,r){if(Rm()){const i=null===r?null:{"":-1},o=function M4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(Hc(e,s.selectors,!1))if(r||(r=[]),Yi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),xw(n,e,a.length)}else r.unshift(s),xw(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&PR(n,e,t,s,i,a),i&&function N4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new S(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=pr(t.mergedAttrs,t.attrs)}function PR(n,e,t,r,i,o){for(let d=0;d<r.length;d++)Gh(Xi(t,e),n,r[d].type);!function O4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let s=!1,a=!1,u=wf(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=pr(t.mergedAttrs,g.hostAttrs),k4(n,t,e,u,g),x4(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function b4(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=o[g],v=t?t.get(m):null,C=v?v.outputs:null;u=SR(m.inputs,g,u,v?v.inputs:null),d=SR(m.outputs,g,d,C);const P=null===u||null===s||bu(e)?null:L4(u,g,s);a.push(P)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,o)}function MR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function dI(){return He.lFrame.currentDirectiveIndex}();try{Ts(o);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];sl(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&P4(u,d)}}finally{Ts(-1),sl(s)}}function P4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function xw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function x4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yi(e)&&(t[""]=n)}}function k4(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Is(i.type)),s=new Ds(o,Yi(i),ue);n.blueprint[r]=s,t[r]=s,function A4(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function S4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,wf(n,t,i.hostVars,it),i)}function qo(n,e,t,r,i,o){const s=_r(n,e);!function Ow(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?z(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[Ye],s,o,n.value,t,r,i)}function F4(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)NR(r,t,s[a++],s[a++],s[a++])}function NR(n,e,t,r,i){const o=Un(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Un(o)}}function L4(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function xR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function OR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const s=n.data[o];Vh(t[r]),s.contentQueries(2,e[o],o)}}}function V_(n,e){return n[Cu]?n[Kc][Fi]=e:n[Cu]=e,n[Kc]=e,e}function kw(n,e,t){Vh(0);const r=Un(null);try{e(n,t)}finally{Un(r)}}function LR(n,e){const t=n[Fo],r=t?t.get(Rs,null):null;r&&r.handleError(e)}function Vw(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];NR(n.data[s],e[s],r,a,i)}}function U4(n,e){const t=Bn(e,n),r=t[Te];!function B4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[gn];null!==i&&null===t[go]&&(t[go]=gw(i,t[Fo])),Fw(r,t,t[Dn])}function Fw(n,e,t){Fh(e);try{const r=n.viewQuery;null!==r&&kw(1,r,t);const i=n.template;null!==i&&TR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&OR(n,e),n.staticViewQueries&&kw(2,n.viewQuery,t);const o=n.components;null!==o&&function j4(n,e){for(let t=0;t<e.length;t++)U4(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[et]&=-5,Uh()}}let UR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function XE(n,e,t){const r=Object.create(eI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>um(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Xc(r))return;r.hasRun=!0;const s=Su(r);try{r.cleanupFn(),r.cleanupFn=_m,r.fn(i)}finally{Eh(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>new n})}return n})();function F_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Oi(i,a):2==o&&(r=Oi(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function bf(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(Wt(o)),Ar(o)&&BR(o,r);const s=t.type;if(8&s)bf(n,e,t.child,r);else if(32&s){const a=BI(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=IS(e,t);if(Array.isArray(a))r.push(...a);else{const u=lf(e[un]);bf(u[Te],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function BR(n,e){for(let t=ir;t<n.length;t++){const r=n[t],i=r[Te].firstChild;null!==i&&bf(r[Te],r,i,e)}n[vi]!==n[gn]&&e.push(n[vi])}function L_(n,e,t,r=!0){const i=e[Lo],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{jR(n,e,n.template,t)}catch(u){throw r&&LR(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function jR(n,e,t,r){const i=e[et];if(256!=(256&i)){e[Lo].effectManager?.flush(),Fh(e);try{rl(e),function Oh(n){return He.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&TR(n,e,t,2,r);const s=3==(3&i);if(s){const d=n.preOrderCheckHooks;null!==d&&hl(e,d,null)}else{const d=n.preOrderHooks;null!==d&&fl(e,d,0,null),Bh(e,0)}if(function z4(n){for(let e=cS(n);null!==e;e=lS(e)){if(!e[gh])continue;const t=e[Li];for(let r=0;r<t.length;r++){Cm(t[r])}}}(e),$R(e,2),null!==n.contentQueries&&OR(n,e),s){const d=n.contentCheckHooks;null!==d&&hl(e,d)}else{const d=n.contentHooks;null!==d&&fl(e,d,1),Bh(e,1)}!function g4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=vR(e,Du);try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)Ts(~o);else{const s=o,a=t[++i],u=t[++i];Nm(a,s),r.dirty=!1;const d=Su(r);try{u(2,e[s])}finally{Eh(r,d)}}}}finally{null===e[Du]&&ER(e,Du),Ts(-1)}}(n,e);const a=n.components;null!==a&&zR(e,a,0);const u=n.viewQuery;if(null!==u&&kw(2,u,r),s){const d=n.viewCheckHooks;null!==d&&hl(e,d)}else{const d=n.viewHooks;null!==d&&fl(e,d,2),Bh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[et]&=-73,Tm(e)}finally{Uh()}}}function $R(n,e){for(let t=cS(n);null!==t;t=lS(t))for(let r=ir;r<t.length;r++)HR(t[r],e)}function q4(n,e,t){HR(Bn(e,n),t)}function HR(n,e){if(!function sI(n){return 128==(128&n[et])}(n))return;const t=n[Te],r=n[et];if(80&r&&0===e||1024&r||2===e)jR(t,n,t.template,n[Dn]);else if(n[ys]>0){$R(n,1);const i=t.components;null!==i&&zR(n,i,1)}}function zR(n,e,t){for(let r=0;r<e.length;r++)q4(n,e[r],t)}class Cf{get rootNodes(){const e=this._lView,t=e[Te];return bf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return 256==(256&this._lView[et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Gt];if(Ar(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(m_(e,r),zo(t,r))}this._attachedToViewContainer=!1}$I(this._lView[Te],this._lView)}onDestroy(e){!function il(n,e){if(256==(256&n[et]))throw new S(911,!1);null===n[Qi]&&(n[Qi]=[]),n[Qi].push(e)}(this._lView,e)}markForCheck(){If(this._cdRefInjectingView||this._lView)}detach(){this._lView[et]&=-129}reattach(){this._lView[et]|=128}detectChanges(){L_(this._lView[Te],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function FB(n,e){hf(n,e,e[Ye],2,null,null)}(this._lView[Te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class G4 extends Cf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;L_(e[Te],e,e[Dn],!1)}checkNoChanges(){}get context(){return null}}class qR extends Ef{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ft(e);return new Tf(t,this.ngModule)}}function GR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Z4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Lc(r);const i=this.injector.get(e,yw,r);return i!==yw||t===yw?i:this.parentInjector.get(e,t,r)}}class Tf extends YS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=GR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return GR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function dh(n){return n.map(Jg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof eo?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Z4(e,o):e,a=s.get(N_,null);if(null===a)throw new S(407,!1);const m={rendererFactory:a,sanitizer:s.get(Gj,null),effectManager:s.get(UR,null),afterRenderEventManager:s.get(Dw,null)},v=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",C=r?function _4(n,e,t,r){const o=r.get(gR,!1)||t===ii.ShadowDom,s=n.selectRootElement(e,o);return function y4(n){AR(n)}(s),s}(v,r,this.componentDef.encapsulation,s):g_(v,I,function W4(n){const e=n.toLowerCase();return"svg"===e?bm:"math"===e?"math":null}(I)),G=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==C&&(F=gw(C,s,!0));const Q=Mw(0,null,null,1,0,null,null,null,null,null,null),de=k_(null,Q,null,G,null,null,m,v,s,null,F);let ye,Be;Fh(de);try{const V=this.componentDef;let A,O=null;V.findHostDirectiveDefs?(A=[],O=new Map,V.findHostDirectiveDefs(V,A,O),A.push(V)):A=[V];const U=function Q4(n,e){const t=n[Te],r=ct;return n[r]=e,Fl(t,r,2,"#host",null)}(de,C),$=function Y4(n,e,t,r,i,o,s){const a=i[Te];!function J4(n,e,t,r){for(const i of n)e.mergedAttrs=pr(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(F_(e,e.mergedAttrs,!0),null!==t&&TS(r,t,e))}(r,n,e,s);let u=null;null!==e&&(u=gw(e,i[Fo]));const d=o.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=k_(i,DR(t),null,g,i[n.index],n,o,d,null,null,u);return a.firstCreatePass&&xw(a,n,r.length-1),V_(i,m),i[n.index]=m}(U,C,V,A,de,m,v);Be=nl(Q,ct),C&&function e$(n,e,t,r){if(r)jc(n,t,["ng-version",XS.full]);else{const{attrs:i,classes:o}=function Gc(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!ki(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&jc(n,t,i),o&&o.length>0&&CS(n,t,o.join(" "))}}(v,V,C,r),void 0!==t&&function t$(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(Be,this.ngContentSelectors,t),ye=function X4(n,e,t,r,i,o){const s=jn(),a=i[Te],u=_r(s,i);PR(a,i,s,t,null,r);for(let g=0;g<t.length;g++)Hr(As(i,a,s.directiveStart+g,s),i);MR(a,i,s),u&&Hr(u,i);const d=As(i,a,s.directiveStart+s.componentOffset,s);if(n[Dn]=i[Dn]=d,null!==o)for(const g of o)g(d,e);return Sw(a,s,n),d}($,V,A,O,de,[n$]),Fw(Q,de,null)}finally{Uh()}return new K4(this.componentType,ye,xl(Be,de),de,Be)}}class K4 extends Bj{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new G4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;Vw(o[Te],o,i,e,t),this.previousInputValues.set(e,t),If(Bn(this._tNode.index,o))}}get injector(){return new or(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function n$(){const n=jn();dl(ae()[Te],n)}function Bt(n){let e=function WR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Yi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=U_(n.inputs),s.inputTransforms=U_(n.inputTransforms),s.declaredInputs=U_(n.declaredInputs),s.outputs=U_(n.outputs);const a=i.hostBindings;a&&s$(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&i$(n,u),d&&o$(n,d),rt(n.inputs,i.inputs),rt(n.declaredInputs,i.declaredInputs),rt(n.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),rt(s.inputTransforms,i.inputTransforms)),Yi(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Bt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function r$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pr(i.hostAttrs,t=pr(t,i.hostAttrs))}}(r)}function U_(n){return n===qn?{}:n===mt?[]:n}function i$(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function o$(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function s$(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function B_(n){return!!function Lw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function qr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function wo(n,e,t,r){const i=ae();return qr(i,$o(),e)&&(Et(),qo(cn(),i,n,e,t,r)),wo}function Ul(n,e,t,r){return qr(n,$o(),t)?e+z(t)+r:it}function bo(n,e,t,r,i,o,s,a){const u=ae(),d=Et(),g=n+ct,m=d.firstCreatePass?function M$(n,e,t,r,i,o,s,a,u){const d=e.consts,g=Fl(e,n,4,s||null,jo(d,a));Nw(e,t,g,jo(d,u)),dl(e,g);const m=g.tView=Mw(2,g,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,o,s):d.data[g];Ii(m,!1);const v=lP(d,u,m,n);ll()&&y_(d,u,v,m),Hr(v,u),V_(u,u[g]=xR(v,u,v,m)),_h(m)&&Rw(d,u,m),null!=s&&Pw(u,m,a)}let lP=function dP(n,e,t,r){return Ho(!0),e[Ye].createComment("")};function Ti(n,e,t){const r=ae();return qr(r,$o(),e)&&Bi(Et(),cn(),r,n,e,r[Ye],t,!1),Ti}function zw(n,e,t,r,i){const s=i?"class":"style";Vw(n,t,e.inputs[s],s,r)}function xe(n,e,t,r){const i=ae(),o=Et(),s=ct+n,a=i[Ye],u=o.firstCreatePass?function V$(n,e,t,r,i,o){const s=e.consts,u=Fl(e,n,2,r,jo(s,i));return Nw(e,t,u,jo(s,o)),null!==u.attrs&&F_(u,u.attrs,!1),null!==u.mergedAttrs&&F_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,t,r):o.data[s],d=hP(o,i,u,a,e,n);i[s]=d;const g=_h(u);return Ii(u,!0),TS(a,d,u),32!=(32&u.flags)&&ll()&&y_(o,i,d,u),0===function Dh(){return He.lFrame.elementDepthCount}()&&Hr(d,i),function cI(){He.lFrame.elementDepthCount++}(),g&&(Rw(o,i,u),Sw(o,u,i)),null!==r&&Pw(i,u),xe}function ke(){let n=jn();Mh()?Nh():(n=n.parent,Ii(n,!1));const e=n;(function Ah(n){return He.skipHydrationRootTNode===n})(e)&&function Ph(){He.skipHydrationRootTNode=null}(),function ku(){He.lFrame.elementDepthCount--}();const t=Et();return t.firstCreatePass&&(dl(t,n),mh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function vI(n){return 0!=(8&n.flags)}(e)&&zw(t,e,ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jA(n){return 0!=(16&n.flags)}(e)&&zw(t,e,ae(),e.stylesWithoutHost,!1),ke}function Nn(n,e,t,r){return xe(n,e,t,r),ke(),Nn}let hP=(n,e,t,r,i,o)=>(Ho(!0),g_(r,i,function Vm(){return He.lFrame.currentNamespace}()));function Ww(){return ae()}function Pf(n){return!!n&&"function"==typeof n.then}function gP(n){return!!n&&"function"==typeof n.subscribe}function _n(n,e,t,r){const i=ae(),o=Et(),s=jn();return function _P(n,e,t,r,i,o,s){const a=_h(r),d=n.firstCreatePass&&function VR(n){return n.cleanup||(n.cleanup=[])}(n),g=e[Dn],m=function kR(n){return n[Vo]||(n[Vo]=[])}(e);let v=!0;if(3&r.type||s){const P=_r(r,e),N=s?s(P):P,G=m.length,F=s?de=>s(Wt(de[r.index])):r.index;let Q=null;if(!s&&a&&(Q=function $$(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[Vo],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=o,Q.__ngLastListenerFn__=o,v=!1;else{o=vP(r,e,g,o,!1);const de=t.listen(N,i,o);m.push(o,de),d&&d.push(i,F,G,G+1)}}else o=vP(r,e,g,o,!1);const I=r.outputs;let C;if(v&&null!==I&&(C=I[i])){const P=C.length;if(P)for(let N=0;N<P;N+=2){const ye=e[C[N]][C[N+1]].subscribe(o),Be=m.length;m.push(o,ye),d&&d.push(i,r.index,Be,-(Be+1))}}}(o,i,i[Ye],s,n,e,r),_n}function yP(n,e,t,r){try{return Ei(6,e,t),!1!==t(r)}catch(i){return LR(n,i),!1}finally{Ei(7,e,t)}}function vP(n,e,t,r,i){return function o(s){if(s===Function)return r;If(n.componentOffset>-1?Bn(n.index,e):e);let u=yP(e,t,r,s),d=o.__ngNextListenerFn__;for(;d;)u=yP(e,t,d,s)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function no(n=1){return function fI(n){return(He.lFrame.contextLView=function pI(n,e){for(;n>0;)e=e[ca],n--;return e}(n,He.lFrame.contextLView))[Dn]}(n)}function H$(n,e){let t=null;const r=function ch(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Hc(n,o,!0):Yg(r,o))return i}else t=i}return t}function q_(n,e,t){return Zw(n,"",e,"",t),q_}function Zw(n,e,t,r,i){const o=ae(),s=Ul(o,e,t,r);return s!==it&&Bi(Et(),cn(),o,n,s,o[Ye],i,!1),Zw}function G_(n,e){return n<<17|e<<2}function Ma(n){return n>>17&32767}function Kw(n){return 2|n}function Gu(n){return(131068&n)>>2}function Qw(n,e){return-131069&n|e<<2}function Yw(n){return 1|n}function PP(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Ma(o):Gu(o),u=!1;for(;0!==a&&(!1===u||s);){const g=n[a+1];K$(n[a],e)&&(u=!0,n[a+1]=r?Yw(g):Kw(g)),a=r?Ma(g):Gu(g)}u&&(n[t+1]=r?Kw(o):Yw(o))}function K$(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&si(n,e)>=0}const ar={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MP(n){return n.substring(ar.key,ar.keyEnd)}function NP(n,e){const t=ar.textEnd;return t===e?-1:(e=ar.keyEnd=function X$(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,ar.key=e,t),Wl(n,e,t))}function Wl(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function W_(n,e){return function Co(n,e,t,r){const i=ae(),o=Et(),s=_o(2);o.firstUpdatePass&&BP(o,n,s,r),e!==it&&qr(i,s,e)&&$P(o,o.data[Sr()],i,i[Ye],n,i[s+1]=function l3(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ct(Pa(n)))),n}(e,t),r,s)}(n,e,null,!0),W_}function LP(n){!function To(n,e,t,r){const i=Et(),o=_o(2);i.firstUpdatePass&&BP(i,null,o,r);const s=ae();if(t!==it&&qr(s,o,t)){const a=i.data[Sr()];if(zP(a,r)&&!UP(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(t=Oi(u,t||"")),zw(i,a,s,t,r)}else!function c3(n,e,t,r,i,o,s,a){i===it&&(i=mt);let u=0,d=0,g=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;null!==g||null!==m;){const v=u<i.length?i[u+1]:void 0,I=d<o.length?o[d+1]:void 0;let P,C=null;g===m?(u+=2,d+=2,v!==I&&(C=m,P=I)):null===m||null!==g&&g<m?(u+=2,C=g):(d+=2,C=m,P=I),null!==C&&$P(n,e,t,r,C,P,s,a),g=u<i.length?i[u]:null,m=d<o.length?o[d]:null}}(i,a,s,s[Ye],s[o+1],s[o+1]=function a3(n,e,t){if(null==t||""===t)return mt;const r=[],i=Pa(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,o)}}(u3,Zo,n,!0)}function Zo(n,e){for(let t=function Y$(n){return function OP(n){ar.key=0,ar.keyEnd=0,ar.value=0,ar.valueEnd=0,ar.textEnd=n.length}(n),NP(n,Wl(n,0,ar.textEnd))}(e);t>=0;t=NP(e,t))jr(n,MP(e),!0)}function UP(n,e){return e>=n.expandoStartIndex}function BP(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Sr()],s=UP(n,t);zP(o,r)&&null===e&&!s&&(e=!1),e=function r3(n,e,t,r){const i=function Fu(n){const e=He.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Mf(t=Jw(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=Jw(i,n,e,t,r),null===o){let u=function i3(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Gu(r))return n[Ma(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Jw(null,n,e,u[1],r),u=Mf(u,e.attrs,r),function o3(n,e,t,r){n[Ma(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function s3(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Mf(r,n[o].hostAttrs,t);return Mf(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function W$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ma(s),u=Gu(s);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||si(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=Ma(n[a+1]);n[r+1]=G_(v,a),0!==v&&(n[v+1]=Qw(n[v+1],r)),n[a+1]=function q$(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=G_(a,0),0!==a&&(n[a+1]=Qw(n[a+1],r)),a=r;else n[r+1]=G_(u,0),0===a?a=r:n[u+1]=Qw(n[u+1],r),u=r;d&&(n[r+1]=Kw(n[r+1])),PP(n,g,r,!0),PP(n,g,r,!1),function Z$(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&si(o,e)>=0&&(t[r+1]=Yw(t[r+1]))}(e,g,n,r,o),s=G_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}function Jw(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Mf(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Mf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),jr(n,s,!!t||e[++o]))}return void 0===n?null:n}function u3(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&jr(n,r,t)}function $P(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function G$(n){return 1==(1&n)}(d)?HP(u,e,t,i,Gu(d),s):void 0;Z_(g)||(Z_(o)||function z$(n){return 2==(2&n)}(d)&&(o=HP(u,null,t,i,a,s)),function WB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Ra.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ra.Important),n.setStyle(t,r,i,o))}}(r,s,ws(Sr(),t),i,o))}function HP(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===it&&(v=m?mt:void 0);let I=m?Yh(v,r):g===r?v:void 0;if(d&&!Z_(I)&&(I=Yh(u,r)),Z_(I)&&(a=I,s))return a;const C=n[i+1];i=s?Ma(C):Gu(C)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=Yh(u,r))}return a}function Z_(n){return void 0!==n}function zP(n,e){return 0!=(n.flags&(e?8:16))}function Je(n,e=""){const t=ae(),r=Et(),i=n+ct,o=r.firstCreatePass?Fl(r,i,1,e,null):r.data[i],s=qP(r,t,o,e,n);t[i]=s,ll()&&y_(r,t,s,o),Ii(o,!1)}let qP=(n,e,t,r,i)=>(Ho(!0),function p_(n,e){return n.createText(e)}(e[Ye],r));function Ns(n){return K_("",n,""),Ns}function K_(n,e,t){const r=ae(),i=Ul(r,n,e,t);return i!==it&&function Ms(n,e,t){const r=ws(e,n);!function hS(n,e,t){n.setValue(e,t)}(n[Ye],r,t)}(r,Sr(),i),K_}const Kl="en-US";let fM=Kl;function t0(n,e,t,r,i){if(n=$e(n),Array.isArray(n))for(let o=0;o<n.length;o++)t0(n[o],e,t,r,i);else{const o=Et(),s=ae(),a=jn();let u=zu(n)?n:$e(n.provide);const d=qS(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(zu(n)||!n.multi){const I=new Ds(d,i,ue),C=r0(u,e,i?g:g+v,m);-1===C?(Gh(Xi(a,s),o,u),n0(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),s.push(I)):(t[C]=I,s[C]=I)}else{const I=r0(u,e,g+v,m),C=r0(u,e,g,g+v),N=C>=0&&t[C];if(i&&!N||!i&&!(I>=0&&t[I])){Gh(Xi(a,s),o,u);const G=function MH(n,e,t,r,i){const o=new Ds(n,t,ue);return o.multi=[],o.index=e,o.componentProviders=0,LM(o,i,r&&!t),o}(i?PH:RH,t.length,i,r,d);!i&&N&&(t[C].providerFactory=G),n0(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(G),s.push(G)}else n0(o,n,I>-1?I:C,LM(t[i?C:I],d,!i&&r));!i&&r&&N&&t[C].componentProviders++}}}function n0(n,e,t,r){const i=zu(e),o=function bj(n){return!!n.useClass}(e);if(i||o){const u=(o?$e(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function LM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function r0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function RH(n,e,t,r){return o0(this.multi,[])}function PH(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=As(t,t[Te],this.providerFactory.index,r);o=a.slice(0,s),o0(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],o0(i,o);return o}function o0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function yn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function SH(n,e,t){const r=Et();if(r.firstCreatePass){const i=Yi(n);t0(t,r.data,r.blueprint,i,!0),t0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Zu{}class UM{}class s0 extends Zu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qR(this);const i=Dr(e);this._bootstrapComponents=Ps(i.bootstrap),this._r3Injector=iR(e,t,[{provide:Zu,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver},...r],Ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class a0 extends UM{constructor(e){super(),this.moduleType=e}create(e){return new s0(this.moduleType,e,[])}}class BM extends Zu{constructor(e){super(),this.componentFactoryResolver=new qR(this),this.instance=null;const t=new Rl([...e.providers,{provide:Zu,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],e.parent||T_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function u0(n,e,t=null){return new BM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let OH=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=jS(0,t.type),i=r.length>0?u0([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Re({token:n,providedIn:"environment",factory:()=>new n(pe(eo))})}return n})();function jM(n){n.getStandaloneInjector=e=>e.get(OH).getOrCreateStandaloneInjector(n)}function u5(n,e,t,r=!0){const i=e[Te];if(function UB(n,e,t,r){const i=ir+r,o=t.length;r>0&&(t[i-1][Fi]=e),r<o-ir?(e[Fi]=t[i],Br(t,ir+r,e)):(t.push(e),e[Fi]=null),e[Gt]=t;const s=e[Tu];null!==s&&t!==s&&function BB(n,e){const t=n[Li];e[un]!==e[Gt][Gt][un]&&(n[gh]=!0),null===t?n[Li]=[e]:t.push(e)}(s,e);const a=e[Ki];null!==a&&a.insertView(n),e[et]|=128}(i,e,n,t),r){const o=GI(t,n),s=e[Ye],a=__(s,n[vi]);null!==a&&function VB(n,e,t,r,i,o){r[gn]=i,r[mr]=e,hf(n,r,t,1,i,o)}(i,n[mr],s,e,a,o)}}Symbol;let Ko=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=d5}return n})();const c5=Ko,l5=class extends c5{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function a5(n,e,t,r){const i=e.tView,a=k_(n,i,t,4096&n[et]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Tu]=n[e.index];const d=n[Ki];return null!==d&&(a[Ki]=d.createEmbeddedView(i)),Fw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Cf(i)}};function d5(){return ey(jn(),ae())}function ey(n,e){return 4&n.type?new l5(e,n,xl(n,e)):null}let Do=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=_5}return n})();function _5(){return function oN(n,e){let t;const r=e[n.index];return Ar(r)?t=r:(t=xR(r,e,null,n),e[n.index]=t,V_(e,t)),sN(t,e,n,r),new rN(t,n,e)}(jn(),ae())}const y5=Do,rN=class extends y5{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return xl(this._hostTNode,this._hostLView)}get injector(){return new or(this._hostTNode,this._hostLView)}get parentInjector(){const e=va(this._hostTNode,this._hostLView);if(_a(e)){const t=Uu(e,this._hostLView),r=ya(e);return new or(t[Te].data[r+8],t)}return new or(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=iN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ir}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,o){const s=e&&!function Ta(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const P=t||{};a=P.index,r=P.injector,i=P.projectableNodes,o=P.environmentInjector||P.ngModuleRef}const u=s?e:new Tf(ft(e)),d=r||this.parentInjector;if(!o&&null==u.ngModule){const N=(s?d:this.parentInjector).get(eo,null);N&&(o=N)}ft(u.componentType??{});const I=u.create(d,i,null,o);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function aI(n){return Ar(n[Gt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Gt],g=new rN(d,d[mr],d[Gt]);g.detach(g.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return u5(a,i,s,!r),e.attachToViewContainerRef(),Br(d0(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=iN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=m_(this._lContainer,t);r&&(zo(d0(this._lContainer),t),$I(r[Te],r))}detach(e){const t=this._adjustIndex(e,-1),r=m_(this._lContainer,t);return r&&null!=zo(d0(this._lContainer),t)?new Cf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function iN(n){return n[8]}function d0(n){return n[8]||(n[8]=[])}let sN=function aN(n,e,t,r){if(n[vi])return;let i;i=8&t.type?Wt(r):function v5(n,e){const t=n[Ye],r=t.createComment(""),i=_r(e,n);return Hu(t,__(t,i),r,function zB(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[vi]=i};function mN(n,e){return ey(n,e)}const w0=new we("Application Initializer");let b0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Pe(w0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(Pf(o))t.push(o);else if(gP(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const xs=new we("LocaleId",{providedIn:"root",factory:()=>Pe(xs,ht.Optional|ht.SkipSelf)||function K5(){return typeof $localize<"u"&&$localize.locale||Kl}()});let ON=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class J5{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let kN=(()=>{class n{compileModuleSync(t){return new a0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Ps(Dr(t).declarations).reduce((s,a)=>{const u=ft(a);return u&&s.push(new Tf(u)),s},[]);return new J5(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UN=new we(""),iy=new we("");let S0,D0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,S0||(function E9(n){S0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Mt),pe(A0),pe(iy))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),A0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return S0?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Na=null;const BN=new we("AllowMultipleToken"),R0=new we("PlatformDestroyListeners"),P0=new we("appBootstrapListener");class $N{constructor(e,t){this.name=e,this.token=t}}function zN(n,e,t=[]){const r=`Platform: ${e}`,i=new we(r);return(o=[])=>{let s=M0();if(!s||s.injector.get(BN,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function b9(n){if(Na&&!Na.get(BN,!1))throw new S(400,!1);(function jN(){!function pm(n){fm=n}(()=>{throw new S(600,!1)})})(),Na=n;const e=n.get(GN);(function HN(n){n.get(GS,null)?.forEach(t=>t())})(n)}(function qN(n=[],e){return zr.create({name:e,providers:[{provide:iw,useValue:"platform"},{provide:R0,useValue:new Set([()=>Na=null])},...n]})}(a,r))}return function T9(n){const e=M0();if(!e)throw new S(401,!1);return e}()}}function M0(){return Na?.get(GN)??null}let GN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function D9(n="zone.js",e){return"noop"===n?new i4:"zone.js"===n?new Mt(e):n}(r?.ngZone,function WN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function xH(n,e,t){return new s0(n,e,t)}(t.moduleType,this.injector,function JN(n){return[{provide:Mt,useFactory:n},{provide:_f,multi:!0,useFactory:()=>{const e=Pe(S9,{optional:!0});return()=>e.initialize()}},{provide:YN,useFactory:A9},{provide:cR,useFactory:lR}]}(()=>i)),s=o.injector.get(Rs,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{oy(this._modules,o),a.unsubscribe()})}),function ZN(n,e,t){try{const r=t();return Pf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(b0);return a.runInitializers(),a.donePromise.then(()=>(function pM(n){yi(n,"Expected localeId to be defined"),"string"==typeof n&&(fM=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(xs,Kl)||Kl),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=KN({},r);return function I9(n,e,t){const r=new a0(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ku);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new S(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(R0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(pe(zr))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function KN(n,e){return Array.isArray(e)?e.reduce(KN,n):{...n,...e}}let Ku=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pe(YN),this.zoneIsStable=Pe(cR),this.componentTypes=[],this.components=[],this.isStable=Pe(ON).hasPendingTasks.pipe(Ue(t=>t?k(!1):this.zoneIsStable),Cr(),Ce()),this._injector=Pe(eo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof YS;if(!this._injector.get(b0).done)throw!i&&function po(n){const e=ft(n)||Ln(n)||rr(n);return null!==e&&e.standalone}(t),new S(405,!1);let s;s=i?t:this._injector.get(Ef).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function w9(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Zu),d=s.create(zr.NULL,[],r||s.selector,a),g=d.location.nativeElement,m=d.injector.get(UN,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),oy(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;oy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(P0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>oy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const YN=new we("",{providedIn:"root",factory:()=>Pe(Rs).handleError.bind(void 0)});function A9(){const n=Pe(Mt),e=Pe(Rs);return t=>n.runOutsideAngular(()=>e.handleError(t))}let S9=(()=>{class n{constructor(){this.zone=Pe(Mt),this.applicationRef=Pe(Ku)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let sy=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=P9}return n})();function P9(n){return function M9(n,e,t){if(da(n)&&!t){const r=Bn(n.index,e);return new Cf(r,r)}return 47&n.type?new Cf(e[un],e):null}(jn(),ae(),16==(16&n))}class rx{constructor(){}supports(e){return B_(e)}create(e){return new F9(e)}}const V9=(n,e)=>e;class F9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||V9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<ox(r,i,o)?t:r,a=ox(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const d=a-i,g=u-i;if(d!=g){for(let v=0;v<d;v++){const I=v<o.length?o[v]:o[v]=0,C=I+v;g<=C&&C<d&&(o[v]=I+1)}o[s.previousIndex]=g-d}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!B_(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function f$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new L9(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ix),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ix),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class L9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class U9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class ix{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new U9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ox(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function ax(){return new cy([new rx])}let cy=(()=>{class n{static#e=this.\u0275prov=Re({token:n,providedIn:"root",factory:ax});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ax()),deps:[[n,new El,new Sa]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new S(901,!1)}}return n})();const z9=zN(null,"core",[]);let q9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ku))};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({})}return n})();let F0=null;function xa(){return F0}class o6{}const ci=new we("DocumentToken");let L0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return Pe(a6)},providedIn:"platform"})}return n})();const s6=new we("Location Initialized");let a6=(()=>{class n extends L0{constructor(){super(),this._doc=Pe(ci),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xa().getBaseHref(this._doc)}onPopState(t){const r=xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=xa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _x(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Os(n){return n&&"?"!==n[0]?"?"+n:n}let Yu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return Pe(vx)},providedIn:"root"})}return n})();const yx=new we("appBaseHref");let vx=(()=>{class n extends Yu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Pe(ci).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Os(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Os(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Os(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(L0),pe(yx,8))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u6=(()=>{class n extends Yu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Os(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Os(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(L0),pe(yx,8))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})(),B0=(()=>{class n{constructor(t){this._subject=new Pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function d6(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(_x(Ex(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Os(r))}normalize(t){return n.stripTrailingSlash(function l6(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ex(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Os(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Os(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Os;static#t=this.joinWithSlash=U0;static#n=this.stripTrailingSlash=_x;static#r=this.\u0275fac=function(r){return new(r||n)(pe(Yu))};static#i=this.\u0275prov=Re({token:n,factory:function(){return function c6(){return new B0(pe(Yu))}()},providedIn:"root"})}return n})();function Ex(n){return n.replace(/\/index.html$/,"")}class J6{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Y0=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new J6(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),Mx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Mx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ue(Do),ue(Ko),ue(cy))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Mx(n,e){n.context.$implicit=e.item}let Nx=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new X6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ue(Do),ue(Ko))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class X6{constructor(){this.$implicit=null,this.ngIf=null}}function xx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ct(e)}'.`)}let Vx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({})}return n})();const Fx="browser";function Lx(n){return n===Fx}function Iy(n){return"server"===n}let Az=(()=>{class n{static#e=this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>new Sz(pe(ci),window)})}return n})();class Sz{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rz(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Xz extends o6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ib extends Xz{static makeCurrent(){!function i6(n){F0||(F0=n)}(new ib)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function e8(){return qf=qf||document.querySelector("base"),qf?qf.getAttribute("href"):null}();return null==t?null:function t8(n){Cy=Cy||document.createElement("a"),Cy.setAttribute("href",n);const e=Cy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function K6(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Cy,qf=null,r8=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();const ob=new we("EventManagerPlugins");let Hx=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ob),pe(Mt))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();class zx{constructor(e){this._doc=e}}const sb="ng-app-id";let qx=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Iy(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${sb}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(sb),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(sb,this.appId),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ci),pe(D_),pe(WS,8),pe(Eo))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();const ab={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ub=/%COMP%/g,a8=new we("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Wx(n,e){return e.map(t=>t.replace(ub,n))}let Zx=(()=>{class n{constructor(t,r,i,o,s,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Iy(a),this.defaultRenderer=new cb(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ii.ShadowDom&&(r={...r,encapsulation:ii.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Qx?i.applyToHost(t):i instanceof lb&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ii.Emulated:o=new Qx(u,d,r,this.appId,g,s,a,m);break;case ii.ShadowDom:return new d8(u,d,t,r,s,a,this.nonce,m);default:o=new lb(u,d,r,g,s,a,m)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Hx),pe(qx),pe(D_),pe(a8),pe(ci),pe(Eo),pe(Mt),pe(WS))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();class cb{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ab[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Kx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Kx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=ab[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ab[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ra.DashCase|Ra.Important)?e.style.setProperty(t,r,i&Ra.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ra.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=xa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Kx(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class d8 extends cb{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=Wx(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lb extends cb{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Wx(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Qx extends lb{constructor(e,t,r,i,o,s,a,u){const d=i+"-"+r.id;super(e,t,r,o,s,a,u,d),this.contentAttr=function u8(n){return"_ngcontent-%COMP%".replace(ub,n)}(d),this.hostAttr=function c8(n){return"_nghost-%COMP%".replace(ub,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let h8=(()=>{class n extends zx{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ci))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();const Yx=["alt","control","meta","shift"],f8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let g8=(()=>{class n extends zx{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xa().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Yx.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=f8[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Yx.forEach(s=>{s!==i&&(0,p8[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ci))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();const v8=zN(z9,"browser",[{provide:Eo,useValue:Fx},{provide:GS,useValue:function m8(){ib.makeCurrent()},multi:!0},{provide:ci,useFactory:function y8(){return function JB(n){KI=n}(document),document},deps:[]}]),E8=new we(""),e1=[{provide:iy,useClass:class n8{addToWindow(e){qt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new S(5103,!1);return o},qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),qt.getAllAngularRootElements=()=>e.getAllRootElements(),qt.frameworkStabilizers||(qt.frameworkStabilizers=[]),qt.frameworkStabilizers.push(r=>{const i=qt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?xa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:UN,useClass:D0,deps:[Mt,A0,iy]},{provide:D0,useClass:D0,deps:[Mt,A0,iy]}],t1=[{provide:iw,useValue:"root"},{provide:Rs,useFactory:function _8(){return new Rs},deps:[]},{provide:ob,useClass:h8,multi:!0,deps:[ci,Mt,Eo]},{provide:ob,useClass:g8,multi:!0,deps:[ci]},Zx,qx,Hx,{provide:N_,useExisting:Zx},{provide:class Pz{},useClass:r8,deps:[]},[]];let I8=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:D_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(pe(E8,12))};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({providers:[...t1,...e1],imports:[Vx,q9]})}return n})(),n1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(pe(ci))};static#t=this.\u0275prov=Re({token:n,factory:function(r){let i=null;return i=r?new r:function b8(){return new n1(pe(ci))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var ed=nt(534);(0,ed.registerVersion)("firebase","10.12.3","app");class P8 extends bt{constructor(e,t){super()}schedule(e,t=0){return this}}const Ty={setInterval(n,e,...t){const{delegate:r}=Ty;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ty;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class hb extends P8{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ty.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Ty.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ee(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const fb={now:()=>(fb.delegate||Date).now(),delegate:void 0};class Gf{constructor(e,t=Gf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Gf.now=fb.now;class pb extends Gf{constructor(e,t=Gf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const x8=new class N8 extends pb{}(class M8 extends hb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),a1=new pb(hb);function Rr(n,e,t){const r=T(n)||e||t?{next:n,error:e,complete:t}:n;return r?J((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(me(o,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),o.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Yt}const Dy=new Ol("ANGULARFIRE2_VERSION");class u1{constructor(){return((n,e)=>{const t=(0,ed.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(k8)}}const k8="app-check";function td(){}class c1{zone;delegate;constructor(e,t=x8){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class V8{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",td,{},td,td)),t.pipe(Rr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let l1=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new c1(Zone.current)),this.insideAngular=t.run(()=>new c1(Zone.current,a1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(pe(Mt))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $i(n){return function L8(n){return function(t){return(t=t.lift(new V8(n.ngZone))).pipe(Fr(n.outsideAngular),ni(n.insideAngular))}}(function nd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Fs=nt(106);Fs.Z.registerVersion("firebase","10.12.3","app-compat");const $8=["ngOnDestroy"];class d1{constructor(e){return e}}const Ay=new we("angularfire2.app.options"),Sy=new we("angularfire2.app.name");function gb(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Fs.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Fs.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;q8("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new d1(s)}const q8=(n,...e)=>{},G8={provide:d1,useFactory:gb,deps:[Ay,Mt,[new Sa,Sy]]};let W8=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ay,useValue:t},{provide:Sy,useValue:r}]}}constructor(t){Fs.Z.registerVersion("angularfire",Dy.full,"core"),Fs.Z.registerVersion("angularfire",Dy.full,"app-compat"),Fs.Z.registerVersion("angular",XS.full,t.toString())}static \u0275fac=function(r){return new(r||n)(pe(Eo))};static \u0275mod=Gn({type:n});static \u0275inj=nr({providers:[G8]})}return n})();function h1(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function Z8(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(f1("error",`${e} was already initialized on the ${t} Firebase App with different settings.${K8?" You may need to reload as Firebase is not HMR aware.":""}`),f1("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const K8=typeof module<"u"&&!!module.hot,f1=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];const Q8_firebase={apiKey:"AIzaSyDmdW2nfv1hOd9Sp7nmcrmKzgOXmMff7rg",authDomain:"resin-jewelry.firebaseapp.com",projectId:"resin-jewelry",storageBucket:"resin-jewelry.appspot.com",appId:"1:32740128838:web:889a344e8244269e867247"};nt(325);class Y8 extends te{constructor(e=1/0,t=1/0,r=fb){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function p1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,Ce({connector:()=>new Y8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Ry=ze(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ro(n,e){return J((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Xu(n){return n<=0?()=>hr:J((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Py(n){return J((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function g1(n=J8){return J((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function J8(){return new Ry}function ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ro((i,o)=>n(i,o,r)):Yt,Xu(1),t?Py(e):g1(()=>new Ry))}function m1(n,e){return T(e)?Ue(()=>n,e):Ue(()=>n)}const _1=new we("angularfire2.auth.use-emulator"),y1=new we("angularfire2.auth.settings"),v1=new we("angularfire2.auth.tenant-id"),E1=new we("angularfire2.auth.langugage-code"),I1=new we("angularfire2.auth.use-device-language"),w1=new we("angularfire.auth.persistence"),b1=(n,e,t,r,i,o,s,a)=>h1(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[d,g]of Object.entries(s))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]);let mb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,d,g,m,v,I){const C=new te,P=k(void 0).pipe(ni(s.outsideAngular),Ue(()=>o.runOutsideAngular(()=>Promise.resolve().then(nt.bind(nt,325)))),Oe(()=>gb(t,o,r)),Oe(N=>b1(N,o,a,d,g,m,u,v)),p1({bufferSize:1,refCount:!1}));if(Iy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{P.pipe(ka()).subscribe();const N=P.pipe(Ue(Q=>Q.getRedirectResult().then(de=>de,()=>null)),$i,p1({bufferSize:1,refCount:!1})),G=P.pipe(Ue(Q=>new gt(de=>({unsubscribe:o.runOutsideAngular(()=>Q.onAuthStateChanged(ye=>de.next(ye),ye=>de.error(ye),()=>de.complete()))})))),F=P.pipe(Ue(Q=>new gt(de=>({unsubscribe:o.runOutsideAngular(()=>Q.onIdTokenChanged(ye=>de.next(ye),ye=>de.error(ye),()=>de.complete()))}))));this.authState=N.pipe(m1(G),Fr(s.outsideAngular),ni(s.insideAngular)),this.user=N.pipe(m1(F),Fr(s.outsideAngular),ni(s.insideAngular)),this.idToken=this.user.pipe(Ue(Q=>Q?D(Q.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(Ue(Q=>Q?D(Q.getIdTokenResult()):k(null))),this.credential=L(N,C,this.authState.pipe(Ro(Q=>!Q))).pipe(Oe(Q=>Q?.user?Q:null),Fr(s.outsideAngular),ni(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if($8.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,d)=>s.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(o,d,m),m})})})}))(this,P,o,{spy:{apply:(N,G,F)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&F.then(Q=>C.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(pe(Ay),pe(Sy,8),pe(Eo),pe(Mt),pe(l1),pe(_1,8),pe(y1,8),pe(v1,8),pe(E1,8),pe(I1,8),pe(w1,8),pe(u1,8))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),eq=(()=>{class n{constructor(){Fs.Z.registerVersion("angularfire",Dy.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=nr({providers:[mb]})}return n})();function _b(...n){return function tq(){return br(1)}()(D(n,Fn(n)))}function My(...n){const e=Fn(n);return J((t,r)=>{(e?_b(n,t,e):_b(n,t)).subscribe(r)})}function yb(){return J((n,e)=>{let t,r=!1;n.subscribe(me(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Ny(n,e){return J(function nq(n,e,t,r,i){return(o,s)=>{let a=t,u=e,d=0;o.subscribe(me(s,g=>{const m=d++;u=a?n(u,g,m):(a=!0,g),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(n,e,arguments.length>=2,!0))}var ec,A1,oe=nt(861),C1=nt(537),Qo=nt(879),Ft=nt(58),T1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,A,O){O||(O=0);var U=Array(16);if("string"==typeof A)for(var $=0;16>$;++$)U[$]=A.charCodeAt(O++)|A.charCodeAt(O++)<<8|A.charCodeAt(O++)<<16|A.charCodeAt(O++)<<24;else for($=0;16>$;++$)U[$]=A[O++]|A[O++]<<8|A[O++]<<16|A[O++]<<24;var W=V.g[3],x=(A=V.g[0])+(W^(O=V.g[1])&(($=V.g[2])^W))+U[0]+3614090360&4294967295;x=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=(O=($=(W=(A=O+(x<<7&4294967295|x>>>25))+((x=W+($^A&(O^$))+U[1]+3905402710&4294967295)<<12&4294967295|x>>>20))+((x=$+(O^W&(A^O))+U[2]+606105819&4294967295)<<17&4294967295|x>>>15))+((x=O+(A^$&(W^A))+U[3]+3250441966&4294967295)<<22&4294967295|x>>>10))+((x=A+(W^O&($^W))+U[4]+4118548399&4294967295)<<7&4294967295|x>>>25))+((x=W+($^A&(O^$))+U[5]+1200080426&4294967295)<<12&4294967295|x>>>20))+((x=$+(O^W&(A^O))+U[6]+2821735955&4294967295)<<17&4294967295|x>>>15))+((x=O+(A^$&(W^A))+U[7]+4249261313&4294967295)<<22&4294967295|x>>>10))+((x=A+(W^O&($^W))+U[8]+1770035416&4294967295)<<7&4294967295|x>>>25))+((x=W+($^A&(O^$))+U[9]+2336552879&4294967295)<<12&4294967295|x>>>20))+((x=$+(O^W&(A^O))+U[10]+4294925233&4294967295)<<17&4294967295|x>>>15))+((x=O+(A^$&(W^A))+U[11]+2304563134&4294967295)<<22&4294967295|x>>>10))+((x=A+(W^O&($^W))+U[12]+1804603682&4294967295)<<7&4294967295|x>>>25))+((x=W+($^A&(O^$))+U[13]+4254626195&4294967295)<<12&4294967295|x>>>20))+((x=$+(O^W&(A^O))+U[14]+2792965006&4294967295)<<17&4294967295|x>>>15))+((x=O+(A^$&(W^A))+U[15]+1236535329&4294967295)<<22&4294967295|x>>>10))+((x=A+($^W&(O^$))+U[1]+4129170786&4294967295)<<5&4294967295|x>>>27))+((x=W+(O^$&(A^O))+U[6]+3225465664&4294967295)<<9&4294967295|x>>>23))+((x=$+(A^O&(W^A))+U[11]+643717713&4294967295)<<14&4294967295|x>>>18))+((x=O+(W^A&($^W))+U[0]+3921069994&4294967295)<<20&4294967295|x>>>12))+((x=A+($^W&(O^$))+U[5]+3593408605&4294967295)<<5&4294967295|x>>>27))+((x=W+(O^$&(A^O))+U[10]+38016083&4294967295)<<9&4294967295|x>>>23))+((x=$+(A^O&(W^A))+U[15]+3634488961&4294967295)<<14&4294967295|x>>>18))+((x=O+(W^A&($^W))+U[4]+3889429448&4294967295)<<20&4294967295|x>>>12))+((x=A+($^W&(O^$))+U[9]+568446438&4294967295)<<5&4294967295|x>>>27))+((x=W+(O^$&(A^O))+U[14]+3275163606&4294967295)<<9&4294967295|x>>>23))+((x=$+(A^O&(W^A))+U[3]+4107603335&4294967295)<<14&4294967295|x>>>18))+((x=O+(W^A&($^W))+U[8]+1163531501&4294967295)<<20&4294967295|x>>>12))+((x=A+($^W&(O^$))+U[13]+2850285829&4294967295)<<5&4294967295|x>>>27))+((x=W+(O^$&(A^O))+U[2]+4243563512&4294967295)<<9&4294967295|x>>>23))+((x=$+(A^O&(W^A))+U[7]+1735328473&4294967295)<<14&4294967295|x>>>18))+((x=O+(W^A&($^W))+U[12]+2368359562&4294967295)<<20&4294967295|x>>>12))+((x=A+(O^$^W)+U[5]+4294588738&4294967295)<<4&4294967295|x>>>28))+((x=W+(A^O^$)+U[8]+2272392833&4294967295)<<11&4294967295|x>>>21))+((x=$+(W^A^O)+U[11]+1839030562&4294967295)<<16&4294967295|x>>>16))+((x=O+($^W^A)+U[14]+4259657740&4294967295)<<23&4294967295|x>>>9))+((x=A+(O^$^W)+U[1]+2763975236&4294967295)<<4&4294967295|x>>>28))+((x=W+(A^O^$)+U[4]+1272893353&4294967295)<<11&4294967295|x>>>21))+((x=$+(W^A^O)+U[7]+4139469664&4294967295)<<16&4294967295|x>>>16))+((x=O+($^W^A)+U[10]+3200236656&4294967295)<<23&4294967295|x>>>9))+((x=A+(O^$^W)+U[13]+681279174&4294967295)<<4&4294967295|x>>>28))+((x=W+(A^O^$)+U[0]+3936430074&4294967295)<<11&4294967295|x>>>21))+((x=$+(W^A^O)+U[3]+3572445317&4294967295)<<16&4294967295|x>>>16))+((x=O+($^W^A)+U[6]+76029189&4294967295)<<23&4294967295|x>>>9))+((x=A+(O^$^W)+U[9]+3654602809&4294967295)<<4&4294967295|x>>>28))+((x=W+(A^O^$)+U[12]+3873151461&4294967295)<<11&4294967295|x>>>21))+((x=$+(W^A^O)+U[15]+530742520&4294967295)<<16&4294967295|x>>>16))+((x=O+($^W^A)+U[2]+3299628645&4294967295)<<23&4294967295|x>>>9))+((x=A+($^(O|~W))+U[0]+4096336452&4294967295)<<6&4294967295|x>>>26))+((x=W+(O^(A|~$))+U[7]+1126891415&4294967295)<<10&4294967295|x>>>22))+((x=$+(A^(W|~O))+U[14]+2878612391&4294967295)<<15&4294967295|x>>>17))+((x=O+(W^($|~A))+U[5]+4237533241&4294967295)<<21&4294967295|x>>>11))+((x=A+($^(O|~W))+U[12]+1700485571&4294967295)<<6&4294967295|x>>>26))+((x=W+(O^(A|~$))+U[3]+2399980690&4294967295)<<10&4294967295|x>>>22))+((x=$+(A^(W|~O))+U[10]+4293915773&4294967295)<<15&4294967295|x>>>17))+((x=O+(W^($|~A))+U[1]+2240044497&4294967295)<<21&4294967295|x>>>11))+((x=A+($^(O|~W))+U[8]+1873313359&4294967295)<<6&4294967295|x>>>26))+((x=W+(O^(A|~$))+U[15]+4264355552&4294967295)<<10&4294967295|x>>>22))+((x=$+(A^(W|~O))+U[6]+2734768916&4294967295)<<15&4294967295|x>>>17))+((x=O+(W^($|~A))+U[13]+1309151649&4294967295)<<21&4294967295|x>>>11))+((W=(A=O+((x=A+($^(O|~W))+U[4]+4149444226&4294967295)<<6&4294967295|x>>>26))+((x=W+(O^(A|~$))+U[11]+3174756917&4294967295)<<10&4294967295|x>>>22))^(($=W+((x=$+(A^(W|~O))+U[2]+718787259&4294967295)<<15&4294967295|x>>>17))|~A))+U[9]+3951481745&4294967295,V.g[0]=V.g[0]+A&4294967295,V.g[1]=V.g[1]+($+(x<<21&4294967295|x>>>11))&4294967295,V.g[2]=V.g[2]+$&4294967295,V.g[3]=V.g[3]+W&4294967295}function s(V,A){this.h=A;for(var O=[],U=!0,$=V.length-1;0<=$;$--){var W=0|V[$];U&&W==A||(O[$]=W,U=!1)}this.g=O}(function e(V,A){function O(){}O.prototype=A.prototype,V.D=A.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(U,$,W){for(var x=Array(arguments.length-2),Ys=2;Ys<arguments.length;Ys++)x[Ys-2]=arguments[Ys];return A.prototype[$].apply(U,x)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,A){void 0===A&&(A=V.length);for(var O=A-this.blockSize,U=this.B,$=this.h,W=0;W<A;){if(0==$)for(;W<=O;)i(this,V,W),W+=this.blockSize;if("string"==typeof V){for(;W<A;)if(U[$++]=V.charCodeAt(W++),$==this.blockSize){i(this,U),$=0;break}}else for(;W<A;)if(U[$++]=V[W++],$==this.blockSize){i(this,U),$=0;break}}this.h=$,this.o+=A},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var A=1;A<V.length-8;++A)V[A]=0;var O=8*this.o;for(A=V.length-8;A<V.length;++A)V[A]=255&O,O/=256;for(this.u(V),V=Array(16),A=O=0;4>A;++A)for(var U=0;32>U;U+=8)V[O++]=this.g[A]>>>U&255;return V};var a={};function u(V){return-128<=V&&128>V?function o(V,A){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=A(V)}(V,function(A){return new s([0|A],0>A?-1:0)}):new s([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return N(d(-V));for(var A=[],O=1,U=0;V>=O;U++)A[U]=V/O|0,O*=4294967296;return new s(A,0)}var m=u(0),v=u(1),I=u(16777216);function C(V){if(0!=V.h)return!1;for(var A=0;A<V.g.length;A++)if(0!=V.g[A])return!1;return!0}function P(V){return-1==V.h}function N(V){for(var A=V.g.length,O=[],U=0;U<A;U++)O[U]=~V.g[U];return new s(O,~V.h).add(v)}function G(V,A){return V.add(N(A))}function F(V,A){for(;(65535&V[A])!=V[A];)V[A+1]+=V[A]>>>16,V[A]&=65535,A++}function Q(V,A){this.g=V,this.h=A}function de(V,A){if(C(A))throw Error("division by zero");if(C(V))return new Q(m,m);if(P(V))return A=de(N(V),A),new Q(N(A.g),N(A.h));if(P(A))return A=de(V,N(A)),new Q(N(A.g),A.h);if(30<V.g.length){if(P(V)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var O=v,U=A;0>=U.l(V);)O=ye(O),U=ye(U);var $=Be(O,1),W=Be(U,1);for(U=Be(U,2),O=Be(O,2);!C(U);){var x=W.add(U);0>=x.l(V)&&($=$.add(O),W=x),U=Be(U,1),O=Be(O,1)}return A=G(V,$.j(A)),new Q($,A)}for($=m;0<=V.l(A);){for(O=Math.max(1,Math.floor(V.m()/A.m())),U=48>=(U=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,U-48),x=(W=d(O)).j(A);P(x)||0<x.l(V);)x=(W=d(O-=U)).j(A);C(W)&&(W=v),$=$.add(W),V=G(V,x)}return new Q($,V)}function ye(V){for(var A=V.g.length+1,O=[],U=0;U<A;U++)O[U]=V.i(U)<<1|V.i(U-1)>>>31;return new s(O,V.h)}function Be(V,A){var O=A>>5;A%=32;for(var U=V.g.length-O,$=[],W=0;W<U;W++)$[W]=0<A?V.i(W+O)>>>A|V.i(W+O+1)<<32-A:V.i(W+O);return new s($,V.h)}(n=s.prototype).m=function(){if(P(this))return-N(this).m();for(var V=0,A=1,O=0;O<this.g.length;O++){var U=this.i(O);V+=(0<=U?U:4294967296+U)*A,A*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(C(this))return"0";if(P(this))return"-"+N(this).toString(V);for(var A=d(Math.pow(V,6)),O=this,U="";;){var $=de(O,A).g,W=((0<(O=G(O,$.j(A))).g.length?O.g[0]:O.h)>>>0).toString(V);if(C(O=$))return W+U;for(;6>W.length;)W="0"+W;U=W+U}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return P(V=G(this,V))?-1:C(V)?0:1},n.abs=function(){return P(this)?N(this):this},n.add=function(V){for(var A=Math.max(this.g.length,V.g.length),O=[],U=0,$=0;$<=A;$++){var W=U+(65535&this.i($))+(65535&V.i($)),x=(W>>>16)+(this.i($)>>>16)+(V.i($)>>>16);U=x>>>16,O[$]=(x&=65535)<<16|(W&=65535)}return new s(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(C(this)||C(V))return m;if(P(this))return P(V)?N(this).j(N(V)):N(N(this).j(V));if(P(V))return N(this.j(N(V)));if(0>this.l(I)&&0>V.l(I))return d(this.m()*V.m());for(var A=this.g.length+V.g.length,O=[],U=0;U<2*A;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var $=0;$<V.g.length;$++){var W=this.i(U)>>>16,x=65535&this.i(U),Ys=V.i($)>>>16,hg=65535&V.i($);O[2*U+2*$]+=x*hg,F(O,2*U+2*$),O[2*U+2*$+1]+=W*hg,F(O,2*U+2*$+1),O[2*U+2*$+1]+=x*Ys,F(O,2*U+2*$+1),O[2*U+2*$+2]+=W*Ys,F(O,2*U+2*$+2)}for(U=0;U<A;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=A;U<2*A;U++)O[U]=0;return new s(O,0)},n.A=function(V){return de(this,V).h},n.and=function(V){for(var A=Math.max(this.g.length,V.g.length),O=[],U=0;U<A;U++)O[U]=this.i(U)&V.i(U);return new s(O,this.h&V.h)},n.or=function(V){for(var A=Math.max(this.g.length,V.g.length),O=[],U=0;U<A;U++)O[U]=this.i(U)|V.i(U);return new s(O,this.h|V.h)},n.xor=function(V){for(var A=Math.max(this.g.length,V.g.length),O=[],U=0;U<A;U++)O[U]=this.i(U)^V.i(U);return new s(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,A1=D1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=function g(V,A){if(0==V.length)throw Error("number format error: empty string");if(2>(A=A||10)||36<A)throw Error("radix out of range: "+A);if("-"==V.charAt(0))return N(g(V.substring(1),A));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(A,8)),U=m,$=0;$<V.length;$+=8){var W=Math.min(8,V.length-$),x=parseInt(V.substring($,$+W),A);8>W?(W=d(Math.pow(A,W)),U=U.j(W).add(d(x))):U=(U=U.j(O)).add(d(x))}return U},ec=D1.Integer=s}).apply(typeof T1<"u"?T1:typeof self<"u"?self:typeof window<"u"?window:{});var S1,R1,Wf,P1,Oy,vb,M1,N1,x1,xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ls={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof xy&&xy];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var H=h[b];if(!(H in E))break e;E=E[H]}(_=_(b=E[h=h[h.length-1]]))!=b&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function o(h,_){h instanceof String&&(h+="");var E=0,b=!1,H={next:function(){if(!b&&E<h.length){var X=E++;return{value:_(X,h[X]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}(this,function(_,E){return E})}});var s=s||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),h.apply(_,H)}}return function(){return h.apply(_,arguments)}}function v(h,_,E){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function C(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(b,H,X){for(var Ie=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)Ie[Xt-2]=arguments[Xt];return _.prototype[H].apply(b,Ie)}}function P(h){const _=h.length;if(0<_){const E=Array(_);for(let b=0;b<_;b++)E[b]=h[b];return E}return[]}function N(h,_){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(u(b)){const H=h.length||0,X=b.length||0;h.length=H+X;for(let Ie=0;Ie<X;Ie++)h[H+Ie]=b[Ie]}else h.push(b)}}function F(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function de(h){return de[" "](h),h}de[" "]=function(){};var ye=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function Be(h,_,E){for(const b in h)_.call(E,h[b],b,h)}function A(h){const _={};for(const E in h)_[E]=h[E];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let E,b;for(let H=1;H<arguments.length;H++){for(E in b=arguments[H],b)h[E]=b[E];for(let X=0;X<O.length;X++)E=O[X],Object.prototype.hasOwnProperty.call(b,E)&&(h[E]=b[E])}}function $(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function W(h){a.setTimeout(()=>{throw h},0)}function x(){var h=QD;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var hg=new class G{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new _X,h=>h.reset());class _X{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let fg,pg=!1,QD=new class Ys{constructor(){this.h=this.g=null}add(_,E){const b=hg.get();b.set(_,E),this.h?this.h.next=b:this.g=b,this.h=b}},lU=()=>{const h=a.Promise.resolve(void 0);fg=()=>{h.then(yX)}};var yX=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(E){W(E)}var _=hg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}pg=!1};function su(){this.s=this.s,this.C=this.C}function Yr(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}su.prototype.s=!1,su.prototype.ma=function(){this.s||(this.s=!0,this.N())},su.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Yr.prototype.h=function(){this.defaultPrevented=!0};var vX=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function gg(h,_){if(Yr.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ye){e:{try{de(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,b?(this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:EX[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&gg.aa.h.call(this)}}C(gg,Yr);var EX={2:"touch",3:"pen",4:"mouse"};gg.prototype.h=function(){gg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var mg="closure_listenable_"+(1e6*Math.random()|0),IX=0;function wX(h,_,E,b,H){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!b,this.ha=H,this.key=++IX,this.da=this.fa=!1}function mE(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _E(h){this.src=h,this.g={},this.h=0}function YD(h,_){var E=_.type;if(E in h.g){var X,b=h.g[E],H=Array.prototype.indexOf.call(b,_,void 0);(X=0<=H)&&Array.prototype.splice.call(b,H,1),X&&(mE(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function JD(h,_,E,b){for(var H=0;H<h.length;++H){var X=h[H];if(!X.da&&X.listener==_&&X.capture==!!E&&X.ha==b)return H}return-1}_E.prototype.add=function(h,_,E,b,H){var X=h.toString();(h=this.g[X])||(h=this.g[X]=[],this.h++);var Ie=JD(h,_,b,H);return-1<Ie?(_=h[Ie],E||(_.fa=!1)):((_=new wX(_,this.src,X,!!b,H)).fa=E,h.push(_)),_};var XD="closure_lm_"+(1e6*Math.random()|0),eA={};function dU(h,_,E,b,H){if(b&&b.once)return fU(h,_,E,b,H);if(Array.isArray(_)){for(var X=0;X<_.length;X++)dU(h,_[X],E,b,H);return null}return E=iA(E),h&&h[mg]?h.K(_,E,d(b)?!!b.capture:!!b,H):hU(h,_,E,!1,b,H)}function hU(h,_,E,b,H,X){if(!_)throw Error("Invalid event type");var Ie=d(H)?!!H.capture:!!H,Xt=nA(h);if(Xt||(h[XD]=Xt=new _E(h)),(E=Xt.add(_,E,b,Ie,X)).proxy)return E;if(b=function bX(){const _=CX;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=b,b.src=h,b.listener=E,h.addEventListener)vX||(H=Ie),void 0===H&&(H=!1),h.addEventListener(_.toString(),b,H);else if(h.attachEvent)h.attachEvent(gU(_.toString()),b);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(b)}return E}function fU(h,_,E,b,H){if(Array.isArray(_)){for(var X=0;X<_.length;X++)fU(h,_[X],E,b,H);return null}return E=iA(E),h&&h[mg]?h.L(_,E,d(b)?!!b.capture:!!b,H):hU(h,_,E,!0,b,H)}function pU(h,_,E,b,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)pU(h,_[X],E,b,H);else b=d(b)?!!b.capture:!!b,E=iA(E),h&&h[mg]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=JD(X=h.g[_],E,b,H))&&(mE(X[E]),Array.prototype.splice.call(X,E,1),0==X.length&&(delete h.g[_],h.h--))):h&&(h=nA(h))&&(_=h.g[_.toString()],h=-1,_&&(h=JD(_,E,b,H)),(E=-1<h?_[h]:null)&&tA(E))}function tA(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[mg])YD(_.i,h);else{var E=h.type,b=h.proxy;_.removeEventListener?_.removeEventListener(E,b,h.capture):_.detachEvent?_.detachEvent(gU(E),b):_.addListener&&_.removeListener&&_.removeListener(b),(E=nA(_))?(YD(E,h),0==E.h&&(E.src=null,_[XD]=null)):mE(h)}}}function gU(h){return h in eA?eA[h]:eA[h]="on"+h}function CX(h,_){if(h.da)h=!0;else{_=new gg(_,this);var E=h.listener,b=h.ha||h.src;h.fa&&tA(h),h=E.call(b,_)}return h}function nA(h){return(h=h[XD])instanceof _E?h:null}var rA="__closure_events_fn_"+(1e9*Math.random()>>>0);function iA(h){return"function"==typeof h?h:(h[rA]||(h[rA]=function(_){return h.handleEvent(_)}),h[rA])}function Jr(){su.call(this),this.i=new _E(this),this.M=this,this.F=null}function pi(h,_){var E,b=h.F;if(b)for(E=[];b;b=b.F)E.push(b);if(h=h.M,b=_.type||_,"string"==typeof _)_=new Yr(_,h);else if(_ instanceof Yr)_.target=_.target||h;else{var H=_;U(_=new Yr(b,h),H)}if(H=!0,E)for(var X=E.length-1;0<=X;X--){var Ie=_.g=E[X];H=yE(Ie,b,!0,_)&&H}if(H=yE(Ie=_.g=h,b,!0,_)&&H,H=yE(Ie,b,!1,_)&&H,E)for(X=0;X<E.length;X++)H=yE(Ie=_.g=E[X],b,!1,_)&&H}function yE(h,_,E,b){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var H=!0,X=0;X<_.length;++X){var Ie=_[X];if(Ie&&!Ie.da&&Ie.capture==E){var Xt=Ie.listener,xr=Ie.ha||Ie.src;Ie.fa&&YD(h.i,Ie),H=!1!==Xt.call(xr,b)&&H}}return H&&!b.defaultPrevented}function mU(h,_,E){if("function"==typeof h)E&&(h=v(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function _U(h){h.g=mU(()=>{h.g=null,h.i&&(h.i=!1,_U(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}C(Jr,su),Jr.prototype[mg]=!0,Jr.prototype.removeEventListener=function(h,_,E,b){pU(this,h,_,E,b)},Jr.prototype.N=function(){if(Jr.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],b=0;b<E.length;b++)mE(E[b]);delete h.g[_],h.h--}}this.F=null},Jr.prototype.K=function(h,_,E,b){return this.i.add(String(h),_,!1,E,b)},Jr.prototype.L=function(h,_,E,b){return this.i.add(String(h),_,!0,E,b)};class TX extends su{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_U(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _g(h){su.call(this),this.h=h,this.g={}}C(_g,su);var yU=[];function vU(h){Be(h.g,function(_,E){this.g.hasOwnProperty(E)&&tA(_)},h),h.g={}}_g.prototype.N=function(){_g.aa.N.call(this),vU(this)},_g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oA=a.JSON.stringify,DX=a.JSON.parse,AX=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function sA(){}function IU(){}sA.prototype.h=null;var yg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function aA(){Yr.call(this,"d")}function uA(){Yr.call(this,"c")}C(aA,Yr),C(uA,Yr);var Rc={},wU=null;function vE(){return wU=wU||new Jr}function bU(h){Yr.call(this,Rc.La,h)}function vg(h){const _=vE();pi(_,new bU(_))}function CU(h,_){Yr.call(this,Rc.STAT_EVENT,h),this.stat=_}function gi(h){const _=vE();pi(_,new CU(_,h))}function TU(h,_){Yr.call(this,Rc.Ma,h),this.size=_}function Eg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Ig(){this.g=!0}function Qd(h,_,E,b){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function MX(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var b=E[h];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if("noop"!=X&&"stop"!=X&&"close"!=X)for(var Ie=1;Ie<H.length;Ie++)H[Ie]=""}}}return oA(E)}catch{return _}}(h,E)+(b?" "+b:"")})}Rc.La="serverreachability",C(bU,Yr),Rc.STAT_EVENT="statevent",C(CU,Yr),Rc.Ma="timingevent",C(TU,Yr),Ig.prototype.xa=function(){this.g=!1},Ig.prototype.info=function(){};var cA,EE={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function IE(){}function au(h,_,E,b){this.j=h,this.i=_,this.l=E,this.R=b||1,this.U=new _g(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new AU}function AU(){this.i=null,this.g="",this.h=!1}C(IE,sA),IE.prototype.g=function(){return new XMLHttpRequest},IE.prototype.i=function(){return{}},cA=new IE;var SU={},lA={};function dA(h,_,E){h.L=1,h.v=TE(Js(_)),h.m=E,h.P=!0,RU(h,null)}function RU(h,_){h.F=Date.now(),wE(h),h.A=Js(h.v);var E=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),HU(E.i,"t",b),h.C=0,E=h.j.J,h.h=new AU,h.g=aB(h.j,E?_:null,!h.m),0<h.O&&(h.M=new TX(v(h.Y,h,h.g),h.O)),_=h.U,E=h.g,b=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(yU[0]=H.toString()),H=yU);for(var X=0;X<H.length;X++){var Ie=dU(E,H[X],b||_.handleEvent,!1,_.h||_);if(!Ie)break;_.g[Ie.key]=Ie}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),vg(),function SX(h,_,E,b,H,X){h.info(function(){if(h.g)if(X)for(var Ie="",Xt=X.split("&"),xr=0;xr<Xt.length;xr++){var xt=Xt[xr].split("=");if(1<xt.length){var Xr=xt[0];xt=xt[1];var ei=Xr.split("_");Ie=2<=ei.length&&"type"==ei[1]?Ie+(Xr+"=")+xt+"&":Ie+(Xr+"=redacted&")}}else Ie=null;else Ie=X;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+_+"\n"+E+"\n"+Ie})}(h.i,h.u,h.A,h.l,h.R,h.m)}function PU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function NX(h,_){var E=h.C,b=_.indexOf("\n",E);return-1==b?lA:(E=Number(_.substring(E,b)),isNaN(E)?SU:(b+=1)+E>_.length?lA:(_=_.slice(b,b+E),h.C=b+E,_))}function wE(h){h.S=Date.now()+h.I,MU(h,h.I)}function MU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Eg(v(h.ba,h),_)}function hA(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function wg(h){0==h.j.G||h.J||rB(h.j,h)}function Pc(h){hA(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,vU(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function fA(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||pA(E.h,h)))if(!h.K&&pA(E.h,h)&&3==E.G){try{var b=E.Da.g.parse(_)}catch{b=null}if(Array.isArray(b)&&3==b.length){var H=b;if(0==H[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;PE(E),SE(E)}yA(E),gi(18)}}else E.za=H[1],0<E.za-E.T&&37500>H[2]&&E.F&&0==E.v&&!E.C&&(E.C=Eg(v(E.Za,E),6e3));if(1>=OU(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Nc(E,11)}else if((h.K||E.g==h)&&PE(E),!F(_))for(H=E.Da.g.parse(_),_=0;_<H.length;_++){let xt=H[_];if(E.T=xt[0],xt=xt[1],2==E.G)if("c"==xt[0]){E.K=xt[1],E.ia=xt[2];const Xr=xt[3];null!=Xr&&(E.la=Xr,E.j.info("VER="+E.la));const ei=xt[4];null!=ei&&(E.Aa=ei,E.j.info("SVER="+E.Aa));const Xd=xt[5];null!=Xd&&"number"==typeof Xd&&0<Xd&&(E.L=b=1.5*Xd,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const Mo=h.g;if(Mo){const NE=Mo.g?Mo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(NE){var X=b.h;X.g||-1==NE.indexOf("spdy")&&-1==NE.indexOf("quic")&&-1==NE.indexOf("h2")||(X.j=X.l,X.g=new Set,X.h&&(gA(X,X.h),X.h=null))}if(b.D){const EA=Mo.g?Mo.g.getResponseHeader("X-HTTP-Session-Id"):null;EA&&(b.ya=EA,fn(b.I,b.D,EA))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ie=h;if((b=E).qa=sB(b,b.J?b.ia:null,b.W),Ie.K){kU(b.h,Ie);var Xt=Ie,xr=b.L;xr&&(Xt.I=xr),Xt.B&&(hA(Xt),wE(Xt)),b.g=Ie}else tB(b);0<E.i.length&&RE(E)}else"stop"!=xt[0]&&"close"!=xt[0]||Nc(E,7);else 3==E.G&&("stop"==xt[0]||"close"==xt[0]?"stop"==xt[0]?Nc(E,7):_A(E):"noop"!=xt[0]&&E.l&&E.l.ta(xt),E.v=0)}vg()}catch{}}function NU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function OU(h){return h.h?1:h.g?h.g.size:0}function pA(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function gA(h,_){h.g?h.g.add(_):h.h=_}function kU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function VU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return P(h.i)}function FU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function kX(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const b in h)_[E++]=b;return _}}}(h),b=function OX(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],E=h.length,b=0;b<E;b++)_.push(h[b]);return _}for(b in _=[],E=0,h)_[E++]=h[b];return _}(h),H=b.length,X=0;X<H;X++)_.call(void 0,b[X],E&&E[X],h)}au.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Xs(h)?_.j():this.Y(h)},au.prototype.Y=function(h){try{if(h==this.g)e:{const ei=Xs(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>ei)&&(3!=ei||this.g&&(this.h.h||this.g.oa()||QU(this.g)))){this.J||4!=ei||7==_||vg(),hA(this);var E=this.g.Z();this.X=E;t:if(PU(this)){var b=QU(this.g);h="";var H=b.length,X=4==Xs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pc(this),wg(this);var Ie="";break t}this.h.i=new a.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,h+=this.h.i.decode(b[_],{stream:!(X&&_==H-1)});b.length=0,this.h.g+=h,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=200==E,function RX(h,_,E,b,H,X,Ie){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+_+"\n"+E+"\n"+X+" "+Ie})}(this.i,this.u,this.A,this.l,this.R,ei,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Xt,xr=this.g;if((Xt=xr.g?xr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Xt)){var xt=Xt;break t}}xt=null}if(!(E=xt)){this.o=!1,this.s=3,gi(12),Pc(this),wg(this);break e}Qd(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fA(this,E)}if(this.P){let Mo;for(E=!0;!this.J&&this.C<Ie.length;){if(Mo=NX(this,Ie),Mo==lA){4==ei&&(this.s=4,gi(14),E=!1),Qd(this.i,this.l,null,"[Incomplete Response]");break}if(Mo==SU){this.s=4,gi(15),Qd(this.i,this.l,Ie,"[Invalid Chunk]"),E=!1;break}Qd(this.i,this.l,Mo,null),fA(this,Mo)}if(PU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ei||0!=Ie.length||this.h.h||(this.s=1,gi(16),E=!1),this.o=this.o&&E,E){if(0<Ie.length&&!this.W){this.W=!0;var Xr=this.j;Xr.g==this&&Xr.ba&&!Xr.M&&(Xr.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),vA(Xr),Xr.M=!0,gi(11))}}else Qd(this.i,this.l,Ie,"[Invalid Chunked Response]"),Pc(this),wg(this)}else Qd(this.i,this.l,Ie,null),fA(this,Ie);4==ei&&Pc(this),this.o&&!this.J&&(4==ei?rB(this.j,this):(this.o=!1,wE(this)))}else(function KX(h){const _={};h=(h.g&&2<=Xs(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let b=0;b<h.length;b++){if(F(h[b]))continue;var E=$(h[b]);const H=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const X=_[H]||[];_[H]=X,X.push(E)}!function V(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(b){return b.join(", ")})})(this.g),400==E&&0<Ie.indexOf("Unknown SID")?(this.s=3,gi(12)):(this.s=0,gi(13)),Pc(this),wg(this)}}}catch{}},au.prototype.cancel=function(){this.J=!0,Pc(this)},au.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function PX(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(vg(),gi(17)),Pc(this),this.s=2,wg(this)):MU(this,this.S-h)},NU.prototype.cancel=function(){if(this.i=VU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var LU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Mc){this.h=h.h,bE(this,h.j),this.o=h.o,this.g=h.g,CE(this,h.s),this.l=h.l;var _=h.i,E=new Tg;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),UU(this,E),this.m=h.m}else h&&(_=String(h).match(LU))?(this.h=!1,bE(this,_[1]||"",!0),this.o=bg(_[2]||""),this.g=bg(_[3]||"",!0),CE(this,_[4]),this.l=bg(_[5]||"",!0),UU(this,_[6]||"",!0),this.m=bg(_[7]||"")):(this.h=!1,this.i=new Tg(null,this.h))}function Js(h){return new Mc(h)}function bE(h,_,E){h.j=E?bg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function CE(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function UU(h,_,E){_ instanceof Tg?(h.i=_,function $X(h,_){_&&!h.j&&(uu(h),h.i=null,h.g.forEach(function(E,b){var H=b.toLowerCase();b!=H&&(jU(this,b),HU(this,H,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Cg(_,BX)),h.i=new Tg(_,h.h))}function fn(h,_,E){h.i.set(_,E)}function TE(h){return fn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function bg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Cg(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,FX),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function FX(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Mc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Cg(_,BU,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Cg(_,BU,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Cg(E,"/"==E.charAt(0)?UX:LX,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Cg(E,jX)),h.join("")};var h,BU=/[#\/\?@]/g,LX=/[#\?:]/g,UX=/[#\?]/g,BX=/[#\?@]/g,jX=/#/g;function Tg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function uu(h){h.g||(h.g=new Map,h.h=0,h.i&&function VX(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var b=h[E].indexOf("="),H=null;if(0<=b){var X=h[E].substring(0,b);H=h[E].substring(b+1)}else X=h[E];_(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function jU(h,_){uu(h),_=Yd(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function $U(h,_){return uu(h),_=Yd(h,_),h.g.has(_)}function HU(h,_,E){jU(h,_),0<E.length&&(h.i=null,h.g.set(Yd(h,_),P(E)),h.h+=E.length)}function Yd(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function cu(h,_,E,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(E)}catch{}}function qX(){this.g=new AX}function GX(h,_,E){const b=E||"";try{FU(h,function(H,X){let Ie=H;d(H)&&(Ie=oA(H)),_.push(b+X+"="+encodeURIComponent(Ie))})}catch(H){throw _.push(b+"type="+encodeURIComponent("_badmap")),H}}function Dg(h){this.l=h.Ub||null,this.j=h.eb||!1}function DE(h,_){Jr.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function zU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Ag(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Sg(h)}function Sg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function qU(h){let _="";return Be(h,function(E,b){_+=b,_+=":",_+=E,_+="\r\n"}),_}function mA(h,_,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=qU(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):fn(h,_,E))}function kn(h){Jr.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Tg.prototype).add=function(h,_){uu(this),this.i=null,h=Yd(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){uu(this),this.g.forEach(function(E,b){E.forEach(function(H){h.call(_,H,b,this)},this)},this)},n.na=function(){uu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let b=0;b<_.length;b++){const H=h[b];for(let X=0;X<H.length;X++)E.push(_[b])}return E},n.V=function(h){uu(this);let _=[];if("string"==typeof h)$U(this,h)&&(_=_.concat(this.g.get(Yd(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return uu(this),this.i=null,$U(this,h=Yd(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var b=_[E];const X=encodeURIComponent(String(b)),Ie=this.V(b);for(b=0;b<Ie.length;b++){var H=X;""!==Ie[b]&&(H+="="+encodeURIComponent(String(Ie[b]))),h.push(H)}}return this.i=h.join("&")},C(Dg,sA),Dg.prototype.g=function(){return new DE(this.l,this.j)},Dg.prototype.i=(h={},function(){return h}),C(DE,Jr),(n=DE.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Sg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ag(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Sg(this)),this.g&&(this.readyState=3,Sg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Ag(this):Sg(this),3==this.readyState&&zU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ag(this))},n.Qa=function(h){this.g&&(this.response=h,Ag(this))},n.ga=function(){this.g&&Ag(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(DE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),C(kn,Jr);var WX=/^https?$/i,ZX=["POST","PUT"];function GU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,WU(h),AE(h)}function WU(h){h.A||(h.A=!0,pi(h,"complete"),pi(h,"error"))}function ZU(h){if(h.h&&typeof s<"u"&&(!h.v[1]||4!=Xs(h)||2!=h.Z()))if(h.u&&4==Xs(h))mU(h.Ea,0,h);else if(pi(h,"readystatechange"),4==Xs(h)){h.h=!1;try{const Ie=h.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var b;if(b=0===Ie){var H=String(h.D).match(LU)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),b=!WX.test(H?H.toLowerCase():"")}E=b}if(E)pi(h,"complete"),pi(h,"success");else{h.m=6;try{var X=2<Xs(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",WU(h)}}finally{AE(h)}}}function AE(h,_){if(h.g){KU(h);const E=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||pi(h,"ready");try{E.onreadystatechange=b}catch{}}}function KU(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Xs(h){return h.g?h.g.readyState:0}function QU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rg(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function YU(h){this.Aa=0,this.i=[],this.j=new Ig,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rg("baseRetryDelayMs",5e3,h),this.cb=Rg("retryDelaySeedMs",1e4,h),this.Wa=Rg("forwardChannelMaxRetries",2,h),this.wa=Rg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new NU(h&&h.concurrentRequestLimit),this.Da=new qX,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _A(h){if(JU(h),3==h.G){var _=h.U++,E=Js(h.I);if(fn(E,"SID",h.K),fn(E,"RID",_),fn(E,"TYPE","terminate"),Pg(h,E),(_=new au(h,h.j,_)).L=2,_.v=TE(Js(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=aB(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wE(_)}oB(h)}function SE(h){h.g&&(vA(h),h.g.cancel(),h.g=null)}function JU(h){SE(h),h.u&&(a.clearTimeout(h.u),h.u=null),PE(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function RE(h){if(!xU(h.h)&&!h.s){h.s=!0;var _=h.Ga;fg||lU(),pg||(fg(),pg=!0),QD.add(_,h),h.B=0}}function XU(h,_){var E;E=_?_.l:h.U++;const b=Js(h.I);fn(b,"SID",h.K),fn(b,"RID",E),fn(b,"AID",h.T),Pg(h,b),h.m&&h.o&&mA(b,h.m,h.o),E=new au(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=eB(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),gA(h.h,E),dA(E,b,_)}function Pg(h,_){h.H&&Be(h.H,function(E,b){fn(_,b,E)}),h.l&&FU({},function(E,b){fn(_,b,E)})}function eB(h,_,E){E=Math.min(h.i.length,E);var b=h.l?v(h.l.Na,h.l,h):null;e:{var H=h.i;let X=-1;for(;;){const Ie=["count="+E];-1==X?0<E?(X=H[0].g,Ie.push("ofs="+X)):X=0:Ie.push("ofs="+X);let Xt=!0;for(let xr=0;xr<E;xr++){let xt=H[xr].g;const Xr=H[xr].map;if(xt-=X,0>xt)X=Math.max(0,H[xr].g-100),Xt=!1;else try{GX(Xr,Ie,"req"+xt+"_")}catch{b&&b(Xr)}}if(Xt){b=Ie.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,b}function tB(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;fg||lU(),pg||(fg(),pg=!0),QD.add(_,h),h.v=0}}function yA(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Eg(v(h.Fa,h),iB(h,h.v)),h.v++,0))}function vA(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function nB(h){h.g=new au(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Js(h.qa);fn(_,"RID","rpc"),fn(_,"SID",h.K),fn(_,"AID",h.T),fn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&fn(_,"TO",h.ja),fn(_,"TYPE","xmlhttp"),Pg(h,_),h.m&&h.o&&mA(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=TE(Js(_)),E.m=null,E.P=!0,RU(E,h)}function PE(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function rB(h,_){var E=null;if(h.g==_){PE(h),vA(h),h.g=null;var b=2}else{if(!pA(h.h,_))return;E=_.D,kU(h.h,_),b=1}if(0!=h.G)if(_.o)if(1==b){E=_.m?_.m.length:0,_=Date.now()-_.F;var H=h.B;pi(b=vE(),new TU(b,E)),RE(h)}else tB(h);else if(3==(H=_.s)||0==H&&0<_.X||!(1==b&&function QX(h,_){return!(OU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Eg(v(h.Ga,h,_),iB(h,h.B)),h.B++,0)))}(h,_)||2==b&&yA(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),H){case 1:Nc(h,5);break;case 4:Nc(h,10);break;case 3:Nc(h,6);break;default:Nc(h,2)}}function iB(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Nc(h,_){if(h.j.info("Error code "+_),2==_){var E=v(h.fb,h),b=h.Xa;const H=!b;b=new Mc(b||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||bE(b,"https"),TE(b),H?function HX(h,_){const E=new Ig;if(a.Image){const b=new Image;b.onload=I(cu,E,"TestLoadImage: loaded",!0,_,b),b.onerror=I(cu,E,"TestLoadImage: error",!1,_,b),b.onabort=I(cu,E,"TestLoadImage: abort",!1,_,b),b.ontimeout=I(cu,E,"TestLoadImage: timeout",!1,_,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else _(!1)}(b.toString(),E):function zX(h,_){new Ig;const b=new AbortController,H=setTimeout(()=>{b.abort(),cu(0,0,!1,_)},1e4);fetch(h,{signal:b.signal}).then(X=>{clearTimeout(H),cu(0,0,!!X.ok,_)}).catch(()=>{clearTimeout(H),cu(0,0,!1,_)})}(b.toString(),E)}else gi(2);h.G=0,h.l&&h.l.sa(_),oB(h),JU(h)}function oB(h){if(h.G=0,h.ka=[],h.l){const _=VU(h.h);(0!=_.length||0!=h.i.length)&&(N(h.ka,_),N(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function sB(h,_,E){var b=E instanceof Mc?Js(E):new Mc(E);if(""!=b.g)_&&(b.g=_+"."+b.g),CE(b,b.s);else{var H=a.location;b=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var X=new Mc(null);b&&bE(X,b),_&&(X.g=_),H&&CE(X,H),E&&(X.l=E),b=X}return _=h.ya,(E=h.D)&&_&&fn(b,E,_),fn(b,"VER",h.la),Pg(h,b),b}function aB(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new kn(h.Ca&&!h.pa?new Dg({eb:E}):h.pa)).Ha(h.J),_}function uB(){}function ME(){}function qi(h,_){Jr.call(this),this.g=new YU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Jd(this)}function cB(h){aA.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function lB(){uA.call(this),this.status=1}function Jd(h){this.g=h}(n=kn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cA.g(),this.v=function EU(h){return h.h||(h.h=h.i())}(this.o?this.o:cA),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){return void GU(this,X)}if(h=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)E.set(H,b[H]);else{if("function"!=typeof b.keys||"function"!=typeof b.get)throw Error("Unknown input type for opt_headers: "+String(b));for(const X of b.keys())E.set(X,b.get(X))}b=Array.from(E.keys()).find(X=>"content-type"==X.toLowerCase()),H=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ZX,_,void 0))||b||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,Ie]of E)this.g.setRequestHeader(X,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{KU(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){GU(this,X)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,pi(this,"complete"),pi(this,"abort"),AE(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),AE(this,!0)),kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ZU(this):this.bb())},n.bb=function(){ZU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Xs(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),DX(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=YU.prototype).la=8,n.G=1,n.connect=function(h,_,E,b){gi(0),this.W=h,this.H=_||{},E&&void 0!==b&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=sB(this,null,this.W),RE(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new au(this,this.j,h);let X=this.o;if(this.S&&(X?(X=A(X),U(X,this.S)):X=this.S),null!==this.m||this.O||(H.H=X,X=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var b=this.i[E];if(void 0===(b="__data__"in b.map&&"string"==typeof(b=b.map.__data__)?b.length:void 0))break;if(4096<(_+=b)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=eB(this,H,_),fn(E=Js(this.I),"RID",h),fn(E,"CVER",22),this.D&&fn(E,"X-HTTP-Session-Id",this.D),Pg(this,E),X&&(this.O?_="headers="+encodeURIComponent(String(qU(X)))+"&"+_:this.m&&mA(E,this.m,X)),gA(this.h,H),this.Ua&&fn(E,"TYPE","init"),this.P?(fn(E,"$req",_),fn(E,"SID","null"),H.T=!0,dA(H,E,null)):dA(H,E,_),this.G=2}}else 3==this.G&&(h?XU(this,h):0==this.i.length||xU(this.h)||XU(this))},n.Fa=function(){if(this.u=null,nB(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Eg(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gi(10),SE(this),nB(this))},n.Za=function(){null!=this.C&&(this.C=null,SE(this),yA(this),gi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),gi(2)):(this.j.info("Failed to ping google.com"),gi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=uB.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},ME.prototype.g=function(h,_){return new qi(h,_)},C(qi,Jr),qi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qi.prototype.close=function(){_A(this.g)},qi.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=oA(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&RE(_)},qi.prototype.N=function(){this.g.l=null,delete this.j,_A(this.g),delete this.g,qi.aa.N.call(this)},C(cB,aA),C(lB,uA),C(Jd,uB),Jd.prototype.ua=function(){pi(this.g,"a")},Jd.prototype.ta=function(h){pi(this.g,new cB(h))},Jd.prototype.sa=function(h){pi(this.g,new lB)},Jd.prototype.ra=function(){pi(this.g,"b")},ME.prototype.createWebChannel=ME.prototype.g,qi.prototype.send=qi.prototype.o,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,x1=Ls.createWebChannelTransport=function(){return new ME},N1=Ls.getStatEventTarget=function(){return vE()},M1=Ls.Event=Rc,vb=Ls.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},EE.NO_ERROR=0,EE.TIMEOUT=8,EE.HTTP_ERROR=6,Oy=Ls.ErrorCode=EE,DU.COMPLETE="complete",P1=Ls.EventType=DU,IU.EventType=yg,yg.OPEN="a",yg.CLOSE="b",yg.ERROR="c",yg.MESSAGE="d",Jr.prototype.listen=Jr.prototype.K,Wf=Ls.WebChannel=IU,R1=Ls.FetchXmlHttpFactory=Dg,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,S1=Ls.XhrIo=kn}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});const O1="@firebase/firestore";class vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");let rd="10.12.3";const Va=new Qo.Yd("@firebase/firestore");function id(){return Va.logLevel}function fe(n,...e){if(Va.logLevel<=Qo.in.DEBUG){const t=e.map(Eb);Va.debug(`Firestore (${rd}): ${n}`,...t)}}function Hn(n,...e){if(Va.logLevel<=Qo.in.ERROR){const t=e.map(Eb);Va.error(`Firestore (${rd}): ${n}`,...t)}}function Si(n,...e){if(Va.logLevel<=Qo.in.WARN){const t=e.map(Eb);Va.warn(`Firestore (${rd}): ${n}`,...t)}}function Eb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Me(n="Unexpected state"){const e=`FIRESTORE (${rd}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function Ve(n,e){n||Me()}function Ee(n,e){return n}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ft.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class k1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vr.UNAUTHENTICATED))}shutdown(){}}class sq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aq{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let s=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ur,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable((0,oe.Z)(function*(){yield d.promise,yield o(r.currentUser)}))},u=d=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ur)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve("string"==typeof r.accessToken),new k1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ve(null===e||"string"==typeof e),new vr(e)}}class uq{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cq{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new uq(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve("string"==typeof t.token),this.R=t.token,new V1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class F1{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=dq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function tt(n,e){return n<e?-1:n>e?1:0}function od(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function L1(n){return n+"\0"}class vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new vn(0,0))}static max(){return new Fe(new vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Me(),void 0===r?r=e.length-t:r>e.length-t&&Me(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Zf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class It extends Zf{construct(e,t,r){return new It(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new It(t)}static emptyPath(){return new It([])}}const hq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Zf{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return hq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(It.fromString(e))}static fromName(e){return new be(It.fromString(e).popFirst(5))}static empty(){return new be(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===It.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new It(e.slice()))}}class sd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ib(n){return n.fields.find(e=>2===e.kind)}function tc(n){return n.fields.filter(e=>2!==e.kind)}sd.UNKNOWN_ID=-1;class nc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ad{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ad(0,Hi.min())}}function U1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(1e9===r?new vn(t+1,0):new vn(t,r));return new Hi(i,be.empty(),e)}function B1(n){return new Hi(n.readTime,n.key,-1)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(Fe.min(),be.empty(),-1)}static max(){return new Hi(Fe.max(),be.empty(),-1)}}function wb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=be.comparator(n.documentKey,e.documentKey),0!==t?t:tt(n.largestBatchId,e.largestBatchId))}const j1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fa(n){return bb.apply(this,arguments)}function bb(){return(bb=(0,oe.Z)(function*(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==j1)throw n;fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const d=u;t(e[d]).next(g=>{s[d]=g,++a,a===o&&r(s)},g=>i(g))}})}static doWhile(e,t){return new q((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class ky{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ur,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Kf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Cb(r.target.error);this.V.reject(new Kf(e,i))}}static open(e,t,r,i){try{return new ky(t,e.transaction(i,r))}catch(o){throw new Kf(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mq(t)}}class Yo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Yo.S((0,Ft.z$)())&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),rc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ft.hl)())return!1;if(Yo.C())return!0;const e=(0,Ft.z$)(),t=Yo.S(e),r=0<t&&t<10,i=H1(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,oe.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Kf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ce(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Kf(e,a))},o.onupgradeneeded=s=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,oe.Z)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.M(e);const u=ky.open(o.db,e,s?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),q.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(fe("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),o.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function H1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class gq{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return rc(this.B.delete())}}class Kf extends ce{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function La(n){return"IndexedDbTransactionError"===n.name}class mq{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rc(r)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),rc(this.store.add(e))}get(e){return rc(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),rc(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),rc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new q((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=o=>{const s=Cb(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new gq(a),d=t(a.primaryKey,a.value,u);if(d instanceof q){const g=d.catch(m=>(u.done(),q.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rc(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Cb(r.target.error);t(i)}})}let z1=!1;function Cb(n){const e=Yo.S((0,Ft.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return z1||(z1=!0,setTimeout(()=>{throw r},0)),r}}return n}class _q{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;fe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,oe.Z)(function*(){t.task=null;try{fe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){La(r)?fe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Fa(r)}yield t.X(6e4)}))}}class yq{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,o=!0;return q.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return fe("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(fe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=B1(o);wb(s,r)>0&&(r=s)}),new Hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Qf(n){return null==n}function Yf(n){return 0===n&&1/n==-1/0}function q1(n){return"number"==typeof n&&Number.isInteger(n)&&!Yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Gr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=G1(e)),e=vq(n.get(t),e);return G1(e)}function vq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function G1(n){return n+"\x01\x01"}function Jo(n){const e=n.length;if(Ve(e>=2),2===e)return Ve("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),It.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Me(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Me()}o=s+2}return new It(r)}const W1=["userId","batchId"];function Vy(n,e){return[n,Gr(e)]}function Z1(n,e,t){return[n,Gr(e),t]}const Eq={},Iq=["prefixPath","collectionGroup","readTime","documentId"],wq=["prefixPath","collectionGroup","documentId"],bq=["collectionGroup","readTime","prefixPath","documentId"],Cq=["canonicalId","targetId"],Tq=["targetId","path"],Dq=["path","targetId"],Aq=["collectionId","parent"],Sq=["indexId","uid"],Rq=["uid","sequenceNumber"],Pq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mq=["indexId","uid","orderedDocumentKey"],Nq=["userId","collectionPath","documentId"],xq=["userId","collectionPath","largestBatchId"],Oq=["userId","collectionGroup","largestBatchId"],K1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kq=[...K1,"documentOverlays"],Q1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Y1=Q1,J1=[...Y1,"indexConfiguration","indexState","indexEntries"],Vq=J1;class Tb extends $1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Er(n,e){const t=Ee(n);return Yo.F(t._e,e)}function X1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sn{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fy(this.root,e,this.comparator,!0)}}class Fy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Pr.RED,this.left=i??Pr.EMPTY,this.right=o??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Pr(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1,Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nO(this.data.getIterator())}getIteratorFrom(e){return new nO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class nO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ud(n){return n.hasNext()?n.getNext():void 0}class Ri{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Ri([])}unionWith(e){let t=new Kt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ri(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class rO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rO("Invalid base64 string: "+o):o}}(e);return new cr(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const Lq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(n){if(Ve(!!n),"string"==typeof n){let e=0;const t=Lq.exec(n);if(Ve(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(n.seconds),nanos:On(n.nanos)}}function On(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bs(n){return"string"==typeof n?cr.fromBase64String(n):cr.fromUint8Array(n)}function Ly(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Uy(n){const e=n.mapValue.fields.__previous_value__;return Ly(e)?Uy(e):e}function Jf(n){const e=Us(n.mapValue.fields.__local_write_time__.timestampValue);return new vn(e.seconds,e.nanos)}class Uq{constructor(e,t,r,i,o,s,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Ba{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ba("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}const ja={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},By={nullValue:"NULL_VALUE"};function $a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ly(n)?4:aO(n)?9007199254740991:10:Me()}function Xo(n,e){if(n===e)return!0;const t=$a(n);if(t!==$a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jf(n).isEqual(Jf(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Us(i.timestampValue),a=Us(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Bs(n.bytesValue).isEqual(Bs(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return On(i.geoPointValue.latitude)===On(o.geoPointValue.latitude)&&On(i.geoPointValue.longitude)===On(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return On(i.integerValue)===On(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=On(i.doubleValue),a=On(o.doubleValue);return s===a?Yf(s)===Yf(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return od(n.arrayValue.values||[],e.arrayValue.values||[],Xo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(X1(s)!==X1(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Xo(s[u],a[u])))return!1;return!0}(n,e);default:return Me()}var o}function Xf(n,e){return void 0!==(n.values||[]).find(t=>Xo(t,e))}function Ha(n,e){if(n===e)return 0;const t=$a(n),r=$a(e);if(t!==r)return tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=On(o.integerValue||o.doubleValue),u=On(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return iO(n.timestampValue,e.timestampValue);case 4:return iO(Jf(n),Jf(e));case 5:return tt(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Bs(o),u=Bs(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=tt(a[d],u[d]);if(0!==g)return g}return tt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=tt(On(o.latitude),On(s.latitude));return 0!==a?a:tt(On(o.longitude),On(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let d=0;d<a.length&&d<u.length;++d){const g=Ha(a[d],u[d]);if(g)return g}return tt(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ja.mapValue&&s===ja.mapValue)return 0;if(o===ja.mapValue)return 1;if(s===ja.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),d=s.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=tt(u[m],g[m]);if(0!==v)return v;const I=Ha(a[u[m]],d[g[m]]);if(0!==I)return I}return tt(u.length,g.length)}(n.mapValue,e.mapValue);default:throw Me()}}function iO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tt(n,e);const t=Us(n),r=Us(e),i=tt(t.seconds,r.seconds);return 0!==i?i:tt(t.nanos,r.nanos)}function cd(n){return Db(n)}function Db(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Us(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bs(n.bytesValue).toBase64():"referenceValue"in n?be.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Db(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Db(t.fields[s])}`;return i+"}"}(n.mapValue):Me()}function ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ab(n){return!!n&&"integerValue"in n}function ep(n){return!!n&&"arrayValue"in n}function oO(n){return!!n&&"nullValue"in n}function sO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $y(n){return!!n&&"mapValue"in n}function tp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bq(n){return"nullValue"in n?By:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ic(Ba.empty(),be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Me()}function jq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ic(Ba.empty(),be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ja:Me()}function uO(n,e){const t=Ha(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cO(n,e){const t=Ha(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$y(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tp(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=tp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());$y(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$y(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ua(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Mr(tp(this.value))}}function lO(n){const e=[];return Ua(n.fields,(t,r)=>{const i=new ln([t]);if($y(r)){const o=lO(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ri(e)}class dn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new dn(e,0,Fe.min(),Fe.min(),Fe.min(),Mr.empty(),0)}static newFoundDocument(e,t,r,i){return new dn(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new dn(e,2,t,Fe.min(),Fe.min(),Mr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Fe.min(),Fe.min(),Mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class za{constructor(e,t){this.position=e,this.inclusive=t}}function dO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?be.comparator(be.fromName(s.referenceValue),t.key):Ha(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function hO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xo(n.position[t],e.position[t]))return!1;return!0}class np{constructor(e,t="asc"){this.field=e,this.dir=t}}function $q(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fO{}class wt extends fO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Hq(e,t,r):"array-contains"===t?new Gq(e,r):"in"===t?new vO(e,r):"not-in"===t?new Wq(e,r):"array-contains-any"===t?new Zq(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new zq(e,r):new qq(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ha(t,this.value)):null!==t&&$a(this.value)===$a(t)&&this.matchesComparison(Ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jt extends fO{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new jt(e,t)}matches(e){return ld(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ld(n){return"and"===n.op}function Sb(n){return"or"===n.op}function Rb(n){return pO(n)&&ld(n)}function pO(n){for(const e of n.filters)if(e instanceof jt)return!1;return!0}function Pb(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+cd(n.value);if(Rb(n))return n.filters.map(e=>Pb(e)).join(",");{const e=n.filters.map(t=>Pb(t)).join(",");return`${n.op}(${e})`}}function gO(n,e){return n instanceof wt?(r=n,(i=e)instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Xo(r.value,i.value)):n instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&gO(s,i.filters[a]),!0)}(n,e):void Me();var r,i}function mO(n,e){const t=n.filters.concat(e);return jt.create(t,n.op)}function _O(n){return n instanceof wt?`${(t=n).field.canonicalString()} ${t.op} ${cd(t.value)}`:n instanceof jt?function(t){return t.op.toString()+" {"+t.getFilters().map(_O).join(" ,")+"}"}(n):"Filter";var t}class Hq extends wt{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class zq extends wt{constructor(e,t){super(e,"in",t),this.keys=yO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qq extends wt{constructor(e,t){super(e,"not-in",t),this.keys=yO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>be.fromName(r.referenceValue))}class Gq extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&Xf(t.arrayValue,this.value)}}class vO extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xf(this.value.arrayValue,t)}}class Wq extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xf(this.value.arrayValue,t)}}class Zq extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xf(this.value.arrayValue,r))}}class Kq{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Mb(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Kq(n,e,t,r,i,o,s)}function oc(n){const e=Ee(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cd(r)).join(",")),e.ue=t}return e.ue}function rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$q(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hO(n.startAt,e.startAt)&&hO(n.endAt,e.endAt)}function Hy(n){return be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zy(n,e){return n.filters.filter(t=>t instanceof wt&&t.field.isEqual(e))}function EO(n,e,t){let r=By,i=!0;for(const o of zy(n,e)){let s=By,a=!0;switch(o.op){case"<":case"<=":s=Bq(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=By}uO({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];uO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function IO(n,e,t){let r=ja,i=!0;for(const o of zy(n,e)){let s=ja,a=!0;switch(o.op){case">=":case">":s=jq(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ja}cO({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];cO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class js{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function wO(n,e,t,r,i,o,s,a){return new js(n,e,t,r,i,o,s,a)}function dd(n){return new js(n)}function bO(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Nb(n){return null!==n.collectionGroup}function hd(n){const e=Ee(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Kt(ln.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new np(o,r))}),t.has(ln.keyField().canonicalString())||e.ce.push(new np(ln.keyField(),r))}return e.ce}function Wr(n){const e=Ee(n);return e.le||(e.le=function TO(n,e){if("F"===n.limitType)return Mb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new np(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new za(n.startAt.position,n.startAt.inclusive):null;return Mb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,hd(n))),e.le}function xb(n,e){const t=n.filters.concat([e]);return new js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qy(n,e,t){return new js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ip(n,e){return rp(Wr(n),Wr(e))&&n.limitType===e.limitType}function DO(n){return`${oc(Wr(n))}|lt:${n.limitType}`}function fd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_O(i)).join(", ")}]`),Qf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cd(i)).join(",")),`Target(${r})`}(Wr(n))}; limitType=${n.limitType})`}function op(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):be.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of hd(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const d=dO(s,a,u);return s.inclusive?d<=0:d<0}(r.startAt,hd(r),i)||r.endAt&&!function(s,a,u){const d=dO(s,a,u);return s.inclusive?d>=0:d>0}(r.endAt,hd(r),i)));var r,i}function AO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SO(n){return(e,t)=>{let r=!1;for(const i of hd(n)){const o=Qq(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Qq(n,e,t){const r=n.field.isKeyField()?be.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),d=a.data.field(o);return null!==u&&null!==d?Ha(u,d):Me()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Me()}}class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return tO(this.inner)}size(){return this.innerSize}}const Yq=new sn(be.comparator);function Pi(){return Yq}const RO=new sn(be.comparator);function sp(...n){let e=RO;for(const t of n)e=e.insert(t.key,t);return e}function PO(n){let e=RO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function es(){return ap()}function MO(){return ap()}function ap(){return new $s(n=>n.toString(),(n,e)=>n.isEqual(e))}const Jq=new sn(be.comparator),Xq=new Kt(be.comparator);function st(...n){let e=Xq;for(const t of n)e=e.add(t);return e}const eG=new Kt(tt);function Ob(){return eG}function NO(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yf(e)?"-0":e}}function xO(n){return{integerValue:""+n}}function OO(n,e){return q1(e)?xO(e):NO(n,e)}class Gy{constructor(){this._=void 0}}function tG(n,e,t){return n instanceof pd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ly(o)&&(o=Uy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof sc?VO(n,e):n instanceof ac?FO(n,e):function(i,o){const s=kO(i,o),a=LO(s)+LO(i.Pe);return Ab(s)&&Ab(i.Pe)?xO(a):NO(i.serializer,a)}(n,e)}function nG(n,e,t){return n instanceof sc?VO(n,e):n instanceof ac?FO(n,e):t}function kO(n,e){return n instanceof gd?Ab(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class pd extends Gy{}class sc extends Gy{constructor(e){super(),this.elements=e}}function VO(n,e){const t=UO(e);for(const r of n.elements)t.some(i=>Xo(i,r))||t.push(r);return{arrayValue:{values:t}}}class ac extends Gy{constructor(e){super(),this.elements=e}}function FO(n,e){let t=UO(e);for(const r of n.elements)t=t.filter(i=>!Xo(i,r));return{arrayValue:{values:t}}}class gd extends Gy{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function LO(n){return On(n.integerValue||n.doubleValue)}function UO(n){return ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class up{constructor(e,t){this.field=e,this.transform=t}}class iG{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zy{}function BO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new _d(n.key,En.none()):new md(n.key,n.data,En.none());{const t=n.data,r=Mr.empty();let i=new Kt(ln.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Hs(n.key,r,new Ri(i.toArray()),En.none())}}function oG(n,e,t){n instanceof md?function(i,o,s){const a=i.value.clone(),u=HO(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hs?function(i,o,s){if(!Wy(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=HO(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll($O(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function cp(n,e,t,r){return n instanceof md?function(o,s,a,u){if(!Wy(o.precondition,s))return a;const d=o.value.clone(),g=zO(o.fieldTransforms,u,s);return d.setAll(g),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hs?function(o,s,a,u){if(!Wy(o.precondition,s))return a;const d=zO(o.fieldTransforms,u,s),g=s.data;return g.setAll($O(o)),g.setAll(d),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Wy(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function sG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=kO(r.transform,i||null);null!=o&&(null===t&&(t=Mr.empty()),t.set(r.field,o))}return t||null}function jO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&od(r,i,(o,s)=>function rG(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof sc&&i instanceof sc||r instanceof ac&&i instanceof ac?od(r.elements,i.elements,Xo):r instanceof gd&&i instanceof gd?Xo(r.Pe,i.Pe):r instanceof pd&&i instanceof pd);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class md extends Zy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends Zy{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $O(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HO(n,e,t){const r=new Map;Ve(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,nG(s,a,t[i]))}return r}function zO(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,tG(o,s,e))}return r}class _d extends Zy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kb extends Zy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&oG(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=MO();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=BO(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),st())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(t,r)=>jO(t,r))&&od(this.baseMutations,e.baseMutations,(t,r)=>jO(t,r))}}class Fb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ve(e.mutations.length===r.length);let i=Jq;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Fb(e,t,r,i)}}class Lb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aG{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kn,Dt;function GO(n){switch(n){default:return Me();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function WO(n){if(void 0===n)return Hn("GRPC error has no .code"),K.UNKNOWN;switch(n){case Kn.OK:return K.OK;case Kn.CANCELLED:return K.CANCELLED;case Kn.UNKNOWN:return K.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return K.INTERNAL;case Kn.UNAVAILABLE:return K.UNAVAILABLE;case Kn.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Kn.NOT_FOUND:return K.NOT_FOUND;case Kn.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Kn.ABORTED:return K.ABORTED;case Kn.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Kn.DATA_LOSS:return K.DATA_LOSS;default:return Me()}}(Dt=Kn||(Kn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function ZO(){return new TextEncoder}const uG=new ec([4294967295,4294967295],0);function KO(n){const e=ZO().encode(n),t=new A1;return t.update(e),new Uint8Array(t.digest())}function QO(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ec([t,r],0),new ec([i,o],0)]}class Ub{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lp(`Invalid padding: ${t}`);if(r<0)throw new lp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new lp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new lp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ec.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ec.fromNumber(r)));return 1===i.compare(uG)&&(i=new ec([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=KO(e),[r,i]=QO(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Ub(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=KO(e),[r,i]=QO(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class lp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,hp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dp(Fe.min(),i,new sn(tt),Pi(),st())}}class hp{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hp(r,t,st(),st(),st())}}class Qy{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class YO{constructor(e,t){this.targetId=e,this.me=t}}class JO{constructor(e,t,r=cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XO{constructor(){this.fe=0,this.ge=tk(),this.pe=cr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=st(),t=st(),r=st();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Me()}}),new hp(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=tk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cG{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pi(),this.qe=ek(),this.Qe=new sn(tt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(Hy(o))if(0===r){const s=new be(o.path);this.Ue(t,s,dn.newNoDocument(s,Fe.min()))}else Ve(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Bs(r).toUint8Array()}catch(u){if(u instanceof rO)return Si("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ub(s,i,o)}catch(u){return Si(u instanceof lp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&Hy(a.target)){const u=new be(a.target.path);null!==this.ke.get(u)||this.it(s,u)||this.Ue(s,u,dn.newNoDocument(u,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=st();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new dp(e,t,this.Qe,this.ke,r);return this.ke=Pi(),this.qe=ek(),this.Qe=new sn(tt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new XO,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Kt(tt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new XO),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ek(){return new sn(be.comparator)}function tk(){return new sn(be.comparator)}const lG={asc:"ASCENDING",desc:"DESCENDING"},dG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hG={and:"AND",or:"OR"};class fG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bb(n,e){return n.useProto3Json||Qf(e)?e:{value:e}}function yd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pG(n,e){return yd(n,e.toTimestamp())}function zn(n){return Ve(!!n),Fe.fromTimestamp(function(t){const r=Us(t);return new vn(r.seconds,r.nanos)}(n))}function jb(n,e){return $b(n,e).canonicalString()}function $b(n,e){const t=(i=n,new It(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function rk(n){const e=It.fromString(n);return Ve(pk(e)),e}function fp(n,e){return jb(n.databaseId,e.path)}function ts(n,e){const t=rk(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(sk(t))}function ik(n,e){return jb(n.databaseId,e)}function ok(n){const e=rk(n);return 4===e.length?It.emptyPath():sk(e)}function Hb(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sk(n){return Ve(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ak(n,e,t){return{name:fp(n,e),fields:t.value.mapValue.fields}}function uk(n,e,t){const r=ts(n,e.name),i=zn(e.updateTime),o=e.createTime?zn(e.createTime):Fe.min(),s=new Mr({mapValue:{fields:e.fields}}),a=dn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function pp(n,e){let t;if(e instanceof md)t={update:ak(n,e.key,e.value)};else if(e instanceof _d)t={delete:fp(n,e.key)};else if(e instanceof Hs)t={update:ak(n,e.key,e.data),updateMask:wG(e.fieldMask)};else{if(!(e instanceof kb))return Me();t={verify:fp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof pd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ac)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gd)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Me()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:pG(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Me()),t;var o}function zb(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?En.updateTime(zn(o.updateTime)):void 0!==o.exists?En.exists(o.exists):En.none():En.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(Ve("REQUEST_TIME"===a.setToServerValue),u=new pd):"appendMissingElements"in a?u=new sc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new ac(a.removeAllFromArray.values||[]):"increment"in a?u=new gd(s,a.increment):Me();const d=ln.fromServerFormat(a.fieldPath);return new up(d,u)}(n,i)):[];var o;if(e.update){const i=ts(n,e.update.name),o=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Ri((e.updateMask.fieldPaths||[]).map(g=>ln.fromServerFormat(g)));return new Hs(i,o,s,t,r)}return new md(i,o,t,r)}if(e.delete){const i=ts(n,e.delete);return new _d(i,t)}if(e.verify){const i=ts(n,e.verify);return new kb(i,t)}return Me()}function ck(n,e){return{documents:[ik(n,e.path)]}}function Yy(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ik(n,i);const o=function(d){if(0!==d.length)return fk(jt.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(d){if(0!==d.length)return d.map(g=>{return{field:qa((v=g).field),direction:vG(v.dir)};var v})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=Bb(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function dk(n){let e=ok(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ve(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(m){const v=hk(m);return v instanceof jt&&Rb(v)?v.getFilters():[v]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(v=>{return new np(vd((C=v).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,Qf(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new za((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new za(m.values||[],!m.before)}(t.endAt)),wO(e,i,s,o,a,"F",u,d)}function hk(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vd(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vd(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=vd(t.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=vd(t.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(n):void 0!==n.fieldFilter?wt.create(vd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return jt.create(t.compositeFilter.filters.map(r=>hk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me()}}(t.compositeFilter.op))}(n):Me();var t}function vG(n){return lG[n]}function EG(n){return dG[n]}function IG(n){return hG[n]}function qa(n){return{fieldPath:n.canonicalString()}}function vd(n){return ln.fromServerFormat(n.fieldPath)}function fk(n){return n instanceof wt?function(t){if("=="===t.op){if(sO(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NAN"}};if(oO(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sO(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NOT_NAN"}};if(oO(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(t.field),op:EG(t.op),value:t.value}}}(n):n instanceof jt?function(t){const r=t.getFilters().map(i=>fk(i));return 1===r.length?r[0]:{compositeFilter:{op:IG(t.op),filters:r}}}(n):Me()}function wG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pk(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zs{constructor(e,t,r,i,o=Fe.min(),s=Fe.min(),a=cr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gk{constructor(e){this.ct=e}}function mk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fp(o=n.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:yd(o,s.version.toTimestamp()),createTime:yd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:uc(e.version)};else{if(!e.isUnknownDocument())return Me();r.unknownDocument={path:t.path.toArray(),version:uc(e.version)}}var o,s;return r}function Jy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function uc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cc(n){const e=new vn(n.seconds,n.nanoseconds);return Fe.fromTimestamp(e)}function lc(n,e){const t=(e.baseMutations||[]).map(o=>zb(n.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>zb(n.ct,o)),i=vn.fromMillis(e.localWriteTimeMs);return new Vb(e.batchId,i,t,r)}function gp(n){const e=cc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cc(n.lastLimboFreeSnapshotVersion):Fe.min();let r;return r=void 0!==n.query.documents?(Ve(1===(o=n.query).documents.length),Wr(dd(ok(o.documents[0])))):function(o){return Wr(dk(o))}(n.query),new zs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,cr.fromBase64String(n.resumeToken));var o}function _k(n,e){const t=uc(e.snapshotVersion),r=uc(e.lastLimboFreeSnapshotVersion);let i;i=Hy(e.target)?ck(n.ct,e.target):Yy(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qb(n){const e=dk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qy(e,e.limit,"L"):e}function Gb(n,e){return new Lb(e.largestBatchId,zb(n.ct,e.overlayMutation))}function yk(n,e){const t=e.path.lastSegment();return[n,Gr(e.path.popLast()),t]}function vk(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:uc(r.readTime),documentKey:Gr(r.documentKey.path),largestBatchId:r.largestBatchId}}class CG{getBundleMetadata(e,t){return Ek(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:cc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Ek(e).put({bundleId:(i=t).id,createTime:uc(zn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Ik(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:qb(o.bundledQuery),readTime:cc(o.readTime)};var o})}saveNamedQuery(e,t){return Ik(e).put({name:(i=t).name,readTime:uc(zn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Ek(n){return Er(n,"bundles")}function Ik(n){return Er(n,"namedQueries")}class Xy{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Xy(e,t.uid||"")}getOverlay(e,t){return mp(e).get(yk(this.userId,t)).next(r=>r?Gb(this.serializer,r):null)}getOverlays(e,t){const r=es();return q.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new Lb(t,s);i.push(this.ht(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(Gr(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(mp(e).j("collectionPathOverlayIndex",a))}),q.waitFor(o)}getOverlaysForCollection(e,t,r){const i=es(),o=Gr(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return mp(e).U("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const d=Gb(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=es();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=Gb(this.serializer,d);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):g.done()}).next(()=>o)}ht(e,t){return mp(e).put(function(i,o,s){const[a,u,d]=yk(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pp(i.ct,s.mutation)}}(this.serializer,this.userId,t))}}function mp(n){return Er(n,"documentOverlays")}class dc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(On(e.integerValue));else if("doubleValue"in e){const r=On(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Yf(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Us(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Bs(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?aO(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Me()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),be.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function TG(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function wk(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=TG(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}dc.bt=new dc;class DG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=wk(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=wk(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class AG{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class SG{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class _p{constructor(){this.Gt=new DG,this.zt=new AG(this.Gt),this.jt=new SG(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class hc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ga(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bk(n.arrayValue,e.arrayValue),0!==t?t:(t=bk(n.directionalValue,e.directionalValue),0!==t?t:be.comparator(n.documentKey,e.documentKey)))}function bk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ck{constructor(e){this.Yt=new Kt((t,r)=>ln.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ve(e.collectionGroup===this.collectionId),this.en)return!1;const t=Ib(e);if(void 0!==t&&!this.nn(t))return!1;const r=tc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new Kt(ln.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new nc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nc(r.field,"asc"===r.dir?0:1)));return new sd(sd.UNKNOWN_ID,this.collectionId,t,ad.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Tk(n){var e,t;if(Ve(n instanceof wt||n instanceof jt),n instanceof wt){if(n instanceof vO){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>wt.create(n.field,"==",o)))||[];return jt.create(i,"or")}return n}const r=n.filters.map(i=>Tk(i));return jt.create(r,n.op)}function RG(n){if(0===n.getFilters().length)return[];const e=Kb(Tk(n));return Ve(Dk(e)),Wb(e)||Zb(e)?[e]:e.getFilters()}function Wb(n){return n instanceof wt}function Zb(n){return n instanceof jt&&Rb(n)}function Dk(n){return Wb(n)||Zb(n)||function(t){if(t instanceof jt&&Sb(t)){for(const r of t.getFilters())if(!Wb(r)&&!Zb(r))return!1;return!0}return!1}(n)}function Kb(n){if(Ve(n instanceof wt||n instanceof jt),n instanceof wt)return n;if(1===n.filters.length)return Kb(n.filters[0]);const e=n.filters.map(r=>Kb(r));let t=jt.create(e,n.op);return t=ev(t),Dk(t)?t:(Ve(t instanceof jt),Ve(ld(t)),Ve(t.filters.length>1),t.filters.reduce((r,i)=>Qb(r,i)))}function Qb(n,e){let t;return Ve(n instanceof wt||n instanceof jt),Ve(e instanceof wt||e instanceof jt),t=n instanceof wt?e instanceof wt?jt.create([n,e],"and"):Ak(n,e):e instanceof wt?Ak(e,n):function(i,o){if(Ve(i.filters.length>0&&o.filters.length>0),ld(i)&&ld(o))return mO(i,o.getFilters());const s=Sb(i)?i:o,a=Sb(i)?o:i,u=s.filters.map(d=>Qb(d,a));return jt.create(u,"or")}(n,e),ev(t)}function Ak(n,e){if(ld(e))return mO(e,n.getFilters());{const t=e.filters.map(r=>Qb(n,r));return jt.create(t,"or")}}function ev(n){if(Ve(n instanceof wt||n instanceof jt),n instanceof wt)return n;const e=n.getFilters();if(1===e.length)return ev(e[0]);if(pO(n))return n;const t=e.map(i=>ev(i)),r=[];return t.forEach(i=>{i instanceof wt?r.push(i):i instanceof jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:jt.create(r,n.op)}class PG{constructor(){this._n=new Yb}addToCollectionParentIndex(e,t){return this._n.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Hi.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class Yb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kt(It.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(It.comparator)).toArray()}}const tv=new Uint8Array(0);class MG{constructor(e,t){this.databaseId=t,this.an=new Yb,this.un=new $s(r=>oc(r),(r,i)=>rp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const o={collectionId:r,parent:Gr(i)};return Sk(e).put(o)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[L1(t),""],!1,!0);return Sk(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(Jo(s.parent))}return r})}addFieldIndex(e,t){const r=yp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=Id(e);return o.next(a=>{s.put(vk(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=yp(e),i=Id(e),o=Ed(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=yp(e),r=Ed(e),i=Id(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new Ck(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Ed(e);let i=!0;const o=new Map;return q.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=st();const a=[];return q.forEach(o,(u,d)=>{var Q;fe("IndexedDbIndexManager",`Using index ${Q=u,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(de=>`${de.fieldPath}:${de.kind}`).join(",")}`} to execute ${oc(t)}`);const g=function(Q,de){const ye=Ib(de);if(void 0===ye)return null;for(const Be of zy(Q,ye.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(d,u),m=function(Q,de){const ye=new Map;for(const Be of tc(de))for(const V of zy(Q,Be.fieldPath))switch(V.op){case"==":case"in":ye.set(Be.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ye.set(Be.fieldPath.canonicalString(),V.value),Array.from(ye.values())}return null}(d,u),v=function(Q,de){const ye=[];let Be=!0;for(const V of tc(de)){const A=0===V.kind?EO(Q,V.fieldPath,Q.startAt):IO(Q,V.fieldPath,Q.startAt);ye.push(A.value),Be&&(Be=A.inclusive)}return new za(ye,Be)}(d,u),I=function(Q,de){const ye=[];let Be=!0;for(const V of tc(de)){const A=0===V.kind?IO(Q,V.fieldPath,Q.endAt):EO(Q,V.fieldPath,Q.endAt);ye.push(A.value),Be&&(Be=A.inclusive)}return new za(ye,Be)}(d,u),C=this.hn(u,d,v),P=this.hn(u,d,I),N=this.Pn(u,d,m),G=this.In(u.indexId,g,C,v.inclusive,P,I.inclusive,N);return q.forEach(G,F=>r.G(F,t.limit).next(Q=>{Q.forEach(de=>{const ye=be.fromSegments(de.documentKey);s.has(ye)||(s=s.add(ye),a.push(ye))})}))}).next(()=>a)}return q.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:RG(jt.create(e.filters,"and")).map(r=>Mb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){const u=(null!=t?t.length:1)*Math.max(r.length,o.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.Tn(t[m/d]):tv,I=this.En(e,v,r[m%d],i),C=this.dn(e,v,o[m%d],s),P=a.map(N=>this.En(e,v,N,!0));g.push(...this.createRange(I,C,P))}return g}En(e,t,r,i){const o=new hc(e,be.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){const o=new hc(e,be.empty(),t,r);return i?o.Jt():o}ln(e,t){const r=new Ck(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.cn(t);return q.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new Kt(ln.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new _p;for(const i of tc(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);dc.bt.Pt(o,s)}return r.Wt()}Tn(e){const t=new _p;return dc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new _p;return dc.bt.Pt(ic(this.databaseId,t),r.Ht(function(o){const s=tc(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new _p);let o=0;for(const s of tc(e)){const a=r[o++];for(const u of i)if(this.Vn(t,s.fieldPath)&&ep(a))i=this.mn(i,s,a);else{const d=u.Ht(s.kind);dc.bt.Pt(a,d)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new _p;u.seed(a.Wt()),dc.bt.Pt(s,u.Ht(t.kind)),o.push(u)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=yp(e),i=Id(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const s=[];return q.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(g,m){const v=m?new ad(m.sequenceNumber,new Hi(cc(m.readTime),new be(Jo(m.documentKey)),m.largestBatchId)):ad.empty(),I=g.fields.map(([C,P])=>new nc(ln.fromServerFormat(C),P));return new sd(g.indexId,g.collectionGroup,I,v)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:tt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=yp(e),o=Id(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>q.forEach(a,u=>o.put(vk(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,u=>this.pn(e,i,u).next(d=>{const g=this.yn(o,u);return d.isEqual(g)?q.resolve():this.wn(e,o,u,d,g)}))))})}Sn(e,t,r,i){return Ed(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Ed(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Ed(e);let o=new Kt(Ga);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new hc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new Kt(Ga);const i=this.An(t,e);if(null==i)return r;const o=Ib(t);if(null!=o){const s=e.data.field(o.fieldPath);if(ep(s))for(const a of s.arrayValue.values||[])r=r.add(new hc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new hc(t.indexId,e.key,tv,i));return r}wn(e,t,r,i,o){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(u,d,g,m,v){const I=u.getIterator(),C=d.getIterator();let P=ud(I),N=ud(C);for(;P||N;){let G=!1,F=!1;if(P&&N){const Q=g(P,N);Q<0?F=!0:Q>0&&(G=!0)}else null!=P?F=!0:G=!0;G?(m(N),N=ud(C)):F?(v(P),P=ud(I)):(P=ud(I),N=ud(C))}}(i,o,Ga,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),q.waitFor(s)}gn(e){let t=1;return Id(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ga(s,a)).filter((s,a,u)=>!a||0!==Ga(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=Ga(s,e),u=Ga(s,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,tv,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,tv,[]]))}return o}Dn(e,t){return Ga(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Rk)}getMinOffset(e,t){return q.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Me())).next(Rk)}}function Sk(n){return Er(n,"collectionParents")}function Ed(n){return Er(n,"indexEntries")}function yp(n){return Er(n,"indexConfiguration")}function Id(n){return Er(n,"indexState")}function Rk(n){Ve(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;wb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hi(e.readTime,e.documentKey,t)}const Pk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zr(e,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mk(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:s},(g,m,v)=>(a++,v.delete()));o.push(u.next(()=>{Ve(1===a)}));const d=[];for(const g of t.mutations){const m=Z1(e,g.key.path,t.batchId);o.push(i.delete(m)),d.push(g.key)}return q.waitFor(o).next(()=>d)}function nv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Me();e=n.noDocument}return JSON.stringify(e).length}Zr.DEFAULT_COLLECTION_PERCENTILE=10,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zr.DEFAULT=new Zr(41943040,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zr.DISABLED=new Zr(-1,0,0);class rv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Ve(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new rv(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=wd(e),s=Wa(e);return s.add({}).next(a=>{Ve("number"==typeof a);const u=new Vb(a,t,r,i),d=function(I,C,P){const N=P.baseMutations.map(F=>pp(I.ct,F)),G=P.mutations.map(F=>pp(I.ct,F));return{userId:C,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:N,mutations:G}}(this.serializer,this.userId,u),g=[];let m=new Kt((v,I)=>tt(v.canonicalString(),I.canonicalString()));for(const v of i){const I=Z1(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(s.put(d)),g.push(o.put(I,Eq))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),q.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return Wa(e).get(t).next(r=>r?(Ve(r.userId===this.userId),lc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?q.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Wa(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Ve(a.batchId>=r),o=lc(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wa(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).U("userMutationsIndex",t).next(r=>r.map(i=>lc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return wd(e).J({range:i},(s,a,u)=>{const[d,g,m]=s,v=Jo(g);if(d===this.userId&&t.path.isEqual(v))return Wa(e).get(m).next(I=>{if(!I)throw Me();Ve(I.userId===this.userId),o.push(lc(this.serializer,I))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(tt);const i=[];return t.forEach(o=>{const s=Vy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=wd(e).J({range:a},(d,g,m)=>{const[v,I,C]=d,P=Jo(I);v===this.userId&&o.path.isEqual(P)?r=r.add(C):m.done()});i.push(u)}),q.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Vy(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Kt(tt);return wd(e).J({range:s},(u,d,g)=>{const[m,v,I]=u,C=Jo(v);m===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(I)):g.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Wa(e).get(o).next(s=>{if(null===s)throw Me();Ve(s.userId===this.userId),r.push(lc(this.serializer,s))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Mk(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wd(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=Jo(o[1]);i.push(u)}else a.done()}).next(()=>{Ve(0===i.length)})})}containsKey(e,t){return Nk(e,this.userId,t)}xn(e){return xk(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Nk(n,e,t){const r=Vy(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return wd(n).J({range:o,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(s=!0),d.done()}).next(()=>s)}function Wa(n){return Er(n,"mutations")}function wd(n){return Er(n,"documentMutations")}function xk(n){return Er(n,"mutationQueues")}class fc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new fc(0)}static Ln(){return new fc(-1)}}class NG{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new fc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Fe.fromTimestamp(new vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Ve(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return bd(e).J((s,a)=>{const u=gp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>q.waitFor(o)).next(()=>i)}forEachTarget(e,t){return bd(e).J((r,i)=>{const o=gp(i);t(o)})}Bn(e){return Ok(e).get("targetGlobalKey").next(t=>(Ve(null!==t),t))}kn(e,t){return Ok(e).put("targetGlobalKey",t)}qn(e,t){return bd(e).put(_k(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=oc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return bd(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const d=gp(a);rp(t,d.target)&&(o=d,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Za(e);return t.forEach(s=>{const a=Gr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Za(e);return q.forEach(t,o=>{const s=Gr(o.path);return q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Za(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Za(e);let o=st();return i.J({range:r,H:!0},(s,a,u)=>{const d=Jo(s[1]),g=new be(d);o=o.add(g)}).next(()=>o)}containsKey(e,t){const r=Gr(t.path),i=IDBKeyRange.bound([r],[L1(r)],!1,!0);let o=0;return Za(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,d)=>{0!==s&&(o++,d.done())}).next(()=>o>0)}ot(e,t){return bd(e).get(t).next(r=>r?gp(r):null)}}function bd(n){return Er(n,"targets")}function Ok(n){return Er(n,"targetGlobal")}function Za(n){return Er(n,"targetDocuments")}function kk([n,e],[t,r]){const i=tt(n,t);return 0===i?tt(e,r):i}class xG{constructor(e){this.Kn=e,this.buffer=new Kt(kk),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,oe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){La(r)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Fa(r)}yield t.zn(3e5)}))}}class OG{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(zi.oe);const r=new xG(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Pk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pk):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),id()<=Qo.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-g}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}class kG{constructor(e,t){this.db=e,this.garbageCollector=function Fk(n,e){return new OG(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return iv(e,r)}removeReference(e,t,r){return iv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iv(e,t)}er(e,t){return function(i,o){let s=!1;return xk(i).Y(a=>Nk(i,a,o).next(u=>(u&&(s=!0),q.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=t){const u=this.er(e,s).next(d=>{if(!d)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Fe.min()),Za(e).delete([0,Gr(s.path)])))});i.push(u)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iv(e,t)}Xn(e,t){const r=Za(e);let i,o=zi.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:d})=>{0===s?(o!==zi.oe&&t(new be(Jo(i)),o),o=d,i=u):o=zi.oe}).next(()=>{o!==zi.oe&&t(new be(Jo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iv(n,e){return Za(n).put((i=n.currentSequenceNumber,{targetId:0,path:Gr(e.path),sequenceNumber:i}));var i}class Lk{constructor(){this.changes=new $s(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pc(e).put(r)}removeEntry(e,t,r){return pc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Jy(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return pc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vp(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return pc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vp(t))},(i,o)=>{r={document:this.nr(t,o),size:nv(o)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.ir(e,t,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=Pi(),i=new sn(be.comparator);return this.ir(e,t,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,nv(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return q.resolve();let i=new Kt($k);t.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(vp(i.first()),vp(i.last())),s=i.getIterator();let a=s.getNext();return pc(e).J({index:"documentKeyIndex",range:o},(u,d,g)=>{const m=be.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&$k(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,d),a=s.hasNext()?s.getNext():null),a?g.$(vp(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pc(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{o?.incrementDocumentReadCount(d.length);let g=Pi();for(const m of d){const v=this.nr(be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(op(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let o=Pi();const s=jk(t,r),a=jk(t,Hi.max());return pc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,d,g)=>{const m=this.nr(be.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(m.key,m),o.size===i&&g.done()}).next(()=>o)}newChangeBuffer(e){return new FG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bk(e).get("remoteDocumentGlobalKey").next(t=>(Ve(!!t),t))}tr(e,t){return Bk(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function bG(n,e){let t;if(e.document)t=uk(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=be.fromSegments(e.noDocument.path),i=cc(e.noDocument.readTime);t=dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Me();{const r=be.fromSegments(e.unknownDocument.path),i=cc(e.unknownDocument.version);t=dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new vn(i[0],i[1]);return Fe.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Fe.min()))return r}return dn.newInvalidDocument(e)}}function Uk(n){return new VG(n)}class FG extends Lk{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new $s(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kt((o,s)=>tt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=mk(this.ar.serializer,s);i=i.add(o.path.popLast());const d=nv(u);r+=d-a.size,t.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=mk(this.ar.serializer,s.convertToNoDocument(Fe.min()));t.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function Bk(n){return Er(n,"remoteDocumentGlobal")}function pc(n){return Er(n,"remoteDocumentsV14")}function vp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jk(n,e){const t=e.documentKey.path.toArray();return[n,Jy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $k(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=tt(t[o],r[o]),i)return i;return i=tt(t.length,r.length),i||(i=tt(t[t.length-2],r[r.length-2]),i||tt(t[t.length-1],r[r.length-1]))}class LG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Hk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&cp(r.mutation,i,Ri.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,t,r=st()){const i=es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=sp();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,st()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Pi();const s=ap(),a=ap();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof Hs)?o=o.insert(d.key,d):void 0!==g?(s.set(d.key,g.mutation.getFieldMask()),cp(g.mutation,d,g.mutation.getFieldMask(),vn.now())):s.set(d.key,Ri.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,g)=>s.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new LG(g,null!==(m=s.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=ap();let i=new sn((s,a)=>s-a),o=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||Ri.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||st()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=MO();g.forEach(v=>{if(!o.has(v)){const I=BO(t.get(v),r.get(v));null!==I&&m.set(v,I),o=o.add(v)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,m))}return q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return be.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Nb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):q.resolve(es());let a=-1,u=o;return s.next(d=>q.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(g)?q.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,st())).next(g=>({batchId:a,changes:PO(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next(r=>{let i=sp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=sp();return this.indexManager.getCollectionParents(e,o).next(a=>q.forEach(a,u=>{const d=(m=t,v=u.child(o),new js(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{s=s.insert(m,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,d)=>{const g=d.getKey();null===s.get(g)&&(s=s.insert(g,dn.newInvalidDocument(g)))});let a=sp();return s.forEach((u,d)=>{const g=o.get(u);void 0!==g&&cp(g.mutation,d,Ri.empty(),vn.now()),op(t,d)&&(a=a.insert(u,d))}),a})}}class UG{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return q.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:zn(i.createTime)}),q.resolve();var i}getNamedQuery(e,t){return q.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:qb(i.bundledQuery),readTime:zn(i.readTime)}),q.resolve();var i}}class BG{constructor(){this.overlays=new sn(be.comparator),this.hr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=es();return q.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=es(),o=t.length+1,s=new be(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new sn((d,g)=>d-g);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=o.get(d.largestBatchId);null===g&&(g=es(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=es(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Lb(t,r));let o=this.hr.get(t);void 0===o&&(o=st(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}class Jb{constructor(){this.Pr=new Kt(Ir.Ir),this.Tr=new Kt(Ir.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Ir(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ir(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new be(new It([])),r=new Ir(t,e),i=new Ir(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new be(new It([])),r=new Ir(t,e),i=new Ir(t,e+1);let o=st();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Ir(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ir{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return be.comparator(e.key,t.key)||tt(e.pr,t.pr)}static Er(e,t){return tt(e.pr,t.pr)||be.comparator(e.key,t.key)}}class jG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Kt(Ir.Ir)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.yr;this.yr++;const s=new Vb(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Ir(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(s)}lookupMutationBatch(e,t){return q.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),o=i<0?0:i;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ir(t,0),i=new Ir(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(tt);return t.forEach(i=>{const o=new Ir(i,0),s=new Ir(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),q.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;be.isDocumentKey(o)||(o=o.child(""));const s=new Ir(new be(o),0);let a=new Kt(tt);return this.wr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.pr)),!0)},s),q.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ve(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return q.forEach(t.mutations,i=>{const o=new Ir(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Ir(t,0),i=this.wr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $G{constructor(e){this.vr=e,this.docs=new sn(be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Pi();const s=t.path,a=new be(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||wb(B1(g),r)<=0||(i.has(g.key)||op(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Me()}Fr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new HG(this)}getSize(e){return q.resolve(this.size)}}class HG extends Lk{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class zG{constructor(e){this.persistence=e,this.Mr=new $s(t=>oc(t),rp),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Jb,this.targetCount=0,this.Lr=fc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),q.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.qn(t),q.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(o).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Nr.containsKey(t))}}class Xb{constructor(e,t){this.Br={},this.overlays={},this.kr=new zi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zG(this),this.indexManager=new PG,this.remoteDocumentCache=new $G(r=>this.referenceDelegate.Kr(r)),this.serializer=new gk(t),this.$r=new UG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new jG(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const i=new qG(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return q.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class qG extends $1{constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.zr=new Jb,this.jr=null}static Hr(e){return new ov(e)}get Jr(){if(this.jr)return this.jr;throw Me()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),q.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Jr,r=>{const i=be.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,Fe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return q.or([()=>q.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class GG{constructor(e){this.serializer=e}O(e,t,r,i){const o=new ky("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",W1,{unique:!0}),u.createObjectStore("documentMutations"),zk(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=q.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),zk(e)),s=s.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",W1,{unique:!0});const m=d.store("mutations"),v=g.map(I=>m.put(I));return q.waitFor(v)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:Nq});d.createIndex("collectionPathOverlayIndex",xq,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",Oq,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:Iq});d.createIndex("documentKeyIndex",wq),d.createIndex("collectionGroupIndex",bq)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Sq}).createIndex("sequenceNumberIndex",Rq,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Pq}).createIndex("documentKeyIndex",Mq,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=nv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>q.forEach(a,u=>{Ve(u.userId===o.userId);const d=lc(this.serializer,u);return Mk(e,o.userId,d).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const u=new It(s),d=[0,Gr(u)];o.push(t.get(d).next(g=>g?q.resolve():t.put({targetId:0,path:Gr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>q.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Aq});const r=t.store("collectionParents"),i=new Yb,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Gr(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{const u=new It(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],d)=>{const g=Jo(a);return o(g.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const o=gp(i),s=_k(this.serializer,o);return t.put(s)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=t.store("remoteDocumentsV14"),u=(m=s,m.document?new be(It.fromString(m.document.name).popFirst(5)):m.noDocument?be.fromSegments(m.noDocument.path):m.unknownDocument?be.fromSegments(m.unknownDocument.path):Me()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>q.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Uk(this.serializer),o=new Xb(ov.Hr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:st();lc(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),q.forEach(a,(u,d)=>{const g=new vr(d),m=Xy.lt(this.serializer,g),v=o.getIndexManager(g),I=rv.lt(g,this.serializer,v,o.referenceDelegate);return new Hk(i,I,m,v).recalculateAndSaveOverlaysForDocumentKeys(new Tb(t,zi.oe),u).next()})})}}function zk(n){n.createObjectStore("targetDocuments",{keyPath:Tq}).createIndex("documentTargetsIndex",Dq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cq,{unique:!0}),n.createObjectStore("targetGlobal")}const eC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tC{constructor(e,t,r,i,o,s,a,u,d,g,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=d,this.ai=g,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=v=>Promise.resolve(),!tC.D())throw new ce(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kG(this,i),this.Ti=t+"main",this.serializer=new gk(u),this.Ei=new Yo(this.Ti,this.ui,new GG(this.serializer)),this.Qr=new NG(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uk(this.serializer),this.$r=new CG,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===g&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(K.FAILED_PRECONDITION,eC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new zi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,oe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,oe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,oe.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>av(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(La(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ep(e).get("owner").next(t=>q.resolve(this.Si(t)))}bi(e){return av(e).delete(this.clientId)}Di(){var e=this;return(0,oe.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Er(r,"clientMetadata");return i.U().next(o=>{const s=e.vi(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return q.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?q.resolve(!0):Ep(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ce(K.FAILED_PRECONDITION,eC);return!1}}return!(!this.networkEnabled||!this.inForeground)||av(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,oe.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Tb(t,zi.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>av(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return rv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MG(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Xy.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=16===(u=this.ui)?Vq:15===u?J1:14===u?Y1:13===u?Q1:12===u?kq:11===u?K1:void Me();var u;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new Tb(a,this.kr?this.kr.next():zi.oe),"readwrite-primary"===t?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ce(K.FAILED_PRECONDITION,j1);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Ep(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(K.FAILED_PRECONDITION,eC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ep(e).put("owner",t)}static D(){return Yo.D()}yi(e){const t=Ep(e);return t.get("owner").next(r=>this.Si(r)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ft.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ep(n){return Er(n,"owner")}function av(n){return Er(n,"clientMetadata")}function nC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class rC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=st(),i=st();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new rC(e,t.fromCache,r,i)}}class WG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class qk{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Ft.G6)()?8:H1((0,Ft.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new WG;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(id()<=Qo.in.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",fd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),q.resolve()):(id()<=Qo.in.DEBUG&&fe("QueryEngine","Query:",fd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(id()<=Qo.in.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",fd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):q.resolve())}ji(e,t){if(bO(t))return q.resolve(null);let r=Wr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=qy(t,null,"F"),r=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=st(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Zi(t,a);return this.Xi(t,d,s,u.readTime)?this.ji(e,qy(t,null,"F")):this.es(e,d,t,u)}))})))}Hi(e,t,r,i){return bO(t)||i.isEqual(Fe.min())?q.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(t,o);return this.Xi(t,s,r,i)?q.resolve(null):(id()<=Qo.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fd(t)),this.es(e,s,t,U1(i,-1)).next(a=>a))})}Zi(e,t){let r=new Kt(SO(e));return t.forEach((i,o)=>{op(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return id()<=Qo.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",fd(t)),this.zi.getDocumentsMatchingQuery(e,t,Hi.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class ZG{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new sn(tt),this.rs=new $s(o=>oc(o),rp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hk(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Gk(n,e,t,r){return new ZG(n,e,t,r)}function Wk(n,e){return iC.apply(this,arguments)}function iC(){return(iC=(0,oe.Z)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=st();for(const d of i){s.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of o){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function Zk(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Kk(n,e,t){let r=st(),i=st();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Pi();return t.forEach((a,u)=>{const d=o.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Fe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):fe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{cs:s,ls:i}})}function YG(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cd(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,q.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new zs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Td(n,e,t){return oC.apply(this,arguments)}function oC(){return(oC=(0,oe.Z)(function*(n,e,t){const r=Ee(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!La(s))throw s;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function uv(n,e,t){const r=Ee(n);let i=Fe.min(),o=st();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,g){const m=Ee(u),v=m.rs.get(g);return void 0!==v?q.resolve(m.ns.get(v)):m.Qr.getTargetData(d,g)}(r,s,Wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:Fe.min(),t?o:st())).next(a=>(Jk(r,AO(e),a),{documents:a,hs:o})))}function Qk(n,e){const t=Ee(n),r=Ee(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Yk(n,e){const t=Ee(n),r=t.ss.get(e)||Fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,U1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Jk(t,e,i),i))}function Jk(n,e,t){let r=n.ss.get(e)||Fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function sC(){return(sC=(0,oe.Z)(function*(n,e,t,r){const i=Ee(n);let o=st(),s=Pi();for(const d of t){const g=e.Ps(d.metadata.name);d.document&&(o=o.add(g));const m=e.Is(d);m.setReadTime(e.Ts(d.metadata.readTime)),s=s.insert(g,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Cd(i,(g=r,Wr(dd(It.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>Kk(d,a,s).next(g=>(a.apply(d),g)).next(g=>i.Qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Qr.addMatchingKeys(d,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.cs,g.ls)).next(()=>g.cs)))})).apply(this,arguments)}function XG(n,e){return aC.apply(this,arguments)}function aC(){return(aC=(0,oe.Z)(function*(n,e,t=st()){const r=yield Cd(n,Wr(qb(e.bundledQuery))),i=Ee(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=zn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(cr.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,t,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})})).apply(this,arguments)}function Xk(n,e){return`firestore_clients_${n}_${e}`}function eV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function uC(n,e){return`firestore_targets_${n}_${e}`}class cv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ce(i.error.code,i.error.message))),s?new cv(e,t,i.state,o):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ip{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ce(r.error.code,r.error.message))),o?new Ip(e,r.state,i):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ob();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=q1(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new lv(e,o):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cC{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cC(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lC{constructor(){this.activeTargetIds=Ob()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dC{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new sn(tt),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=Xk(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new lC),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,oe.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const o=e.getItem(Xk(e.persistenceKey,i));if(o){const s=lv.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(uC(this.persistenceKey,e));if(r){const i=Ip.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uC(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,oe.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(s){let a=zi.oe;if(null!=s)try{const u=JSON.parse(s);Ve("number"==typeof u),a=u}catch(u){Hn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==zi.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Ys(o)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new cv(this.currentUser,e,t,r),o=eV(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const t=eV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=uC(this.persistenceKey,e),o=new Ip(e,t,r);this.setItem(i,o.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return lv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return cv.Es(new vr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Ip.Es(i,t)}xs(e){return cC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Ob();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tV{constructor(){this.no=new lC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new lC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eW{io(e){}shutdown(){}}class nV{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dv=null;function hC(){return null===dv?dv=268435456+Math.round(2147483648*Math.random()):dv++,"0x"+dv.toString(16)}const tW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nW{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Kr="WebChannelConnection";class rW extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){const a=hC(),u=this.vo(t,r.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,o,s),this.Mo(t,u,d,i).then(g=>(fe("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw Si("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+rd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){return`${this.wo}/v1/${r}:${tW[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const o=hC();return new Promise((s,a)=>{const u=new S1;u.setWithCredentials(!0),u.listenOnce(P1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Oy.NO_ERROR:const g=u.getResponseJson();fe(Kr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),s(g);break;case Oy.TIMEOUT:fe(Kr,`RPC '${e}' ${o} timed out`),a(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case Oy.HTTP_ERROR:const m=u.getStatus();if(fe(Kr,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v?.error;if(I&&I.status&&I.message){const C=function(N){const G=N.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(G)>=0?G:K.UNKNOWN}(I.status);a(new ce(C,I.message))}else a(new ce(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ce(K.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{fe(Kr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);fe(Kr,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}Oo(e,t,r){const i=hC(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=x1(),a=N1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new R1({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=o.join("");fe(Kr,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=s.createWebChannel(g,u);let v=!1,I=!1;const C=new nW({lo:N=>{I?fe(Kr,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(v||(fe(Kr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),fe(Kr,`RPC '${e}' stream ${i} sending:`,N),m.send(N))},ho:()=>m.close()}),P=(N,G,F)=>{N.listen(G,Q=>{try{F(Q)}catch(de){setTimeout(()=>{throw de},0)}})};return P(m,Wf.EventType.OPEN,()=>{I||(fe(Kr,`RPC '${e}' stream ${i} transport opened.`),C.mo())}),P(m,Wf.EventType.CLOSE,()=>{I||(I=!0,fe(Kr,`RPC '${e}' stream ${i} transport closed`),C.po())}),P(m,Wf.EventType.ERROR,N=>{I||(I=!0,Si(Kr,`RPC '${e}' stream ${i} transport errored:`,N),C.po(new ce(K.UNAVAILABLE,"The operation could not be completed")))}),P(m,Wf.EventType.MESSAGE,N=>{var G;if(!I){const F=N.data[0];Ve(!!F);const de=F.error||(null===(G=F[0])||void 0===G?void 0:G.error);if(de){fe(Kr,`RPC '${e}' stream ${i} received error:`,de);const ye=de.status;let Be=function(O){const U=Kn[O];if(void 0!==U)return WO(U)}(ye),V=de.message;void 0===Be&&(Be=K.INTERNAL,V="Unknown error status: "+ye+" with message "+de.message),I=!0,C.po(new ce(Be,V)),m.close()}else fe(Kr,`RPC '${e}' stream ${i} received:`,F),C.yo(F)}}),P(a,M1.STAT_EVENT,N=>{N.stat===vb.PROXY?fe(Kr,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===vb.NOPROXY&&fe(Kr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function rV(){return typeof window<"u"?window:null}function hv(){return typeof document<"u"?document:null}function wp(n){return new fG(n,!0)}class fC{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class iV{constructor(e,t,r,i,o,s,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new fC(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,oe.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,oe.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,oe.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===K.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new ce(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,oe.Z)(function*(){e.state=0,e.start()}))}c_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iW extends iV{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function mG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:Me(),i=e.targetChange.targetIds||[],o=function(d,g){return d.useProto3Json?(Ve(void 0===g||"string"==typeof g),cr.fromBase64String(g||"")):(Ve(void 0===g||g instanceof Buffer||g instanceof Uint8Array),cr.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){const g=void 0===d.code?K.UNKNOWN:WO(d.code);return new ce(g,d.message||"")}(s);t=new JO(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ts(n,r.document.name),o=zn(r.document.updateTime),s=r.document.createTime?zn(r.document.createTime):Fe.min(),a=new Mr({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,o,s,a);t=new Qy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ts(n,r.document),o=r.readTime?zn(r.readTime):Fe.min(),s=dn.newNoDocument(i,o);t=new Qy([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=ts(n,r.document);t=new Qy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Me();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new aG(i,o);t=new YO(r.targetId,s)}}var d;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Fe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Fe.min():s.readTime?zn(s.readTime):Fe.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=Hb(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=Hy(u)?{documents:ck(o,u)}:{query:Yy(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nk(o,s.resumeToken);const d=Bb(o,s.expectedCount);null!==d&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Fe.min())>0){a.readTime=yd(o,s.snapshotVersion.toTimestamp());const d=Bb(o,s.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function yG(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=Hb(this.serializer),t.removeTarget=e,this.i_(t)}}class oW extends iV{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function _G(n,e){return n&&n.length>0?(Ve(void 0!==e),n.map(t=>function(i,o){let s=zn(i.updateTime?i.updateTime:o);return s.isEqual(Fe.min())&&(s=zn(o)),new iG(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.A_(r,t)}return Ve(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Hb(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pp(this.serializer,r))};this.i_(t)}}class sW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,$b(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(K.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,$b(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(K.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class aW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Hn(t),this.y_=!1):fe("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class uW{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{r.enqueueAndForget((0,oe.Z)(function*(){var u;Ka(s)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,oe.Z)(function*(g){const m=Ee(g);m.M_.add(4),yield Dd(m),m.N_.set("Unknown"),m.M_.delete(4),yield bp(m)}),function d(g){return u.apply(this,arguments)})(s))}))}),this.N_=new aW(r,i)}}function bp(n){return pC.apply(this,arguments)}function pC(){return(pC=(0,oe.Z)(function*(n){if(Ka(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Dd(n){return gC.apply(this,arguments)}function gC(){return(gC=(0,oe.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function fv(n,e){const t=Ee(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),yC(t)?_C(t):Rd(t).Xo()&&mC(t,e))}function Ad(n,e){const t=Ee(n),r=Rd(t);t.F_.delete(e),r.Xo()&&oV(t,e),0===t.F_.size&&(r.Xo()?r.n_():Ka(t)&&t.N_.set("Unknown"))}function mC(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rd(n).P_(e)}function oV(n,e){n.L_.xe(e),Rd(n).I_(e)}function _C(n){n.L_=new cG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Rd(n).start(),n.N_.w_()}function yC(n){return Ka(n)&&!Rd(n).Zo()&&n.F_.size>0}function Ka(n){return 0===Ee(n).M_.size}function sV(n){n.L_=void 0}function cW(n){return vC.apply(this,arguments)}function vC(){return(vC=(0,oe.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function lW(n){return EC.apply(this,arguments)}function EC(){return(EC=(0,oe.Z)(function*(n){n.F_.forEach((e,t)=>{mC(n,e)})})).apply(this,arguments)}function dW(n,e){return IC.apply(this,arguments)}function IC(){return(IC=(0,oe.Z)(function*(n,e){sV(n),yC(n)?(n.N_.D_(e),_C(n)):n.N_.set("Unknown")})).apply(this,arguments)}function hW(n,e,t){return wC.apply(this,arguments)}function wC(){return wC=(0,oe.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof JO&&2===e.state&&e.cause)try{yield(r=(0,oe.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.F_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.F_.delete(u),o.L_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pv(n,r)}else if(e instanceof Qy?n.L_.Ke(e):e instanceof YO?n.L_.He(e):n.L_.We(e),!t.isEqual(Fe.min()))try{const r=yield Zk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.L_.rt(s);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=o.F_.get(d);g&&o.F_.set(d,g.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,d)=>{const g=o.F_.get(u);if(!g)return;o.F_.set(u,g.withResumeToken(cr.EMPTY_BYTE_STRING,g.snapshotVersion)),oV(o,u);const m=new zs(g.target,u,d,g.sequenceNumber);mC(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){fe("RemoteStore","Failed to raise snapshot:",r),yield pv(n,r)}var r}),wC.apply(this,arguments)}function pv(n,e,t){return bC.apply(this,arguments)}function bC(){return(bC=(0,oe.Z)(function*(n,e,t){if(!La(e))throw e;n.M_.add(1),yield Dd(n),n.N_.set("Offline"),t||(t=()=>Zk(n.localStore)),n.asyncQueue.enqueueRetryable((0,oe.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield bp(n)}))})).apply(this,arguments)}function aV(n,e){return e().catch(t=>pv(n,t,e))}function Sd(n){return CC.apply(this,arguments)}function CC(){return(CC=(0,oe.Z)(function*(n){const e=Ee(n),t=Qa(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;fW(e);)try{const i=yield YG(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,pW(e,i)}catch(i){yield pv(e,i)}uV(e)&&cV(e)})).apply(this,arguments)}function fW(n){return Ka(n)&&n.v_.length<10}function pW(n,e){n.v_.push(e);const t=Qa(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function uV(n){return Ka(n)&&!Qa(n).Zo()&&n.v_.length>0}function cV(n){Qa(n).start()}function gW(n){return TC.apply(this,arguments)}function TC(){return(TC=(0,oe.Z)(function*(n){Qa(n).V_()})).apply(this,arguments)}function mW(n){return DC.apply(this,arguments)}function DC(){return(DC=(0,oe.Z)(function*(n){const e=Qa(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function _W(n,e,t){return AC.apply(this,arguments)}function AC(){return(AC=(0,oe.Z)(function*(n,e,t){const r=n.v_.shift(),i=Fb.from(r,e,t);yield aV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sd(n)})).apply(this,arguments)}function yW(n,e){return SC.apply(this,arguments)}function SC(){return SC=(0,oe.Z)(function*(n,e){var t;e&&Qa(n).E_&&(yield(t=(0,oe.Z)(function*(i,o){if(GO(a=o.code)&&a!==K.ABORTED){const s=i.v_.shift();Qa(i).t_(),yield aV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Sd(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),uV(n)&&cV(n)}),SC.apply(this,arguments)}function lV(n,e){return RC.apply(this,arguments)}function RC(){return(RC=(0,oe.Z)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const r=Ka(t);t.M_.add(3),yield Dd(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield bp(t)})).apply(this,arguments)}function PC(n,e){return MC.apply(this,arguments)}function MC(){return(MC=(0,oe.Z)(function*(n,e){const t=Ee(n);e?(t.M_.delete(2),yield bp(t)):e||(t.M_.add(2),yield Dd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Rd(n){return n.B_||(n.B_=function(t,r,i){const o=Ee(t);return o.f_(),new iW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:cW.bind(null,n),To:lW.bind(null,n),Ao:dW.bind(null,n),h_:hW.bind(null,n)}),n.x_.push(function(){var e=(0,oe.Z)(function*(t){t?(n.B_.t_(),yC(n)?_C(n):n.N_.set("Unknown")):(yield n.B_.stop(),sV(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Qa(n){return n.k_||(n.k_=function(t,r,i){const o=Ee(t);return o.f_(),new oW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:gW.bind(null,n),Ao:yW.bind(null,n),R_:mW.bind(null,n),A_:_W.bind(null,n)}),n.x_.push(function(){var e=(0,oe.Z)(function*(t){t?(n.k_.t_(),yield Sd(n)):(yield n.k_.stop(),n.v_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class NC{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new NC(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pd(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),La(n))return new ce(K.UNAVAILABLE,`${e}: ${n}`);throw n}class Md{constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=sp(),this.sortedSet=new sn(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Md;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dV{constructor(){this.q_=new sn(be.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Me():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Nd{constructor(e,t,r,i,o,s,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new Nd(e,t,Md.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class vW{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class EW{constructor(){this.queries=new $s(e=>DO(e),ip),this.onlineState="Unknown",this.z_=new Set}}function xC(n,e){return OC.apply(this,arguments)}function OC(){return(OC=(0,oe.Z)(function*(n,e){const t=Ee(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new vW,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=Pd(s,`Initialization of query '${fd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&FC(t)})).apply(this,arguments)}function kC(n,e){return VC.apply(this,arguments)}function VC(){return(VC=(0,oe.Z)(function*(n,e){const t=Ee(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),0===o.U_.length?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function IW(n,e){const t=Ee(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&FC(t)}function wW(n,e,t){const r=Ee(n),i=r.queries.get(e);if(i)for(const o of i.U_)o.onError(t);r.queries.delete(e)}function FC(n){n.z_.forEach(e=>{e.next()})}var LC,hV;(hV=LC||(LC={})).J_="default",hV.Cache="cache";class UC{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Nd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==LC.Cache}}class bW{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class fV{constructor(e){this.serializer=e}Ps(e){return ts(this.serializer,e)}Is(e){return e.metadata.exists?uk(this.serializer,e.document,!1):dn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return zn(e)}}class CW{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pV(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=It.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new fV(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||st()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,oe.Z)(function*(){const t=yield function JG(n,e,t,r){return sC.apply(this,arguments)}(e.localStore,new fV(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield XG(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function pV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gV{constructor(e){this.key=e}}class mV{constructor(e){this.key=e}}class _V{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=st(),this.mutatedKeys=st(),this.Ia=SO(e),this.Ta=new Md(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new dV,i=t?t.Ta:this.Ta;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),I=op(this.query,m)?m:null,C=!!v&&this.mutatedKeys.has(v.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let N=!1;v&&I?v.data.isEqual(I.data)?C!==P&&(r.track({type:3,doc:I}),N=!0):this.Ra(v,I)||(r.track({type:2,doc:I}),N=!0,(u&&this.Ia(I,u)>0||d&&this.Ia(I,d)<0)&&(a=!0)):!v&&I?(r.track({type:0,doc:I}),N=!0):v&&!I&&(r.track({type:1,doc:v}),N=!0,(u||d)&&(a=!0)),N&&(I?(s=s.add(I),o=P?o.add(g):o.delete(g)):(s=s.delete(g),o=o.delete(g)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const g="F"===this.query.limitType?s.last():s.first();s=s.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort((g,m)=>function(I,C){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return P(I)-P(C)}(g.type,m.type)||this.Ia(g.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,d=u!==this.ha;return this.ha=u,0!==s.length||d?{snapshot:new Nd(this.query,e.Ta,o,s,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new dV,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=st(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new mV(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new gV(r))}),t}pa(e){this.la=e.hs,this.Pa=st();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Nd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class TW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DW{constructor(e){this.key=e,this.wa=!1}}class AW{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new $s(a=>DO(a),ip),this.Da=new Map,this.Ca=new Set,this.va=new sn(be.comparator),this.Fa=new Map,this.Ma=new Jb,this.xa={},this.Oa=new Map,this.Na=fc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function SW(n,e){return BC.apply(this,arguments)}function BC(){return(BC=(0,oe.Z)(function*(n,e,t=!0){const r=gv(n);let i;const o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield yV(r,e,t,!0),i})).apply(this,arguments)}function RW(n,e){return jC.apply(this,arguments)}function jC(){return(jC=(0,oe.Z)(function*(n,e){const t=gv(n);yield yV(t,e,!0,!1)})).apply(this,arguments)}function yV(n,e,t,r){return $C.apply(this,arguments)}function $C(){return($C=(0,oe.Z)(function*(n,e,t,r){const i=yield Cd(n.localStore,Wr(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield HC(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&fv(n.remoteStore,i),a})).apply(this,arguments)}function HC(n,e,t,r,i){return zC.apply(this,arguments)}function zC(){return zC=(0,oe.Z)(function*(n,e,t,r,i){n.Ba=(m,v,I)=>{return(C=(0,oe.Z)(function*(N,G,F,Q){let de=G.view.da(F);de.Xi&&(de=yield uv(N.localStore,G.query,!1).then(({documents:A})=>G.view.da(A,de)));const ye=Q&&Q.targetChanges.get(G.targetId),Be=Q&&null!=Q.targetMismatches.get(G.targetId),V=G.view.applyChanges(de,N.isPrimaryClient,ye,Be);return tT(N,G.targetId,V.fa),V.snapshot}),function P(N,G,F,Q){return C.apply(this,arguments)})(n,m,v,I);var C};const o=yield uv(n.localStore,e,!0),s=new _V(e,o.hs),a=s.da(o.documents),u=hp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=s.applyChanges(a,n.isPrimaryClient,u);tT(n,t,d.fa);const g=new TW(e,t,s);return n.ba.set(e,g),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),d.snapshot}),zC.apply(this,arguments)}function PW(n,e,t){return qC.apply(this,arguments)}function qC(){return(qC=(0,oe.Z)(function*(n,e,t){const r=Ee(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!ip(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Td(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ad(r.remoteStore,i.targetId),xd(r,i.targetId)}).catch(Fa))):(xd(r,i.targetId),yield Td(r.localStore,i.targetId,!0))})).apply(this,arguments)}function MW(n,e){return GC.apply(this,arguments)}function GC(){return(GC=(0,oe.Z)(function*(n,e){const t=Ee(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ad(t.remoteStore,r.targetId))})).apply(this,arguments)}function WC(){return(WC=(0,oe.Z)(function*(n,e,t){const r=hT(n);try{const i=yield function(s,a){const u=Ee(s),d=vn.now(),g=a.reduce((I,C)=>I.add(C.key),st());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let C=Pi(),P=st();return u.os.getEntries(I,g).next(N=>{C=N,C.forEach((G,F)=>{F.isValidDocument()||(P=P.add(G))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,C)).next(N=>{m=N;const G=[];for(const F of a){const Q=sG(F,m.get(F.key).overlayedDocument);null!=Q&&G.push(new Hs(F.key,Q,lO(Q.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,G,a)}).next(N=>{v=N;const G=N.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(I,N.batchId,G)})}).then(()=>({batchId:v.batchId,changes:PO(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let d=s.xa[s.currentUser.toKey()];d||(d=new sn(tt)),d=d.insert(a,u),s.xa[s.currentUser.toKey()]=d}(r,i.batchId,t),yield qs(r,i.changes),yield Sd(r.remoteStore)}catch(i){const o=Pd(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function vV(n,e){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,oe.Z)(function*(n,e){const t=Ee(n);try{const r=yield function QG(n,e){const t=Ee(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Qr.removeMatchingKeys(o,g.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(o,g.addedDocuments,m)));let I=v.withSequenceNumber(o.currentSequenceNumber);var P,N,G;null!==e.targetMismatches.get(m)?I=I.withResumeToken(cr.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,r)),i=i.insert(m,I),N=I,G=g,(0===(P=v).resumeToken.approximateByteSize()||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(o,I))});let u=Pi(),d=st();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),a.push(Kk(o,s,e.documentUpdates).next(g=>{u=g.cs,d=g.ls})),!r.isEqual(Fe.min())){const g=t.Qr.getLastRemoteSnapshotVersion(o).next(m=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(g)}return q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.ns=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Fa.get(o);s&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?Ve(s.wa):i.removedDocuments.size>0&&(Ve(s.wa),s.wa=!1))}),yield qs(t,r,e)}catch(r){yield Fa(r)}})).apply(this,arguments)}function EV(n,e,t){const r=Ee(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((o,s)=>{const a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Ee(s);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.U_)v.j_(a)&&(d=!0)}),d&&FC(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xW(n,e,t){return KC.apply(this,arguments)}function KC(){return(KC=(0,oe.Z)(function*(n,e,t){const r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),o=i&&i.key;if(o){let s=new sn(be.comparator);s=s.insert(o,dn.newNoDocument(o,Fe.min()));const a=st().add(o),u=new dp(Fe.min(),new Map,new sn(tt),s,a);yield vV(r,u),r.va=r.va.remove(o),r.Fa.delete(e),nT(r)}else yield Td(r.localStore,e,!1).then(()=>xd(r,e,t)).catch(Fa)})).apply(this,arguments)}function OW(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,oe.Z)(function*(n,e){const t=Ee(n),r=e.batch.batchId;try{const i=yield function KG(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let I=q.resolve();return v.forEach(C=>{I=I.next(()=>g.getEntry(u,C)).next(P=>{const N=d.docVersions.get(C);Ve(null!==N),P.version.compareTo(N)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),g.addEntry(P)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=st();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);eT(t,r,null),XC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qs(t,i)}catch(i){yield Fa(i)}})).apply(this,arguments)}function kW(n,e,t){return YC.apply(this,arguments)}function YC(){return(YC=(0,oe.Z)(function*(n,e,t){const r=Ee(n);try{const i=yield function(s,a){const u=Ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Ve(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);eT(r,e,t),XC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qs(r,i)}catch(i){yield Fa(i)}})).apply(this,arguments)}function JC(){return(JC=(0,oe.Z)(function*(n,e){const t=Ee(n);Ka(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Ee(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Pd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function XC(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function eT(n,e,t){const r=Ee(n);let i=r.xa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function xd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||IV(n,r)})}function IV(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Ad(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),nT(n))}function tT(n,e,t){for(const r of t)r instanceof gV?(n.Ma.addReference(r.key,e),FW(n,r)):r instanceof mV?(fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||IV(n,r.key)):Me()}function FW(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(fe("SyncEngine","New document in limbo: "+t),n.Ca.add(r),nT(n))}function nT(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new be(It.fromString(e)),r=n.Na.next();n.Fa.set(r,new DW(t)),n.va=n.va.insert(t,r),fv(n.remoteStore,new zs(Wr(dd(t.path)),r,"TargetPurposeLimboResolution",zi.oe))}}function qs(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,oe.Z)(function*(n,e,t){const r=Ee(n),i=[],o=[],s=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{s.push(r.Ba(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=rC.Ki(u.targetId,d);o.push(m)}}))}),yield Promise.all(s),r.Sa.h_(i),yield(a=(0,oe.Z)(function*(d,g){const m=Ee(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>q.forEach(g,I=>q.forEach(I.qi,C=>m.persistence.referenceDelegate.addReference(v,I.targetId,C)).next(()=>q.forEach(I.Qi,C=>m.persistence.referenceDelegate.removeReference(v,I.targetId,C)))))}catch(v){if(!La(v))throw v;fe("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const I=v.targetId;if(!v.fromCache){const C=m.ns.get(I),N=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);m.ns=m.ns.insert(I,N)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,o))}),rT.apply(this,arguments)}function LW(n,e){return iT.apply(this,arguments)}function iT(){return(iT=(0,oe.Z)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const r=yield Wk(t.localStore,e);t.currentUser=e,(o=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new ce(K.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qs(t,r.us)}var o})).apply(this,arguments)}function UW(n,e){const t=Ee(n),r=t.Fa.get(e);if(r&&r.wa)return st().add(r.key);{let i=st();const o=t.Da.get(e);if(!o)return i;for(const s of o){const a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function BW(n,e){return oT.apply(this,arguments)}function oT(){return(oT=(0,oe.Z)(function*(n,e){const t=Ee(n),r=yield uv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&tT(t,e.targetId,i.fa),i})).apply(this,arguments)}function jW(n,e){return sT.apply(this,arguments)}function sT(){return(sT=(0,oe.Z)(function*(n,e){const t=Ee(n);return Yk(t.localStore,e).then(r=>qs(t,r))})).apply(this,arguments)}function $W(n,e,t,r){return aT.apply(this,arguments)}function aT(){return(aT=(0,oe.Z)(function*(n,e,t,r){const i=Ee(n),o=yield function(a,u){const d=Ee(a),g=Ee(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.vn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):q.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===t?yield Sd(i.remoteStore):"acknowledged"===t||"rejected"===t?(eT(i,e,r||null),XC(i,e),u=e,Ee(Ee(i.localStore).mutationQueue).Mn(u)):Me(),yield qs(i,o)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function uT(){return(uT=(0,oe.Z)(function*(n,e){const t=Ee(n);if(gv(t),hT(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield wV(t,r.toArray());t.La=!0,yield PC(t.remoteStore,!0);for(const o of i)fv(t.remoteStore,o)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(xd(t,s),Td(t.localStore,s,!0))),Ad(t.remoteStore,s)}),yield i,yield wV(t,r),function(s){const a=Ee(s);a.Fa.forEach((u,d)=>{Ad(a.remoteStore,d)}),a.Ma.mr(),a.Fa=new Map,a.va=new sn(be.comparator)}(t),t.La=!1,yield PC(t.remoteStore,!1)}})).apply(this,arguments)}function wV(n,e,t){return cT.apply(this,arguments)}function cT(){return(cT=(0,oe.Z)(function*(n,e,t){const r=Ee(n),i=[],o=[];for(const s of e){let a;const u=r.Da.get(s);if(u&&0!==u.length){a=yield Cd(r.localStore,Wr(u[0]));for(const d of u){const g=r.ba.get(d),m=yield BW(r,g);m.snapshot&&o.push(m.snapshot)}}else{const d=yield Qk(r.localStore,s);a=yield Cd(r.localStore,d),yield HC(r,bV(d),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})).apply(this,arguments)}function bV(n){return wO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zW(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Bi();var t}function qW(n,e,t,r){return lT.apply(this,arguments)}function lT(){return(lT=(0,oe.Z)(function*(n,e,t,r){const i=Ee(n);if(i.La)return void fe("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield Yk(i.localStore,AO(o[0])),a=dp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,cr.EMPTY_BYTE_STRING);yield qs(i,s,a);break}case"rejected":yield Td(i.localStore,e,!0),xd(i,e,r);break;default:Me()}})).apply(this,arguments)}function GW(n,e,t){return dT.apply(this,arguments)}function dT(){return(dT=(0,oe.Z)(function*(n,e,t){const r=gv(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){fe("SyncEngine","Adding an already active target "+i);continue}const o=yield Qk(r.localStore,i),s=yield Cd(r.localStore,o);yield HC(r,bV(o),s.targetId,!1,s.resumeToken),fv(r.remoteStore,s)}for(const i of t)r.Da.has(i)&&(yield Td(r.localStore,i,!1).then(()=>{Ad(r.remoteStore,i),xd(r,i)}).catch(Fa))}})).apply(this,arguments)}function gv(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xW.bind(null,e),e.Sa.h_=IW.bind(null,e.eventManager),e.Sa.ka=wW.bind(null,e.eventManager),e}function hT(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kW.bind(null,e),e}class Cp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,oe.Z)(function*(){t.serializer=wp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Gk(this.persistence,new qk,e.initialUser,this.serializer)}createPersistence(e){return new Xb(ov.Hr,this.serializer)}createSharedClientState(e){return new tV}terminate(){var e=this;return(0,oe.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fT extends Cp{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,oe.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield hT(r.Qa.syncEngine),yield Sd(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Gk(this.persistence,new qk,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Vk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new yq(t,this.persistence);return new _q(e.asyncQueue,r)}createPersistence(e){const t=nC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new tC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rV(),hv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tV}}class CV extends fT{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,oe.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof dC&&(r.sharedClientState.syncEngine={Zs:$W.bind(null,i),Xs:qW.bind(null,i),eo:GW.bind(null,i),Bi:zW.bind(null,i),Ys:jW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,oe.Z)(function*(s){yield function HW(n,e){return uT.apply(this,arguments)}(r.Qa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=rV();if(!dC.D(t))throw new ce(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Od{initialize(e,t){var r=this;return(0,oe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>EV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=LW.bind(null,r.syncEngine),yield PC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new EW}createDatastore(e){const t=wp(e.databaseInfo.databaseId),r=new rW(e.databaseInfo);return new sW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>EV(this.syncEngine,t,0),a=nV.D()?new nV:new eW,new uW(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,u,d,g){const m=new AW(i,o,s,a,u,d);return g&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,oe.Z)(function*(){var t,r;yield(r=(0,oe.Z)(function*(o){const s=Ee(o);fe("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield Dd(s),s.O_.shutdown(),s.N_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function TV(n,e=10240){let t=0;return{read:()=>(0,oe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,oe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class KW{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new ur,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,oe.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,oe.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,oe.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const o=yield e.Ha(i);return new bW(JSON.parse(o),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,oe.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ce(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,oe.Z)(function*(s,a){const u=Ee(s),d={documents:a.map(I=>fp(u.serializer,I))},g=yield u.xo("BatchGetDocuments",u.serializer.databaseId,It.emptyPath(),d,a.length),m=new Map;g.forEach(I=>{const C=function gG(n,e){return"found"in e?function(r,i){Ve(!!i.found);const o=ts(r,i.found.name),s=zn(i.found.updateTime),a=i.found.createTime?zn(i.found.createTime):Fe.min(),u=new Mr({mapValue:{fields:i.found.fields}});return dn.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Ve(!!i.missing),Ve(!!i.readTime);const o=ts(r,i.missing),s=zn(i.readTime);return dn.newNoDocument(o,s)}(n,e):Me()}(u.serializer,I);m.set(C.key.toString(),C)});const v=[];return a.forEach(I=>{const C=m.get(I.toString());Ve(!!C),v.push(C)}),v}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _d(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=be.fromPath(i);e.mutations.push(new kb(o,e.precondition(o)))}),yield(r=(0,oe.Z)(function*(o,s){const a=Ee(o),u={writes:s.map(d=>pp(a.serializer,d))};yield a.Co("Commit",a.serializer.databaseId,It.emptyPath(),u)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Me();t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ce(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?En.exists(!1):En.updateTime(t):En.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new ce(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(t)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class YW{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new fC(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,oe.Z)(function*(){const t=new QW(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.nu(o)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Qf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!GO(t)}return!1}}class JW{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vr.UNAUTHENTICATED,this.clientId=F1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,oe.Z)(function*(a){fe("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(fe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Pd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function _v(n,e){return pT.apply(this,arguments)}function pT(){return pT=(0,oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,oe.Z)(function*(o){r.isEqual(o)||(yield Wk(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),pT.apply(this,arguments)}function gT(n,e){return mT.apply(this,arguments)}function mT(){return(mT=(0,oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield _T(n);fe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function DV(n){return"FirebaseError"===n.name?n.code===K.FAILED_PRECONDITION||n.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function _T(n){return yT.apply(this,arguments)}function yT(){return(yT=(0,oe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _v(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!DV(t))throw t;Si("Error using user provided cache. Falling back to memory cache: "+t),yield _v(n,new Cp)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield _v(n,new Cp);return n._offlineComponents})).apply(this,arguments)}function yv(n){return vT.apply(this,arguments)}function vT(){return(vT=(0,oe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield gT(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield gT(n,new Od))),n._onlineComponents})).apply(this,arguments)}function AV(n){return _T(n).then(e=>e.persistence)}function kd(n){return _T(n).then(e=>e.localStore)}function SV(n){return yv(n).then(e=>e.remoteStore)}function ET(n){return yv(n).then(e=>e.syncEngine)}function Vd(n){return IT.apply(this,arguments)}function IT(){return(IT=(0,oe.Z)(function*(n){const e=yield yv(n),t=e.eventManager;return t.onListen=SW.bind(null,e.syncEngine),t.onUnlisten=PW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MW.bind(null,e.syncEngine),t})).apply(this,arguments)}function PV(n,e,t={}){const r=new ur;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(o,s,a,u,d){const g=new mv({next:v=>{s.enqueueAndForget(()=>kC(o,m));const I=v.docs.has(a);!I&&v.fromCache?d.reject(new ce(K.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&u&&"server"===u.source?d.reject(new ce(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new UC(dd(a.path),g,{includeMetadataChanges:!0,ra:!0});return xC(o,m)}(yield Vd(n),n.asyncQueue,e,t,r)})),r.promise}function MV(n,e,t={}){const r=new ur;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(o,s,a,u,d){const g=new mv({next:v=>{s.enqueueAndForget(()=>kC(o,m)),v.fromCache&&"server"===u.source?d.reject(new ce(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new UC(a,g,{includeMetadataChanges:!0,ra:!0});return xC(o,m)}(yield Vd(n),n.asyncQueue,e,t,r)})),r.promise}function NV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const xV=new Map;function wT(n,e,t){if(!t)throw new ce(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OV(n,e,t,r){if(!0===e&&!0===r)throw new ce(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kV(n){if(!be.isDocumentKey(n))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VV(n){if(be.isDocumentKey(n))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Me()}function _t(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vv(n);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function FV(n,e){if(e<=0)throw new ce(K.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class LV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=NV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LV(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new oq;switch(r.type){case"firstParty":return new cq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=xV.get(t);r&&(fe("ComponentProvider","Removing Datastore"),xV.delete(t),r.terminate())}(this),Promise.resolve()}}class Nr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class ns extends Nr{constructor(e,t,r){super(e,t,dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new be(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function BV(n,e,...t){if(n=(0,Ft.m9)(n),wT("collection","path",e),n instanceof Tp){const r=It.fromString(e,...t);return VV(r),new ns(n,null,r)}{if(!(n instanceof hn||n instanceof ns))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(It.fromString(e,...t));return VV(r),new ns(n.firestore,null,r)}}function Ev(n,e,...t){if(n=(0,Ft.m9)(n),1===arguments.length&&(e=F1.newId()),wT("doc","path",e),n instanceof Tp){const r=It.fromString(e,...t);return kV(r),new hn(n,null,new be(r))}{if(!(n instanceof hn||n instanceof ns))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(It.fromString(e,...t));return kV(r),new hn(n.firestore,n instanceof ns?n.converter:null,new be(r))}}function jV(n,e){return n=(0,Ft.m9)(n),e=(0,Ft.m9)(e),(n instanceof hn||n instanceof ns)&&(e instanceof hn||e instanceof ns)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bT(n,e){return n=(0,Ft.m9)(n),e=(0,Ft.m9)(e),n instanceof Nr&&e instanceof Nr&&n.firestore===e.firestore&&ip(n._query,e._query)&&n.converter===e.converter}class d7{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new fC(this,"async_queue_retry"),this.hu=()=>{const t=hv();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=hv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=hv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new ur;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,oe.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!La(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,Hn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=NC.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&Me()}verifyOperationInProgress(){}du(){var e=this;return(0,oe.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function CT(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class h7{constructor(){this._progressObserver={},this._taskCompletionResolver=new ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qt extends Tp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d7,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$V(this),this._firestoreClient.terminate()}}function In(n){return n._firestoreClient||$V(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $V(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Uq(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,NV(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._firestoreClient=new JW(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function HV(n,e,t){const r=new ur;return n.asyncQueue.enqueue((0,oe.Z)(function*(){try{yield _v(n,t),yield gT(n,e),r.resolve()}catch(i){const o=i;if(!DV(o))throw o;Si("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function zV(n){if(n._initialized||n._terminated)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(cr.fromBase64String(e))}catch(t){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rs(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gs{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gc{constructor(e){this._methodName=e}}class Iv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}const b7=/^__.*__$/;class C7{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new md(e,this.data,t,this.fieldTransforms)}}class qV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class wv{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Tv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(GV(this.fu)&&b7.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class T7{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wp(e)}Fu(e,t,r,i=!1){return new wv({fu:e,methodName:t,vu:r,path:ln.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mc(n){const e=n._freezeSettings(),t=wp(n._databaseId);return new T7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bv(n,e,t,r,i,o={}){const s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);MT("Data must be an object, but it was:",s,r);const a=KV(r,s);let u,d;if(o.merge)u=new Ri(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const g=[];for(const m of o.mergeFields){const v=Sp(e,m,t);if(!s.contains(v))throw new ce(K.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);YV(g,v)||g.push(v)}u=new Ri(g),d=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=s.fieldTransforms;return new C7(new Mr(a),u,d)}class Ap extends gc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ap}}function WV(n,e,t){return new wv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class TT extends gc{_toFieldTransform(e){return new up(e.path,new pd)}isEqual(e){return e instanceof TT}}class DT extends gc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=WV(this,e,!0),r=this.Mu.map(o=>_c(o,t)),i=new sc(r);return new up(e.path,i)}isEqual(e){return e instanceof DT&&(0,Ft.vZ)(this.Mu,e.Mu)}}class AT extends gc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=WV(this,e,!0),r=this.Mu.map(o=>_c(o,t)),i=new ac(r);return new up(e.path,i)}isEqual(e){return e instanceof AT&&(0,Ft.vZ)(this.Mu,e.Mu)}}class ST extends gc{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new gd(e.serializer,OO(e.serializer,this.xu));return new up(e.path,t)}isEqual(e){return e instanceof ST&&this.xu===e.xu}}function RT(n,e,t,r){const i=n.Fu(1,e,t);MT("Data must be an object, but it was:",i,r);const o=[],s=Mr.empty();Ua(r,(u,d)=>{const g=Cv(e,u,t);d=(0,Ft.m9)(d);const m=i.Su(g);if(d instanceof Ap)o.push(g);else{const v=_c(d,m);null!=v&&(o.push(g),s.set(g,v))}});const a=new Ri(o);return new qV(s,a,i.fieldTransforms)}function PT(n,e,t,r,i,o){const s=n.Fu(1,e,t),a=[Sp(e,r,t)],u=[i];if(o.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)a.push(Sp(e,o[v])),u.push(o[v+1]);const d=[],g=Mr.empty();for(let v=a.length-1;v>=0;--v)if(!YV(d,a[v])){const I=a[v];let C=u[v];C=(0,Ft.m9)(C);const P=s.Su(I);if(C instanceof Ap)d.push(I);else{const N=_c(C,P);null!=N&&(d.push(I),g.set(I,N))}}const m=new Ri(d);return new qV(g,m,s.fieldTransforms)}function ZV(n,e,t,r=!1){return _c(t,n.Fu(r?4:3,e))}function _c(n,e){if(QV(n=(0,Ft.m9)(n)))return MT("Unsupported field value:",e,n),KV(n,e);if(n instanceof gc)return function(r,i){if(!GV(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=_c(a,i.bu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,Ft.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return OO(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=vn.fromDate(r);return{timestampValue:yd(i.serializer,o)}}if(r instanceof vn){const o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yd(i.serializer,o)}}if(r instanceof Iv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:nk(i.serializer,r._byteString)};if(r instanceof hn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jb(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${vv(r)}`)}(n,e)}function KV(n,e){const t={};return tO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,(r,i)=>{const o=_c(i,e.pu(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function QV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof Iv||n instanceof rs||n instanceof hn||n instanceof gc)}function MT(n,e,t){if(!QV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=vv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Sp(n,e,t){if((e=(0,Ft.m9)(e))instanceof Gs)return e._internalPath;if("string"==typeof e)return Cv(n,e);throw Tv("Field path arguments must be of type string or ",n,!1,void 0,t)}const D7=new RegExp("[~\\*/\\[\\]]");function Cv(n,e,t){if(e.search(D7)>=0)throw Tv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gs(...e.split("."))._internalPath}catch{throw Tv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tv(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new ce(K.INVALID_ARGUMENT,a+n+u)}function YV(n,e){return n.some(t=>t.isEqual(e))}class Rp{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A7 extends Rp{data(){return super.data()}}function Dv(n,e){return"string"==typeof e?Cv(n,e):e instanceof Gs?e._internalPath:e._delegate._internalPath}function JV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NT{}class Pp extends NT{}function Ya(n,e,...t){let r=[];e instanceof NT&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof Fd).length,a=o.filter(u=>u instanceof Mp).length;if(s>1||s>0&&a>0)throw new ce(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mp extends Pp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mp(e,t,r)}_apply(e){const t=this._parse(e);return nF(e._query,t),new Nr(e.firestore,e.converter,xb(e._query,t))}_parse(e){const t=mc(e.firestore);return function(o,s,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ce(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){tF(m,g);const I=[];for(const C of m)I.push(eF(u,o,C));v={arrayValue:{values:I}}}else v=eF(u,o,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||tF(m,g),v=ZV(a,"where",m,"in"===g||"not-in"===g);return wt.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Fd extends NT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)nF(s,u),s=xb(s,u)}(e._query,t),new Nr(e.firestore,e.converter,xb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xT extends Pp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xT(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new ce(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ce(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new np(o,s)}(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new js(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Av extends Pp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Av(e,t,r)}_apply(e){return new Nr(e.firestore,e.converter,qy(e._query,this._limit,this._limitType))}}class Sv extends Pp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Sv(e,t,r)}_apply(e){const t=XV(e,this.type,this._docOrFields,this._inclusive);return new Nr(e.firestore,e.converter,(o=t,new js((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class Rv extends Pp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Rv(e,t,r)}_apply(e){const t=XV(e,this.type,this._docOrFields,this._inclusive);return new Nr(e.firestore,e.converter,(o=t,new js((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function XV(n,e,t,r){if(t[0]=(0,Ft.m9)(t[0]),t[0]instanceof Rp)return function(o,s,a,u,d){if(!u)throw new ce(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of hd(o))if(m.field.isKeyField())g.push(ic(s,u.key));else{const v=u.data.field(m.field);if(Ly(v))throw new ce(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const I=m.field.canonicalString();throw new ce(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}g.push(v)}return new za(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mc(n.firestore);return function(s,a,u,d,g,m){const v=s.explicitOrderBy;if(g.length>v.length)throw new ce(K.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let C=0;C<g.length;C++){const P=g[C];if(v[C].field.isKeyField()){if("string"!=typeof P)throw new ce(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof P}`);if(!Nb(s)&&-1!==P.indexOf("/"))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${P}' contains a slash.`);const N=s.path.child(It.fromString(P));if(!be.isDocumentKey(N))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const G=new be(N);I.push(ic(a,G))}else{const N=ZV(u,d,P);I.push(N)}}return new za(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eF(n,e,t){if("string"==typeof(t=(0,Ft.m9)(t))){if(""===t)throw new ce(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nb(e)&&-1!==t.indexOf("/"))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(It.fromString(t));if(!be.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ic(n,new be(r))}if(t instanceof hn)return ic(n,t._key);throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vv(t)}.`)}function tF(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nF(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(K.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OT{convertValue(e,t="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ua(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Iv(On(e.latitude),On(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jf(e));default:return null}}convertTimestamp(e){const t=Us(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=It.fromString(e);Ve(pk(r));const i=new Ba(r.get(1),r.get(3)),o=new be(r.popFirst(5));return i.isEqual(t)||Hn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Pv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class V7 extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}class yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends Rp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Np(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Np extends Ws{data(e={}){return super.data(e)}}class Ja{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Np(this._firestore,this._userDataWriter,r.key,r,new yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Np(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Np(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),g=s.indexOf(a.doc.key)),{type:L7(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}function iF(n,e){return n instanceof Ws&&e instanceof Ws?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ja&&e instanceof Ja&&n._firestore===e._firestore&&bT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Xa extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}function oF(n,e,t){n=_t(n,hn);const r=_t(n.firestore,Qt),i=Pv(n.converter,e,t);return Ld(r,[bv(mc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,En.none())])}function sF(n,e,t,...r){n=_t(n,hn);const i=_t(n.firestore,Qt),o=mc(i);let s;return s="string"==typeof(e=(0,Ft.m9)(e))||e instanceof Gs?PT(o,"updateDoc",n._key,e,t,r):RT(o,"updateDoc",n._key,e),Ld(i,[s.toMutation(n._key,En.exists(!0))])}function aF(n,...e){var t,r,i;n=(0,Ft.m9)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||CT(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(CT(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof hn)d=_t(n.firestore,Qt),g=dd(n._key.path),u={next:m=>{e[s]&&e[s](kT(d,n,m))},error:e[s+1],complete:e[s+2]};else{const m=_t(n,Nr);d=_t(m.firestore,Qt),g=m._query;const v=new Xa(d);u={next:I=>{e[s]&&e[s](new Ja(d,v,m,I))},error:e[s+1],complete:e[s+2]},JV(n._query)}return function(v,I,C,P){const N=new mv(P),G=new UC(I,N,C);return v.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return xC(yield Vd(v),G)})),()=>{N.$a(),v.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return kC(yield Vd(v),G)}))}}(In(d),g,a,u)}function Ld(n,e){return function(r,i){const o=new ur;return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function NW(n,e,t){return WC.apply(this,arguments)}(yield ET(r),i,o)})),o.promise}(In(n),e)}function kT(n,e,t){const r=t.docs.get(e._key),i=new Xa(n);return new Ws(n,i,e._key,r,new yc(t.hasPendingWrites,t.fromCache),e.converter)}const nZ={maxAttempts:5};class uF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,r){this._verifyNotCommitted();const i=eu(e,this._firestore),o=Pv(i.converter,t,r),s=bv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,En.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=eu(e,this._firestore);let s;return s="string"==typeof(t=(0,Ft.m9)(t))||t instanceof Gs?PT(this._dataReader,"WriteBatch.update",o._key,t,r,i):RT(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=eu(e,this._firestore);return this._mutations=this._mutations.concat(new _d(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eu(n,e){if((n=(0,Ft.m9)(n)).firestore!==e)throw new ce(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rZ extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=mc(t)}get(t){const r=eu(t,this._firestore),i=new V7(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Me();const s=o[0];if(s.isFoundDocument())return new Rp(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Rp(this._firestore,i,r._key,null,r.converter);throw Me()})}set(t,r,i){const o=eu(t,this._firestore),s=Pv(o.converter,r,i),a=bv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){const s=eu(t,this._firestore);let a;return a="string"==typeof(r=(0,Ft.m9)(r))||r instanceof Gs?PT(this._dataReader,"Transaction.update",s._key,r,i,o):RT(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){const r=eu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=eu(e,this._firestore),r=new Xa(this._firestore);return super.get(e).then(i=>new Ws(this._firestore,r,t._key,i._document,new yc(!1,!1),t.converter))}}function FT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hF(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function fF(){if(!function Fq(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){rd=ed.SDK_VERSION,(0,ed._registerComponent)(new C1.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Qt(new aq(r.getProvider("auth-internal")),new lq(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(d.options.projectId,g)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,ed.registerVersion)(O1,"4.6.4",e),(0,ed.registerVersion)(O1,"4.6.4","esm2017")}();class xp{constructor(e){this._delegate=e}static fromBase64String(e){return fF(),new xp(rs.fromBase64String(e))}static fromUint8Array(e){return hF(),new xp(rs.fromUint8Array(e))}toBase64(){return fF(),this._delegate.toBase64()}toUint8Array(){return hF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LT(n){return function fZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pZ{enableIndexedDbPersistence(e,t){return function p7(n,e){zV(n=_t(n,Qt));const t=In(n);if(t._uninitializedComponentsProvider)throw new ce(K.FAILED_PRECONDITION,"SDK cache is already specified.");Si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Od;return HV(t,i,new fT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function g7(n){zV(n=_t(n,Qt));const e=In(n);if(e._uninitializedComponentsProvider)throw new ce(K.FAILED_PRECONDITION,"SDK cache is already specified.");Si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Od;return HV(e,r,new CV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function m7(n){if(n._initialized&&!n._terminated)throw new ce(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{yield(t=(0,oe.Z)(function*(i){if(!Yo.D())return Promise.resolve();const o=i+"main";yield Yo.delete(o)}),function r(i){return t.apply(this,arguments)})(nC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ba||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function UV(n,e,t,r={}){var i;const o=(n=_t(n,Tp))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=vr.MOCK_USER;else{a=(0,Ft.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new vr(d)}n._authCredentials=new sq(new k1(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function y7(n){return function XW(n){return n.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield AV(n),t=yield SV(n);return e.setNetworkEnabled(!0),function(i){const o=Ee(i);return o.M_.delete(0),bp(o)}(t)}))}(In(n=_t(n,Qt)))}(this._delegate)}disableNetwork(){return function v7(n){return function e7(n){return n.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield AV(n),t=yield SV(n);return e.setNetworkEnabled(!1),(r=(0,oe.Z)(function*(o){const s=Ee(o);s.M_.add(0),yield Dd(s),s.N_.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(In(n=_t(n,Qt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,OV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _7(n){return function(t){const r=new ur;return t.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function VW(n,e){return JC.apply(this,arguments)}(yield ET(t),r)})),r.promise}(In(n=_t(n,Qt)))}(this._delegate)}onSnapshotsInSync(e){return function W7(n,e){return function i7(n,e){const t=new mv(e);return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return i=yield Vd(n),o=t,Ee(i).z_.add(o),void o.next();var i,o})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return i=yield Vd(n),o=t,void Ee(i).z_.delete(o);var i,o}))}}(In(n=_t(n,Qt)),CT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ud(this,BV(this._delegate,e))}catch(t){throw di(t,"collection()","Firestore.collection()")}}doc(e){try{return new oo(this,Ev(this._delegate,e))}catch(t){throw di(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hi(this,function l7(n,e){if(n=_t(n,Tp),wT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Nr(n,null,(r=e,new js(It.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw di(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function iZ(n,e,t){n=_t(n,Qt);const r=Object.assign(Object.assign({},nZ),t);return function(o){if(o.maxAttempts<1)throw new ce(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new ur;return o.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){const d=yield function RV(n){return yv(n).then(e=>e.datastore)}(o);new YW(o.asyncQueue,d,a,s,u).Xa()})),u.promise}(In(n),i=>e(new rZ(n,i)),r)}(this._delegate,t=>e(new gF(this,t)))}batch(){return In(this._delegate),new mF(new uF(this._delegate,e=>Ld(this._delegate,e)))}loadBundle(e){return function E7(n,e){const t=In(n=_t(n,Qt)),r=new h7;return function o7(n,e,t,r){const i=function(s,a){let u;return u="string"==typeof s?ZO().encode(s):s,g=function(g,m){if(g instanceof Uint8Array)return TV(g,m);if(g instanceof ArrayBuffer)return TV(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new KW(g,a);var g}(t,wp(e));n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){!function WW(n,e,t){const r=Ee(n);var i;(i=(0,oe.Z)(function*(s,a,u){try{const d=yield a.getMetadata();if(yield function(C,P){const N=Ee(C),G=zn(P.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",F=>N.$r.getBundleMetadata(F,P.id)).then(F=>!!F&&F.createTime.compareTo(G)>=0)}(s.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=d).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(pV(d));const g=new CW(d,s.localStore,a.serializer);let m=yield a.qa();for(;m;){const I=yield g._a(m);I&&u._updateProgress(I),m=yield a.qa()}const v=yield g.complete();return yield qs(s,v.ca,void 0),yield function(C,P){const N=Ee(C);return N.persistence.runTransaction("Save bundle","readwrite",G=>N.$r.saveBundleMetadata(G,P))}(s.localStore,d),u._completeWith(v.progress),Promise.resolve(v.ua)}catch(d){return Si("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var C}),function o(s,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ET(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function I7(n,e){return function s7(n,e){return n.asyncQueue.enqueue((0,oe.Z)(function*(){return function(r,i){const o=Ee(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield kd(n),e)}))}(In(n=_t(n,Qt)),e).then(t=>t?new Nr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hi(this,t):null)}}class Nv extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new xp(new rs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oo.forKey(t,this.firestore,null)}}class gF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nv(e)}get(e){const t=Ec(e);return this._delegate.get(t).then(r=>new Op(this._firestore,new Ws(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ec(e);return r?(FT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ec(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ec(e);return this._delegate.delete(t),this}}class mF{constructor(e){this._delegate=e}set(e,t,r){const i=Ec(e);return r?(FT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ec(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ec(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Np(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kp(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new vc(e,new Nv(e),t),i.set(t,o)),o}}vc.INSTANCES=new WeakMap;class oo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oo(t,new hn(t._delegate,r,new be(e)))}static forKey(e,t,r){return new oo(t,new hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ud(this.firestore,BV(this._delegate,e))}catch(t){throw di(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ft.m9)(e))instanceof hn&&jV(this._delegate,e)}set(e,t){t=FT("DocumentReference.set",t);try{return t?oF(this._delegate,e,t):oF(this._delegate,e)}catch(r){throw di(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sF(this._delegate,e):sF(this._delegate,e,t,...r)}catch(i){throw di(i,"updateDoc()","DocumentReference.update()")}}delete(){return function q7(n){return Ld(_t(n.firestore,Qt),[new _d(n._key,En.none())])}(this._delegate)}onSnapshot(...e){const t=_F(e),r=yF(e,i=>new Op(this.firestore,new Ws(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return aF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function B7(n){n=_t(n,hn);const e=_t(n.firestore,Qt),t=In(e),r=new Xa(e);return function t7(n,e){const t=new ur;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(r=(0,oe.Z)(function*(o,s,a){try{const u=yield function(g,m){const v=Ee(g);return v.persistence.runTransaction("read document","readonly",I=>v.localDocuments.getDocument(I,m))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ce(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Pd(u,`Failed to get document '${s} from cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield kd(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ws(e,r,n._key,i,new yc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function j7(n){n=_t(n,hn);const e=_t(n.firestore,Qt);return PV(In(e),n._key,{source:"server"}).then(t=>kT(e,n,t))}(this._delegate):function U7(n){n=_t(n,hn);const e=_t(n.firestore,Qt);return PV(In(e),n._key).then(t=>kT(e,n,t))}(this._delegate),t.then(r=>new Op(this.firestore,new Ws(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new oo(this.firestore,this._delegate.withConverter(e?vc.getInstance(this.firestore,e):null))}}function di(n,e,t){return n.message=n.message.replace(e,t),n}function _F(n){for(const e of n)if("object"==typeof e&&!LT(e))return e;return{}}function yF(n,e){var t,r;let i;return i=LT(n[0])?n[0]:LT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Op{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iF(this._delegate,e._delegate)}}class kp extends Op{data(e){const t=this._delegate.data(e);return this._delegate._converter||function iq(n,e){n||Me()}(void 0!==t),t}}class hi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nv(e)}where(e,t,r){try{return new hi(this.firestore,Ya(this._delegate,function S7(n,e,t){const r=e,i=Dv("where",n);return Mp._create(i,r,t)}(e,t,r)))}catch(i){throw di(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hi(this.firestore,Ya(this._delegate,function R7(n,e="asc"){const t=e,r=Dv("orderBy",n);return xT._create(r,t)}(e,t)))}catch(r){throw di(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hi(this.firestore,Ya(this._delegate,function P7(n){return FV("limit",n),Av._create("limit",n,"F")}(e)))}catch(t){throw di(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hi(this.firestore,Ya(this._delegate,function M7(n){return FV("limitToLast",n),Av._create("limitToLast",n,"L")}(e)))}catch(t){throw di(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hi(this.firestore,Ya(this._delegate,function N7(...n){return Sv._create("startAt",n,!0)}(...e)))}catch(t){throw di(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hi(this.firestore,Ya(this._delegate,function x7(...n){return Sv._create("startAfter",n,!1)}(...e)))}catch(t){throw di(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hi(this.firestore,Ya(this._delegate,function O7(...n){return Rv._create("endBefore",n,!1)}(...e)))}catch(t){throw di(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hi(this.firestore,Ya(this._delegate,function k7(...n){return Rv._create("endAt",n,!0)}(...e)))}catch(t){throw di(t,"endAt()","Query.endAt()")}}isEqual(e){return bT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function H7(n){n=_t(n,Nr);const e=_t(n.firestore,Qt),t=In(e),r=new Xa(e);return function n7(n,e){const t=new ur;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(r=(0,oe.Z)(function*(o,s,a){try{const u=yield uv(o,s,!0),d=new _V(s,u.hs),g=d.da(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=Pd(u,`Failed to execute query '${s} against cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield kd(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ja(e,r,n,i))}(this._delegate):"server"===e?.source?function z7(n){n=_t(n,Nr);const e=_t(n.firestore,Qt),t=In(e),r=new Xa(e);return MV(t,n._query,{source:"server"}).then(i=>new Ja(e,r,n,i))}(this._delegate):function $7(n){n=_t(n,Nr);const e=_t(n.firestore,Qt),t=In(e),r=new Xa(e);return JV(n._query),MV(t,n._query).then(i=>new Ja(e,r,n,i))}(this._delegate),t.then(r=>new UT(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_F(e),r=yF(e,i=>new UT(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return aF(this._delegate,t,r)}withConverter(e){return new hi(this.firestore,this._delegate.withConverter(e?vc.getInstance(this.firestore,e):null))}}class mZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new kp(this._firestore,r))})}isEqual(e){return iF(this._delegate,e._delegate)}}class Ud extends hi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oo(this.firestore,e):null}doc(e){try{return new oo(this.firestore,void 0===e?Ev(this._delegate):Ev(this._delegate,e))}catch(t){throw di(t,"doc()","CollectionReference.doc()")}}add(e){return function G7(n,e){const t=_t(n.firestore,Qt),r=Ev(n),i=Pv(n.converter,e);return Ld(t,[bv(mc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new oo(this.firestore,t))}isEqual(e){return jV(this._delegate,e._delegate)}withConverter(e){return new Ud(this.firestore,this._delegate.withConverter(e?vc.getInstance(this.firestore,e):null))}}function Ec(n){return _t(n,hn)}class BT{constructor(...e){this._delegate=new Gs(...e)}static documentId(){return new BT(ln.keyField().canonicalString())}isEqual(e){return(e=(0,Ft.m9)(e))instanceof Gs&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ic{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sZ(){return new TT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ic(e)}static delete(){const e=function oZ(){return new Ap("deleteField")}();return e._methodName="FieldValue.delete",new Ic(e)}static arrayUnion(...e){const t=function aZ(...n){return new DT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ic(t)}static arrayRemove(...e){const t=function uZ(...n){return new AT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ic(t)}static increment(e){const t=function cZ(n){return new ST("increment",n)}(e);return t._methodName="FieldValue.increment",new Ic(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _Z={Firestore:pF,GeoPoint:Iv,Timestamp:vn,Blob:xp,Transaction:gF,WriteBatch:mF,DocumentReference:oo,DocumentSnapshot:Op,Query:hi,QueryDocumentSnapshot:kp,QuerySnapshot:UT,CollectionReference:Ud,FieldPath:BT,FieldValue:Ic,setLogLevel:function gZ(n){!function rq(n){Va.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vF(n,e){return function EZ(n,e=a1){return new gt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function jT(n,e){return vF(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function vZ(n){(function yZ(n,e){n.INTERNAL.registerComponent(new C1.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_Z)))})(n,(e,t)=>new pF(e,t,new pZ)),n.registerVersion("@firebase/firestore-compat","0.3.33")}(Fs.Z);class EF{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=DF(r,t);return new bF(i,o,this.afs)}snapshotChanges(){return function IZ(n,e){return vF(n,e).pipe(My(void 0),yb(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return D(this.ref.get(e)).pipe($i)}}function xv(n,e){return jT(n,e).pipe(My(void 0),yb(),Oe(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=o.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function IF(n,e,t){return xv(n,t).pipe(Ny((r,i)=>function wZ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bZ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $T(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $T(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $T(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Cr(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function $T(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function wF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class bF{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(My(void 0),yb(),Ro(([r,i])=>i.length>0||!r),Oe(([,r])=>r),$i)}auditTrail(e){return this.stateChanges(e).pipe(Ny((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wF(e);return IF(this.query,t,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return jT(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),$i)}get(e){return D(this.query.get(e)).pipe($i)}add(e){return this.ref.add(e)}doc(e){return new EF(this.ref.doc(e),this.afs)}}class CZ{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xv(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ro(t=>t.length>0),$i):xv(this.query,this.afs.schedulers.outsideAngular).pipe($i)}auditTrail(e){return this.stateChanges(e).pipe(Ny((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wF(e);return IF(this.query,t,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return jT(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),$i)}get(e){return D(this.query.get(e)).pipe($i)}}const CF=new we("angularfire2.enableFirestorePersistence"),TF=new we("angularfire2.firestore.persistenceSettings"),TZ=new we("angularfire2.firestore.settings"),DZ=new we("angularfire2.firestore.use-emulator");function DF(n,e=(t=>t)){return{query:e(n),ref:n}}let AF=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,d,g,m,v,I,C,P,N,G,F){this.schedulers=u;const Q=gb(t,a,r),de=g;m&&b1(Q,a,v,C,P,N,I,G),[this.firestore,this.persistenceEnabled$]=h1(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const ye=a.runOutsideAngular(()=>Q.firestore());if(o&&ye.settings(o),de&&ye.useEmulator(...de),i&&!Iy(s)){const Be=()=>{try{return D(ye.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),k(!1)}};return[ye,a.runOutsideAngular(Be)]}return[ye,k(!1)]},[o,de,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=DF(i,r),a=this.schedulers.ngZone.run(()=>o);return new bF(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new CZ(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new EF(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(pe(Ay),pe(Sy,8),pe(CF,8),pe(TZ,8),pe(Eo),pe(Mt),pe(l1),pe(TF,8),pe(DZ,8),pe(mb,8),pe(_1,8),pe(y1,8),pe(v1,8),pe(E1,8),pe(I1,8),pe(w1,8),pe(u1,8))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),AZ=(()=>{class n{constructor(){Fs.Z.registerVersion("angularfire",Dy.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:CF,useValue:!0},{provide:TF,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=nr({providers:[AF]})}return n})();class SZ{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const RZ={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const lr=typeof window<"u"&&window||{},dr=lr.document;var RF=function(n){return n.isBs4="bs4",n.isBs5="bs5",n}(RF||{});let Zs;function PF(){const n=lr.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),lr.document.head.appendChild(n);const e=lr.getComputedStyle(n).paddingLeft;return e&&parseFloat(e)?(lr.document.head.removeChild(n),"bs4"):(lr.document.head.removeChild(n),"bs5")}function Vp(){return{isBs4:(Zs||(Zs=PF()),"bs4"===Zs),isBs5:(Zs||(Zs=PF()),"bs5"===Zs)}}class VZ{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=lr),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function kZ(){const n=Vp(),e=Object.keys(n).find(t=>n[t]);return RF[e]}();return{crossorigin:"anonymous",integrity:"bs5"===e?"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65":"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2",cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css":"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"}}}typeof console>"u"||console;let HT,LZ=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();try{HT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{HT=!1}let NF=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Lx(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!HT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Eo))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xF=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function BZ(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function UZ(n){try{return n.frameElement}catch{return null}}(function ZZ(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===kF(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=kF(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function GZ(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function WZ(n){return!function $Z(n){return function zZ(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function jZ(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function HZ(n){return function qZ(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||OF(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||n)(pe(NF))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OF(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function kF(n){if(!OF(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function VF(n){return null!=n&&"false"!=`${n}`}class KZ{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,r,i,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return t?.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Xu(1)).subscribe(e)}}let QZ=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new KZ(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(xF),pe(Mt),pe(ci))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YZ=(()=>{class n{get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=VF(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=VF(t)}constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}static#e=this.\u0275fac=function(r){return new(r||n)(ue(yr),ue(QZ),ue(ci))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[oi]})}return n})(),FF=(()=>{class n{static forRoot(){return{ngModule:n,providers:[LZ,NF,xF]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({imports:[Vx]})}return n})();const{isArray:JZ}=Array;function zT(n){return Oe(e=>function XZ(n,e){return JZ(e)?n(...e):n(e)}(n,e))}const eK=["addListener","removeListener"],tK=["addEventListener","removeEventListener"],nK=["on","off"];function Ov(n,e,t,r){if(T(t)&&(r=t,t=void 0),r)return Ov(n,e,t).pipe(zT(r));const[i,o]=function oK(n){return T(n.addEventListener)&&T(n.removeEventListener)}(n)?tK.map(s=>a=>n[s](e,a,t)):function rK(n){return T(n.addListener)&&T(n.removeListener)}(n)?eK.map(LF(n,e)):function iK(n){return T(n.on)&&T(n.off)}(n)?nK.map(LF(n,e)):[];if(!i&&yt(n))return Tn(s=>Ov(s,e,t))(Cn(n));if(!i)throw new TypeError("Invalid event target");return new gt(s=>{const a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function LF(n,e){return t=>r=>n[t](e,r)}const Fp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Fp;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new bt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Fp;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Fp;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},uK=new class aK extends pb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class sK extends hb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Fp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(Fp.cancelAnimationFrame(t),e._scheduled=void 0)}});var UF=function(n){return n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",n}(UF||{}),qT=function(n){return n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",n}(qT||{});function wc(n,e){if(1!==n.nodeType)return[];const r=n.ownerDocument.defaultView?.getComputedStyle(n,null);return e?r&&r[e]:r}function GT(n){if(!n)return document.documentElement;let r,t=n?.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===wc(t,"position")?GT(t):t:r?r.ownerDocument.documentElement:document.documentElement}function WT(n){return null!==n.parentNode?WT(n.parentNode):n}function kv(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);const s=o.commonAncestorContainer;if(n!==s&&e!==s||r.contains(i))return function cK(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||GT(n.firstElementChild)===n)}(s)?s:GT(s);const a=WT(n);return a.host?kv(a.host,e):kv(n,WT(e).host)}function BF(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;e?.parentElement&&"none"===wc(e,"transform");)e=e.parentElement;return e||document.documentElement}function jF(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function $F(n,e,t){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function HF(n){const e=n.body,t=n.documentElement;return{height:$F("Height",e,t),width:$F("Width",e,t)}}function Lp(n){return{...n,right:(n.left||0)+n.width,bottom:(n.top||0)+n.height}}function wn(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function zF(n){const e=n.getBoundingClientRect();if(!(e&&wn(e.top)&&wn(e.left)&&wn(e.bottom)&&wn(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?HF(n.ownerDocument):void 0,i=r?.width||n.clientWidth||wn(e.right)&&wn(t.left)&&e.right-t.left||0,o=r?.height||n.clientHeight||wn(e.bottom)&&wn(t.top)&&e.bottom-t.top||0;let s=n.offsetWidth-i,a=n.offsetHeight-o;if(s||a){const u=wc(n);s-=jF(u,"x"),a-=jF(u,"y"),t.width-=s,t.height-=a}return Lp(t)}function ZT(n,e,t=!1){const r="HTML"===e.nodeName,i=zF(n),o=zF(e),s=wc(e),a=parseFloat(s.borderTopWidth),u=parseFloat(s.borderLeftWidth);t&&r&&(o.top=Math.max(o.top??0,0),o.left=Math.max(o.left??0,0));const d=Lp({top:(i.top??0)-(o.top??0)-a,left:(i.left??0)-(o.left??0)-u,width:i.width,height:i.height});if(d.marginTop=0,d.marginLeft=0,r){const g=parseFloat(s.marginTop),m=parseFloat(s.marginLeft);wn(d.top)&&(d.top-=a-g),wn(d.bottom)&&(d.bottom-=a-g),wn(d.left)&&(d.left-=u-m),wn(d.right)&&(d.right-=u-m),d.marginTop=g,d.marginLeft=m}return d}function KT(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function qF(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=wc(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:qF(KT(n))}function GF(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;return"BODY"===r||"HTML"===r?(n.ownerDocument.scrollingElement||n.ownerDocument.documentElement)[t]:n[t]}function WF(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===wc(n,"position")||WF(KT(n)))}function QT(n,e,t=0,r,i=!1){let o={top:0,left:0};const s=i?BF(n):kv(n,e);if("viewport"===r)o=function dK(n,e=!1){const t=n.ownerDocument.documentElement,r=ZT(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),o=Math.max(t.clientHeight,window.innerHeight||0),s=e?0:GF(t),a=e?0:GF(t,"left");return Lp({top:s-Number(r?.top)+Number(r?.marginTop),left:a-Number(r?.left)+Number(r?.marginLeft),width:i,height:o})}(s,i);else{let a;"scrollParent"===r?(a=qF(KT(e)),"BODY"===a.nodeName&&(a=n.ownerDocument.documentElement)):a="window"===r?n.ownerDocument.documentElement:r;const u=ZT(a,s,i);if(u&&"HTML"===a.nodeName&&!WF(s)){const{height:d,width:g}=HF(n.ownerDocument);wn(o.top)&&wn(u.top)&&wn(u.marginTop)&&(o.top+=u.top-u.marginTop),wn(o.top)&&(o.bottom=Number(d)+Number(u.top)),wn(o.left)&&wn(u.left)&&wn(u.marginLeft)&&(o.left+=u.left-u.marginLeft),wn(o.top)&&(o.right=Number(g)+Number(u.left))}else u&&(o=u)}return wn(o.left)&&(o.left+=t),wn(o.top)&&(o.top+=t),wn(o.right)&&(o.right-=t),wn(o.bottom)&&(o.bottom-=t),o}function hK({width:n,height:e}){return n*e}function ZF(n,e,t,r,i=["top","bottom","right","left"],o="viewport",s=0){if(-1===n.indexOf("auto"))return n;const a=QT(t,r,s,o),u={top:{width:a?.width??0,height:(e?.top??0)-(a?.top??0)},right:{width:(a?.right??0)-(e?.right??0),height:a?.height??0},bottom:{width:a?.width??0,height:(a?.bottom??0)-(e?.bottom??0)},left:{width:(e.left??0)-(a?.left??0),height:a?.height??0}},d=Object.keys(u).map(I=>({position:I,...u[I],area:hK(u[I])})).sort((I,C)=>C.area-I.area);let g=d.filter(({width:I,height:C})=>I>=t.clientWidth&&C>=t.clientHeight);g=g.filter(({position:I})=>i.some(C=>C===I));const m=g.length>0?g[0].position:d[0].position,v=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Vp().isBs5?qT[m]:m}`),m+(v?`-${v}`:"")}const Vv=(n,e=0)=>n?parseFloat(n):e;function KF(n){const t=n.ownerDocument.defaultView?.getComputedStyle(n),r=Vv(t?.marginTop)+Vv(t?.marginBottom),i=Vv(t?.marginLeft)+Vv(t?.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function QF(n,e,t){return ZT(e,t?BF(n):kv(n,e),t)}function YT(n,e,t){const r=t.split(" ")[0],i=KF(n),o={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(r),a=s?"top":"left",u=s?"left":"top",d=s?"height":"width",g=s?"width":"height";return o[a]=(e[a]??0)+e[d]/2-i[d]/2,o[u]=r===u?(e[u]??0)-i[g]:e[function pK(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(u)]??0,o}function YF(n,e){return!!n.modifiers[e]?.enabled}const mK={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function Fv(n,e){return!!Vp().isBs5&&mK[e].includes(n)}function JF(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function lK(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function vK(n){let e=n.offsets.target;const t=n.instance.target.querySelector(".arrow");if(!t)return n;const r=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),i=r?"height":"width",o=r?"Top":"Left",s=o.toLowerCase(),a=r?"left":"top",u=r?"bottom":"right",d=KF(t)[i],g=n.placement.split(" ")[1];(n.offsets.host[u]??0)-d<(e[s]??0)&&(e[s]-=(e[s]??0)-((n.offsets.host[u]??0)-d)),Number(n.offsets.host[s])+Number(d)>(e[u]??0)&&(e[s]+=Number(n.offsets.host[s])+Number(d)-Number(e[u])),e=Lp(e);const m=wc(n.instance.target),v=parseFloat(m[`margin${o}`])||0,I=parseFloat(m[`border${o}Width`])||0;let C;if(g){const N=parseFloat(m.borderRadius)||0,G=Number(v+I+N);C=s===g?Number(n.offsets.host[s])+G:Number(n.offsets.host[s])+Number(n.offsets.host[i]-G)}else C=Number(n.offsets.host[s])+Number(n.offsets.host[i]/2-d/2);let P=C-(e[s]??0)-v-I;return P=Math.max(Math.min(e[i]-(d+5),P),0),n.offsets.arrow={[s]:Math.round(P),[a]:""},n.instance.arrow=t,n}function EK(n){if(n.offsets.target=Lp(n.offsets.target),!YF(n.options,"flip"))return n.offsets.target={...n.offsets.target,...YT(n.instance.target,n.offsets.host,n.placement)},n;const e=QT(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const a=ZF("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),u=[t,a];return u.forEach((d,g)=>{if(t!==d||u.length===g+1)return;t=n.placement.split(" ")[0];const m="left"===t&&Math.floor(n.offsets.target.right??0)>Math.floor(n.offsets.host.left??0)||"right"===t&&Math.floor(n.offsets.target.left??0)<Math.floor(n.offsets.host.right??0)||"top"===t&&Math.floor(n.offsets.target.bottom??0)>Math.floor(n.offsets.host.top??0)||"bottom"===t&&Math.floor(n.offsets.target.top??0)<Math.floor(n.offsets.host.bottom??0),v=Math.floor(n.offsets.target.left??0)<Math.floor(e.left??0),I=Math.floor(n.offsets.target.right??0)>Math.floor(e.right??0),C=Math.floor(n.offsets.target.top??0)<Math.floor(e.top??0),P=Math.floor(n.offsets.target.bottom??0)>Math.floor(e.bottom??0),N="left"===t&&v||"right"===t&&I||"top"===t&&C||"bottom"===t&&P,G=-1!==["top","bottom"].indexOf(t),F=G&&"left"===r&&v||G&&"right"===r&&I||!G&&"left"===r&&C||!G&&"right"===r&&P;(m||N||F)&&((m||N)&&(t=u[g+1]),F&&(r=function gK(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target={...n.offsets.target,...YT(n.instance.target,n.offsets.host,n.placement)})}),n}function wK(n){if(!YF(n.options,"preventOverflow"))return n;const e="transform",t=n.instance.target.style,{top:r,left:i,[e]:o}=t;t.top="",t.left="",t[e]="";const s=QT(n.instance.target,n.instance.host,0,n.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);t.top=r,t.left=i,t[e]=o;const u={primary(d){let g=n.offsets.target[d];return(n.offsets.target[d]??0)<(s[d]??0)&&(g=Math.max(n.offsets.target[d]??0,s[d]??0)),{[d]:g}},secondary(d){const g="right"===d,m=g?"left":"top";let I=n.offsets.target[m];return(n.offsets.target[d]??0)>(s[d]??0)&&(I=Math.min(n.offsets.target[m]??0,(s[d]??0)-n.offsets.target[g?"width":"height"])),{[m]:I}}};return["left","right","top","bottom"].forEach(d=>{const g=-1!==["left","top","start"].indexOf(d)?u.primary:u.secondary;n.offsets.target={...n.offsets.target,...g(d)}}),n}function bK(n){const e=n.placement,t=e.split(" ")[0],r=e.split(" ")[1];if(r){const{host:i,target:o}=n.offsets,s=-1!==["bottom","top"].indexOf(t),a=s?"left":"top",u=s?"width":"height",d={start:{[a]:i[a]},end:{[a]:(i[a]??0)+i[u]-o[u]}};n.offsets.target={...o,[a]:a===r?d.start[a]:d.end[a]}}return n}const TK=new class CK{position(e,t){return this.offset(e,t)}offset(e,t){return QF(t,e)}positionElements(e,t,r,i,o){const s=[EK,bK,wK,vK],u=function IK(n,e,t,r){if(!n||!e)return;const i=QF(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const o=!!t.match(/auto/g);let s=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const a=s.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return a&&(s=a[1]+(a[2]?` ${a[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(s)&&(s="auto"),s=ZF(s,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:YT(n,i,s),host:i,arrow:void 0},positionFixed:!1,placement:s,placementAuto:o}}(t,e,UF[r],o);if(u)return s.reduce((d,g)=>g(d),u)}};function DK(n,e,t,r,i,o){const s=TK.positionElements(n,e,t,r,i);if(!s)return;const a=function fK(n){return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(n.offsets.target.left??0),top:Math.round(n.offsets.target.top??0),bottom:Math.round(n.offsets.target.bottom??0),right:Math.floor(n.offsets.target.right??0)}}(s);JF(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${a.left}px, ${a.top}px, 0px)`},o),s.instance.arrow&&JF(s.instance.arrow,s.offsets.arrow,o),function yK(n,e){const t=n.instance.target;let r=t.className;const i=Vp().isBs5?qT[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function _K(n){return Vp().isBs5?Fv(n,"end")?"ms-2":Fv(n,"start")?"me-2":Fv(n,"top")?"mb-2":Fv(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(s,o)}let JT=(()=>{class n{constructor(t,r,i){this.update$$=new te,this.positionElements=new Map,this.isDisabled=!1,Lx(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=L(Ov(window,"scroll",{passive:!0}),Ov(window,"resize",{passive:!0}),k(0,uK),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(o=>{DK(Lv(o.target),Lv(o.element),o.attachment,o.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(Lv(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(Lv(t))}setOptions(t){this.options=t}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Mt),pe(N_),pe(Eo))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lv(n){return"string"==typeof n?document.querySelector(n):n instanceof yr?n.nativeElement:n??null}class Up{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class AK{constructor(e,t,r,i,o,s,a,u,d){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=o,this._ngZone=s,this._applicationRef=a,this._posService=u,this._document=d,this.onBeforeShow=new Pt,this.onShown=new Pt,this.onBeforeHide=new Pt,this.onHidden=new Pt,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=zr.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof yr&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&typeof this._document<"u"){const r=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const t=this._componentRef.location.nativeElement;return t.parentNode?.removeChild(t),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||this._elementRef?.nativeElement;const t=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),r=this._listenOpts.show=o=>{e.show?e.show(o):this.show(o),o()};return this._renderer&&(this._unregisterListenersFn=function PZ(n,e){const t=function SF(n,e=RZ){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(o=>o.split(":")).map(o=>{const s=e[o[0]]||o;return new SZ(s[0],s[1])}),i=r.filter(o=>o.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],o=[],s=()=>{o.forEach(a=>i.push(a())),o.length=0};return t.forEach(a=>{const u=a.open===a.close,d=u?e.toggle:e.show;if(!u&&a.close&&e.hide){const g=a.close,m=e.hide;o.push(()=>n.listen(r,g,m))}d&&i.push(n.listen(r,a.open,()=>d(s)))}),()=>{i.forEach(a=>a())}}(this._renderer,{target:e.target,triggers:e.triggers,show:r,hide:t,toggle:o=>{this.isShown?t():r(o)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function MZ(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function NZ(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new Up([]);if(e instanceof Ko){if(this._viewContainerRef){const s=this._viewContainerRef.createEmbeddedView(e,t);return s.markForCheck(),new Up([s.rootNodes],s)}const o=e.createEmbeddedView({});return this._applicationRef.attachView(o),new Up([o.rootNodes],o)}if("function"==typeof e){const o=this._componentFactoryResolver.resolveComponentFactory(e),s=zr.create({providers:this._providers,parent:this._injector}),a=o.create(s);return Object.assign(a.instance,r),this._applicationRef.attachView(a.hostView),new Up([[a.location.nativeElement]],a.hostView,a)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new Up([i])}}let XT=(()=>{class n{constructor(t,r,i,o,s,a){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=o,this._applicationRef=s,this._document=a}createLoader(t,r,i){return new AK(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(Ef),pe(Mt),pe(zr),pe(JT),pe(Ku),pe(ci))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SK=["*"];let Uv=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),XF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Bv={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},RK=new we("override-default-config");let PK=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this._focusEl=null,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this._focusEl=dr.activeElement,this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,"show")},this.isAnimated?150:0),dr&&dr.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(dr.body,"modal-open"),this._renderer.setStyle(dr.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.bsModalService?.setDismissReason("backdrop-click"),this.hide())}onPopState(){this.bsModalService?.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){this.isShown&&((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,"show"),setTimeout(()=>{this.isShown=!1,dr&&dr.body&&1===this.bsModalService?.getModalsCount()&&(this._renderer.removeClass(dr.body,"modal-open"),this._renderer.setStyle(dr.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1,this._focusEl&&this._focusEl.focus()},this.isAnimated?300:0)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(XF),ue(yr),ue(Io))};static#t=this.\u0275cmp=Vi({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(r,i){1&r&&_n("mousedown",function(s){return i.onClickStarted(s)})("click",function(s){return i.onClickStop(s)})("popstate",function(){return i.onPopState()},!1,Tw)("keydown.esc",function(s){return i.onEsc(s)},!1,Tw),2&r&&wo("aria-modal",!0)("aria-labelledby",i.config.ariaLabelledBy)("aria-describedby",i.config.ariaDescribedby)},ngContentSelectors:SK,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(r,i){1&r&&(function EP(n){const e=ae()[un][mr];if(!e.projection){const r=e.projection=Aa(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=n?H$(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),xe(0,"div",0)(1,"div",1),function IP(n,e=0,t){const r=ae(),i=Et(),o=Fl(i,ct+n,16,null,t||null);null===o.projection&&(o.projection=e),Nh(),(!r[go]||ga())&&32!=(32&o.flags)&&function qB(n,e,t){bS(e[Ye],0,e,t,zI(n,t,e),_S(t.parent||e[mr],t,e))}(i,r,o)}(2),ke()()),2&r&&LP("modal-dialog"+(i.config.class?" "+i.config.class:""))},dependencies:[YZ],encapsulation:2})}return n})(),MK=(()=>{class n{get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show")}constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),VZ.reflow(this.element.nativeElement)),this.isShown=!0}static#e=this.\u0275fac=function(r){return new(r||n)(ue(yr),ue(Io))};static#t=this.\u0275cmp=Vi({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(r,i){},encapsulation:2})}return n})(),NK=1,Bp=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new Pt,this.onShown=new Pt,this.onHide=new Pt,this.onHidden=new Pt,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._focusEl=null,this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},Bv,i):Bv}show(t,r){this._focusEl=dr.activeElement,this.modalsCount++,this._createLoaders();const i=r?.id||NK++;return this.config=this.modalDefaultOption?Object.assign({},Bv,this.modalDefaultOption,r):Object.assign({},Bv,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0),this._focusEl&&this._focusEl.focus()}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(MK).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){const r=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const s of this.config.providers)r.provide(s);const i=new Uv,o=r.provide({provide:XF,useValue:this.config}).provide({provide:Uv,useValue:i}).attach(PK).to("body");return i.hide=()=>this.hide(i.id),i.setClass=s=>{o.instance&&(o.instance.config.class=s)},i.onHidden=new Pt,i.onHide=new Pt,this.copyEvent(r.onBeforeHide,i.onHide),this.copyEvent(r.onHidden,i.onHidden),o.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),o.instance&&(o.instance.level=this.getModalsCount(),i.content=r.getInnerComponent(),i.id=o.instance.config?.id),i}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(o=>o.instance?.config.id===t),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(dr.body,"modal-open"),this._renderer.setStyle(dr.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=dr.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){dr&&(this.originalBodyPadding=parseInt(window.getComputedStyle(dr.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(dr.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){dr.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(dr.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(dr.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>i.instance?.config.id===t);r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,o)=>{i.instance&&(i.instance.level=o+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(N_),pe(XT),pe(RK,8))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();FF.forRoot();let xK=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Bp,XT,JT]}}static forChild(){return{ngModule:n,providers:[Bp,XT,JT]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({imports:[FF]})}return n})();const{isArray:OK}=Array,{getPrototypeOf:kK,prototype:VK,keys:FK}=Object;function eL(n){if(1===n.length){const e=n[0];if(OK(e))return{args:e,keys:null};if(function LK(n){return n&&"object"==typeof n&&kK(n)===VK}(e)){const t=FK(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let nL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(Io),ue(yr))};static#t=this.\u0275dir=Ge({type:n})}return n})(),bc=(()=>{class n extends nL{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=sr(n)))(i||n)}}();static#t=this.\u0275dir=Ge({type:n,features:[Bt]})}return n})();const os=new we("NgValueAccessor"),jK={provide:os,useExisting:Ot(()=>jp),multi:!0},HK=new we("CompositionEventMode");let jp=(()=>{class n extends nL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $K(){const n=xa()?xa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(Io),ue(yr),ue(HK,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&_n("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yn([jK]),Bt]})}return n})();function tu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function iL(n){return null!=n&&"number"==typeof n.length}const Qr=new we("NgValidators"),nu=new we("NgAsyncValidators"),zK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $p{static min(e){return function oL(n){return e=>{if(tu(e.value)||tu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function sL(n){return e=>{if(tu(e.value)||tu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function aL(n){return tu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function uL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function cL(n){return tu(n.value)||zK.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function lL(n){return e=>tu(e.value)||!iL(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function dL(n){return e=>iL(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function hL(n){if(!n)return $v;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(tu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return yL(e)}static composeAsync(e){return vL(e)}}function $v(n){return null}function fL(n){return null!=n}function pL(n){return Pf(n)?D(n):n}function gL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function mL(n,e){return e.map(t=>t(n))}function _L(n){return n.map(e=>function qK(n){return!n.validate}(e)?e:t=>e.validate(t))}function yL(n){if(!n)return null;const e=n.filter(fL);return 0==e.length?null:function(t){return gL(mL(t,e))}}function tD(n){return null!=n?yL(_L(n)):null}function vL(n){if(!n)return null;const e=n.filter(fL);return 0==e.length?null:function(t){return function UK(...n){const e=ds(n),{args:t,keys:r}=eL(n),i=new gt(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,d=s;for(let g=0;g<s;g++){let m=!1;Cn(t[g]).subscribe(me(o,v=>{m||(m=!0,d--),a[g]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||o.next(r?tL(r,a):a),o.complete())}))}});return e?i.pipe(zT(e)):i}(mL(t,e).map(pL)).pipe(Oe(gL))}}function nD(n){return null!=n?vL(_L(n)):null}function EL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IL(n){return n._rawValidators}function wL(n){return n._rawAsyncValidators}function rD(n){return n?Array.isArray(n)?n:[n]:[]}function Hv(n,e){return Array.isArray(n)?n.includes(e):n===e}function bL(n,e){const t=rD(e);return rD(n).forEach(i=>{Hv(t,i)||t.push(i)}),t}function CL(n,e){return rD(e).filter(t=>!Hv(n,t))}class TL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fi extends TL{get formDirective(){return null}get path(){return null}}class ru extends TL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class DL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let iD=(()=>{class n extends DL{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(ru,2))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&W_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Bt]})}return n})(),oD=(()=>{class n extends DL{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(fi,10))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&W_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Bt]})}return n})();const Hp="VALID",qv="INVALID",Bd="PENDING",zp="DISABLED";function uD(n){return(Gv(n)?n.validators:n)||null}function cD(n,e){return(Gv(e)?e.asyncValidators:n)||null}function Gv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class PL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Hp}get invalid(){return this.status===qv}get pending(){return this.status==Bd}get disabled(){return this.status===zp}get enabled(){return this.status!==zp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CL(e,this._rawAsyncValidators))}hasValidator(e){return Hv(this._rawValidators,e)}hasAsyncValidator(e){return Hv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hp||this.status===Bd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zp:Hp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bd,this._hasOwnPendingAsyncValidator=!0;const t=pL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Pt,this.statusChanges=new Pt}_calculateStatus(){return this._allControlsDisabled()?zp:this.errors?qv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bd)?Bd:this._anyControlsHaveStatus(qv)?qv:Hp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function KK(n){return Array.isArray(n)?tD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function QK(n){return Array.isArray(n)?nD(n):n||null}(this._rawAsyncValidators)}}class Wv extends PL{constructor(e,t,r){super(uD(t),cD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function RL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function SL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[t])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Cc=new we("CallSetDisabledState",{providedIn:"root",factory:()=>qp}),qp="always";function Zv(n,e){return[...e.path,n]}function Gp(n,e,t=qp){lD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function XK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ML(n,e)})}(n,e),function tQ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function eQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ML(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function JK(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Kv(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Yv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Qv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lD(n,e){const t=IL(n);null!==e.validator?n.setValidators(EL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=wL(n);null!==e.asyncValidator?n.setAsyncValidators(EL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Qv(e._rawValidators,i),Qv(e._rawAsyncValidators,i)}function Yv(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=IL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=wL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return Qv(e._rawValidators,r),Qv(e._rawAsyncValidators,r),t}function ML(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NL(n,e){lD(n,e)}function hD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function xL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function fD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===jp?t=o:function iQ(n){return Object.getPrototypeOf(n.constructor)===bc}(o)?r=o:i=o}),i||r||t||null}const sQ={provide:fi,useExisting:Ot(()=>Jv)},Wp=(()=>Promise.resolve())();let Jv=(()=>{class n extends fi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Pt,this.form=new Wv({},tD(t),nD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Wp.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Gp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Wp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Wp.then(()=>{const r=this._findContainer(t.path),i=new Wv({});NL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Wp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Wp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,xL(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(ue(Qr,10),ue(nu,10),ue(Cc,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&_n("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yn([sQ]),Bt]})}return n})();function OL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function kL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Zp=class extends PL{constructor(e=null,t,r){super(uD(t),cD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=kL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){kL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cQ={provide:ru,useExisting:Ot(()=>pD)},LL=(()=>Promise.resolve())();let pD=(()=>{class n extends ru{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Zp,this._registered=!1,this.name="",this.update=new Pt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=fD(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){LL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&function Jl(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);LL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Zv(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(ue(fi,9),ue(Qr,10),ue(nu,10),ue(os,10),ue(sy,8),ue(Cc,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yn([cQ]),Bt,oi]})}return n})(),gD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),BL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({})}return n})();const mD=new we("NgModelWithFormControlWarning"),gQ={provide:fi,useExisting:Ot(()=>Xv)};let Xv=(()=>{class n extends fi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Pt,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Gp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Kv(t.control||null,t,!1),function oQ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,xL(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Kv(r||null,t),(n=>n instanceof Zp)(i)&&(Gp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);NL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function nQ(n,e){return Yv(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lD(this.form,this),this._oldForm&&Yv(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(ue(Qr,10),ue(nu,10),ue(Cc,8))};static#t=this.\u0275dir=Ge({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&_n("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yn([gQ]),Bt,oi]})}return n})();const yQ={provide:ru,useExisting:Ot(()=>vD)};let vD=(()=>{class n extends ru{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Pt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=fD(0,o)}ngOnChanges(t){this._added||this._setUpControl(),hD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Zv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(ue(fi,13),ue(Qr,10),ue(nu,10),ue(os,10),ue(mD,8))};static#n=this.\u0275dir=Ge({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[yn([yQ]),Bt,oi]})}return n})(),n2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({imports:[BL]})}return n})(),OQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Cc,useValue:t.callSetDisabledState??qp}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({imports:[n2]})}return n})(),kQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Cc,useValue:t.callSetDisabledState??qp}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({imports:[n2]})}return n})();function bD(...n){const e=Fn(n),t=ds(n),{args:r,keys:i}=eL(n);if(0===r.length)return D([],e);const o=new gt(function FQ(n,e,t=Yt){return r=>{r2(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)r2(e,()=>{const d=D(n[u],e);let g=!1;d.subscribe(me(r,m=>{o[u]=m,g||(g=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>tL(i,s):Yt));return t?o.pipe(zT(t)):o}function r2(n,e,t){n?Pn(t,n,e):e()}function i2(n){return new gt(e=>{Cn(n()).subscribe(e)})}function Kp(n,e){const t=T(n)?n:()=>n,r=i=>i.error(t());return new gt(e?i=>e.schedule(r,0,i):r)}function CD(){return J((n,e)=>{let t=null;n._refCount++;const r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class o2 extends gt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,_e(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;const t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return CD()(this)}}function Qp(n,e){return T(e)?Tn(n,e,1):Tn(n,1)}function Dc(n){return J((e,t)=>{let o,r=null,i=!1;r=e.subscribe(me(t,void 0,void 0,s=>{o=Cn(n(s,Dc(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function TD(n){return n<=0?()=>hr:J((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function DD(n){return J((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const at="primary",Yp=Symbol("RouteTitle");class jQ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jd(n){return new jQ(n)}function $Q(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ss(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!s2(n[i],e[i]))return!1;return!0}function s2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function a2(n){return n.length>0?n[n.length-1]:null}function iu(n){return function VQ(n){return!!n&&(n instanceof gt||T(n.lift)&&T(n.subscribe))}(n)?n:Pf(n)?D(Promise.resolve(n)):k(n)}const zQ={exact:function l2(n,e,t){if(!Ac(n.segments,e.segments)||!eE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!l2(n.children[r],e.children[r],t))return!1;return!0},subset:d2},u2={exact:function qQ(n,e){return ss(n,e)},subset:function GQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>s2(n[t],e[t]))},ignored:()=>!0};function c2(n,e,t){return zQ[t.paths](n.root,e.root,t.matrixParams)&&u2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function d2(n,e,t){return h2(n,e,e.segments,t)}function h2(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ac(i,t)||e.hasChildren()||!eE(i,t,r))}if(n.segments.length===t.length){if(!Ac(n.segments,t)||!eE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!d2(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ac(n.segments,i)&&eE(n.segments,i,r)&&n.children[at])&&h2(n.children[at],e,o,r)}}function eE(n,e,t){return e.every((r,i)=>u2[t](n[i].parameters,r.parameters))}class $d{constructor(e=new $t([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jd(this.queryParams)),this._queryParamMap}toString(){return KQ.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tE(this)}}class Jp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jd(this.parameters)),this._parameterMap}toString(){return g2(this)}}function Ac(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Xp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return new AD},providedIn:"root"})}return n})();class AD{parse(e){const t=new sY(e);return new $d(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${eg(e.root,!0)}`,r=function JQ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${nE(t)}=${nE(i)}`).join("&"):`${nE(t)}=${nE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function QQ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const KQ=new AD;function tE(n){return n.segments.map(e=>g2(e)).join("/")}function eg(n,e){if(!n.hasChildren())return tE(n);if(e){const t=n.children[at]?eg(n.children[at],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==at&&r.push(`${i}:${eg(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ZQ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===at&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==at&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===at?[eg(n.children[at],!1)]:[`${i}:${eg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[at]?`${tE(n)}/${t[0]}`:`${tE(n)}/(${t.join("//")})`}}function f2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nE(n){return f2(n).replace(/%3B/gi,";")}function SD(n){return f2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rE(n){return decodeURIComponent(n)}function p2(n){return rE(n.replace(/\+/g,"%20"))}function g2(n){return`${SD(n.path)}${function YQ(n){return Object.keys(n).map(e=>`;${SD(e)}=${SD(n[e])}`).join("")}(n.parameters)}`}const XQ=/^[^\/()?;#]+/;function RD(n){const e=n.match(XQ);return e?e[0]:""}const eY=/^[^\/()?;=#]+/,nY=/^[^=?&#]+/,iY=/^[^&#]+/;class sY{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[at]=new $t(e,t)),r}parseSegment(){const e=RD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Jp(rE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function tY(n){const e=n.match(eY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=RD(this.remaining);i&&(r=i,this.capture(r))}e[rE(t)]=rE(r)}parseQueryParam(e){const t=function rY(n){const e=n.match(nY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function oY(n){const e=n.match(iY);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=p2(t),o=p2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=RD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=at);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[at]:new $t([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}}function m2(n){return n.segments.length>0?new $t([],{[at]:n}):n}function _2(n){const e={};for(const r of Object.keys(n.children)){const o=_2(n.children[r]);if(r===at&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function aY(n){if(1===n.numberOfChildren&&n.children[at]){const e=n.children[at];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Sc(n){return n instanceof $d}function y2(n){let e;const i=m2(function t(o){const s={};for(const u of o.children){const d=t(u);s[u.outlet]=d}const a=new $t(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function v2(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return PD(i,i,i,t,r);const o=function cY(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new I2(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new I2(t,e,r)}(e);if(o.toRoot())return PD(i,i,new $t([],{}),t,r);const s=function lY(n,e,t){if(n.isAbsolute)return new oE(e,!0,0);if(!t)return new oE(e,!1,NaN);if(null===t.parent)return new oE(t,!0,0);const r=iE(n.commands[0])?0:1;return function dY(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new oE(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?ng(s.segmentGroup,s.index,o.commands):w2(s.segmentGroup,s.index,o.commands);return PD(i,s.segmentGroup,a,t,r)}function iE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tg(n){return"object"==typeof n&&null!=n&&n.outlets}function PD(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),s=n===e?t:E2(n,e,t);const a=m2(_2(s));return new $d(a,o,i)}function E2(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:E2(o,e,t)}),new $t(n.segments,r)}class I2{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&iE(r[0]))throw new S(4003,!1);const i=r.find(tg);if(i&&i!==a2(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oE{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function w2(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return ng(n,e,t);const r=function fY(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(tg(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!C2(u,d,s))return o;r+=2}else{if(!C2(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new $t(n.segments.slice(0,r.pathIndex),{});return o.children[at]=new $t(n.segments.slice(r.pathIndex),n.children),ng(o,0,i)}return r.match&&0===i.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?MD(n,e,t):r.match?ng(n,0,i):MD(n,e,t)}function ng(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function hY(n){return tg(n[0])?n[0].outlets:{[at]:n}}(t),i={};if(Object.keys(r).some(o=>o!==at)&&n.children[at]&&1===n.numberOfChildren&&0===n.children[at].segments.length){const o=ng(n.children[at],e,t);return new $t(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=w2(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new $t(n.segments,i)}}function MD(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(tg(o)){const u=pY(o.outlets);return new $t(r,u)}if(0===i&&iE(t[0])){r.push(new Jp(n.segments[e].path,b2(t[0]))),i++;continue}const s=tg(o)?o.outlets[at]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&iE(a)?(r.push(new Jp(s,b2(a))),i+=2):(r.push(new Jp(s,{})),i++)}return new $t(r,{})}function pY(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=MD(new $t([],{}),0,r))}),e}function b2(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function C2(n,e,t){return n==t.path&&ss(e,t.parameters)}const rg="imperative";class as{constructor(e,t){this.id=e,this.url=t}}class sE extends as{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ou extends as{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ig extends as{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hd extends as{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class aE extends as{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class T2 extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gY extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mY extends as{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _Y extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yY extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vY{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EY{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IY{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wY{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bY{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CY{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D2{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ND{}class xD{constructor(e){this.url=e}}class TY{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new og,this.attachRef=null}}let og=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new TY,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class A2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=OD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=OD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kD(e,this._root).map(t=>t.value)}}function OD(n,e){if(n===e.value)return e;for(const t of e.children){const r=OD(n,t);if(r)return r}return null}function kD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=kD(n,t);if(r.length)return r.unshift(e),r}return[]}class Ks{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class S2 extends A2{constructor(e,t){super(e),this.snapshot=t,VD(this,e)}toString(){return this.snapshot.toString()}}function R2(n,e){const t=function DY(n,e){const s=new uE([],{},{},"",{},at,e,null,{});return new M2("",new Ks(s,[]))}(0,e),r=new ne([new Jp("",{})]),i=new ne({}),o=new ne({}),s=new ne({}),a=new ne(""),u=new qd(r,i,s,a,o,at,e,t.root);return u.snapshot=t.root,new S2(new Ks(u,[]),t)}class qd{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(d=>d[Yp]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>jd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>jd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function P2(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function AY(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uE{get title(){return this.data?.[Yp]}constructor(e,t,r,i,o,s,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class M2 extends A2{constructor(e,t){super(t),this.url=e,VD(this,t)}toString(){return N2(this._root)}}function VD(n,e){e.value._routerState=n,e.children.forEach(t=>VD(n,t))}function N2(n){const e=n.children.length>0?` { ${n.children.map(N2).join(", ")} } `:"";return`${n.value}${e}`}function FD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ss(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ss(e.params,t.params)||n.paramsSubject.next(t.params),function HQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ss(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ss(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function LD(n,e){const t=ss(n.params,e.params)&&function WQ(n,e){return Ac(n,e)&&n.every((t,r)=>ss(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||LD(n.parent,e.parent))}let UD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new Pt,this.deactivateEvents=new Pt,this.attachEvents=new Pt,this.detachEvents=new Pt,this.parentContexts=Pe(og),this.location=Pe(Do),this.changeDetector=Pe(sy),this.environmentInjector=Pe(eo),this.inputBinder=Pe(cE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new SY(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[oi]})}return n})();class SY{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qd?this.route:e===og?this.childContexts:this.parent.get(e,t)}}const cE=new we("");let x2=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=bD([r.queryParams,r.params,r.data]).pipe(Ue(([o,s,a],u)=>(a={...o,...s,...a},0===u?k(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function r6(n){const e=ft(n);if(!e)return null;const t=new Tf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();function sg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function PY(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sg(n,r,i);return sg(n,r)})}(n,e,t);return new Ks(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sg(n,a)),s}}const r=function MY(n){return new qd(new ne(n.url),new ne(n.params),new ne(n.queryParams),new ne(n.fragment),new ne(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>sg(n,o));return new Ks(r,i)}}const BD="ngNavigationCancelingError";function O2(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Sc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=k2(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function k2(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[BD]=!0,r.cancellationCode=e,t&&(r.url=t),r}function V2(n){return n&&n[BD]}let F2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Vi({type:n,selectors:[["ng-component"]],standalone:!0,features:[jM],decls:1,vars:0,template:function(r,i){1&r&&Nn(0,"router-outlet")},dependencies:[UD],encapsulation:2})}return n})();function jD(n){const e=n.children&&n.children.map(jD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==at&&(t.component=F2),t}function Po(n){return n.outlet||at}function ag(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class UY{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),FD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zd(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zd(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zd(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=zd(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new CY(o.value.snapshot))}),e.children.length&&this.forwardEvent(new wY(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(FD(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),FD(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ag(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class L2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lE{constructor(e,t){this.component=e,this.route=t}}function BY(n,e,t){const r=n._root;return ug(r,e?e._root:null,t,[r.value])}function Gd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function UE(n){return null!==ia(n)}(n)?e.get(n):n:r}function ug(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=zd(e);return n.children.forEach(s=>{(function $Y(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function HY(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ac(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ac(n.url,e.url)||!ss(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LD(n,e)||!ss(n.queryParams,e.queryParams);default:return!LD(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new L2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ug(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lE(a.outlet.component,s))}else s&&cg(e,a,i),i.canActivateChecks.push(new L2(r)),ug(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>cg(a,t.getContext(s),i)),i}function cg(n,e,t){const r=zd(n),i=n.value;Object.entries(r).forEach(([o,s])=>{cg(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new lE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function lg(n){return"function"==typeof n}function U2(n){return n instanceof Ry||"EmptyError"===n?.name}const dE=Symbol("INITIAL_VALUE");function Wd(){return Ue(n=>bD(n.map(e=>e.pipe(Xu(1),My(dE)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===dE)return dE;if(!1===t||t instanceof $d)return t}return!0}),Ro(e=>e!==dE),Xu(1)))}function B2(n){return function Or(...n){return Mi(n)}(Rr(e=>{if(Sc(e))throw O2(0,e)}),Oe(e=>!0===e))}class hE{constructor(e){this.segmentGroup=e||null}}class j2{constructor(e){this.urlTree=e}}function Zd(n){return Kp(new hE(n))}function $2(n){return Kp(new j2(n))}class cJ{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new S(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[at])return Kp(new S(4e3,!1));i=i.children[at]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new $d(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new $t(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const $D={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lJ(n,e,t,r,i){const o=HD(n,e,t);return o.matched?(r=function xY(n,e){return n.providers&&!n._injector&&(n._injector=u0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function sJ(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(s=>{const a=Gd(s,n);return iu(function KY(n){return n&&lg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Wd(),B2()):k(!0)}(r,e,t).pipe(Oe(s=>!0===s?o:{...$D}))):k(o)}function HD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...$D}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$Q)(t,n,e);if(!i)return{...$D};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function H2(n,e,t,r){return t.length>0&&function fJ(n,e,t){return t.some(r=>fE(n,e,r)&&Po(r)!==at)}(n,t,r)?{segmentGroup:new $t(e,hJ(r,new $t(t,n.children))),slicedSegments:[]}:0===t.length&&function pJ(n,e,t){return t.some(r=>fE(n,e,r))}(n,t,r)?{segmentGroup:new $t(n.segments,dJ(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new $t(n.segments,n.children),slicedSegments:t}}function dJ(n,e,t,r,i){const o={};for(const s of r)if(fE(n,t,s)&&!i[Po(s)]){const a=new $t([],{});o[Po(s)]=a}return{...i,...o}}function hJ(n,e){const t={};t[at]=e;for(const r of n)if(""===r.path&&Po(r)!==at){const i=new $t([],{});t[Po(r)]=i}return t}function fE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class yJ{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new cJ(this.urlSerializer,this.urlTree)}noMatchError(e){return new S(4002,!1)}recognize(){const e=H2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,at).pipe(Dc(t=>{if(t instanceof j2)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof hE?this.noMatchError(t):t}),Oe(t=>{const r=new uE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,{}),i=new Ks(r,t),o=new M2("",i),s=function uY(n,e,t=null,r=null){return v2(y2(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,at).pipe(Dc(r=>{throw r instanceof hE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=P2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return D(i).pipe(Qp(o=>{const s=r.children[o],a=function FY(n,e){const t=n.filter(r=>Po(r)===e);return t.push(...n.filter(r=>Po(r)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),Ny((o,s)=>(o.push(...s),o)),Py(null),function LQ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ro((i,o)=>n(i,o,r)):Yt,TD(1),t?Py(e):g1(()=>new Ry))}(),Tn(o=>{if(null===o)return Zd(r);const s=z2(o);return function vJ(n){n.sort((e,t)=>e.value.outlet===at?-1:t.value.outlet===at?1:e.value.outlet.localeCompare(t.value.outlet))}(s),k(s)}))}processSegment(e,t,r,i,o,s){return D(t).pipe(Qp(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(Dc(u=>{if(u instanceof hE)return k(null);throw u}))),ka(a=>!!a),Dc(a=>{if(U2(a))return function mJ(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?k([]):Zd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return function gJ(n,e,t,r){return!!(Po(n)===r||r!==at&&fE(e,t,n))&&("**"===n.path||HD(e,n,t).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):Zd(i):Zd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$2(o):this.applyRedirects.lineralizeSegments(r,o).pipe(Tn(s=>{const a=new $t(s,{});return this.processSegment(e,t,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:g}=HD(t,i,o);if(!a)return Zd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?$2(m):this.applyRedirects.lineralizeSegments(i,m).pipe(Tn(v=>this.processSegment(e,r,t,v.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?a2(i).parameters:{};a=k({snapshot:new uE(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,q2(r),Po(r),r.component??r._loadedComponent??null,r,G2(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=lJ(t,r,i,e).pipe(Oe(({matched:u,consumedSegments:d,remainingSegments:g,parameters:m})=>u?{snapshot:new uE(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,q2(r),Po(r),r.component??r._loadedComponent??null,r,G2(r)),consumedSegments:d,remainingSegments:g}:null));return a.pipe(Ue(u=>null===u?Zd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ue(({routes:d})=>{const g=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:I}=u,{segmentGroup:C,slicedSegments:P}=H2(t,v,I,d);if(0===P.length&&C.hasChildren())return this.processChildren(g,d,C).pipe(Oe(G=>null===G?null:[new Ks(m,G)]));if(0===d.length&&0===P.length)return k([new Ks(m,[])]);const N=Po(r)===o;return this.processSegment(g,d,C,P,N?at:o,!0).pipe(Oe(G=>[new Ks(m,G)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function oJ(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(s=>{const a=Gd(s,n);return iu(function qY(n){return n&&lg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Wd(),B2())}(e,t,r).pipe(Tn(i=>i?this.configLoader.loadChildren(e,t).pipe(Rr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function uJ(n){return Kp(k2(!1,3))}())):k({routes:[],injector:e})}}function EJ(n){const e=n.value.routeConfig;return e&&""===e.path}function z2(n){const e=[],t=new Set;for(const r of n){if(!EJ(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=z2(r.children);e.push(new Ks(r.value,i))}return e.filter(r=>!t.has(r))}function q2(n){return n.data||{}}function G2(n){return n.resolve||{}}function W2(n){return"string"==typeof n.title||null===n.title}function zD(n){return Ue(e=>{const t=n(e);return t?D(t).pipe(Oe(()=>e)):k(e)})}const Kd=new we("ROUTES");let qD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Pe(kN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=iu(t.loadComponent()).pipe(Oe(Z2),Rr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),DD(()=>{this.componentLoaders.delete(t)})),i=new o2(r,()=>new te).pipe(CD());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function AJ(n,e,t,r){return iu(n.loadChildren()).pipe(Oe(Z2),Tn(i=>i instanceof UM||Array.isArray(i)?k(i):D(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(Kd,[],{optional:!0,self:!0}).flat()),{routes:s.map(jD),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(DD(()=>{this.childrenLoaders.delete(r)})),s=new o2(o,()=>new te).pipe(CD());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z2(n){return function SJ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let pE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=Pe(qD),this.environmentInjector=Pe(eo),this.urlSerializer=Pe(Xp),this.rootContexts=Pe(og),this.inputBindingEnabled=null!==Pe(cE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new EY(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new vY(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ne({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:rg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ro(o=>0!==o.id),Oe(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),Ue(o=>{this.currentTransition=o;let s=!1,a=!1;return k(o).pipe(Rr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ue(u=>{const d=u.currentBrowserUrl.toString(),g=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new Hd(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),hr}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return k(u).pipe(Ue(v=>{const I=this.transitions?.getValue();return this.events.next(new sE(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),I!==this.transitions?.getValue()?hr:Promise.resolve(v)}),function IJ(n,e,t,r,i,o){return Tn(s=>function _J(n,e,t,r,i,o,s="emptyOnly"){return new yJ(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Oe(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Rr(v=>{o.targetSnapshot=v.targetSnapshot,o.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const I=new T2(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(I)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:I,source:C,restoredState:P,extras:N}=u,G=new sE(v,this.urlSerializer.serialize(I),C,P);this.events.next(G);const F=R2(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:F,urlAfterRedirects:I,extras:{...N,skipLocationChange:!1,replaceUrl:!1}},k(o)}{const v="";return this.events.next(new Hd(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),hr}}),Rr(u=>{const d=new gY(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Oe(u=>(this.currentTransition=o={...u,guards:BY(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function YY(n,e){return Tn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?k({...t,guardsResult:!0}):function JY(n,e,t,r){return D(n).pipe(Tn(i=>function iJ(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?k(o.map(a=>{const u=ag(e)??i,d=Gd(a,u);return iu(function ZY(n){return n&&lg(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(ka())})).pipe(Wd()):k(!0)}(i.component,i.route,t,e,r)),ka(i=>!0!==i,!0))}(s,r,i,n).pipe(Tn(a=>a&&function zY(n){return"boolean"==typeof n}(a)?function XY(n,e,t,r){return D(e).pipe(Qp(i=>_b(function tJ(n,e){return null!==n&&e&&e(new IY(n)),k(!0)}(i.route.parent,r),function eJ(n,e){return null!==n&&e&&e(new bY(n)),k(!0)}(i.route,r),function rJ(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function jY(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>i2(()=>k(s.guards.map(u=>{const d=ag(s.node)??t,g=Gd(u,d);return iu(function WY(n){return n&&lg(n.canActivateChild)}(g)?g.canActivateChild(r,n):d.runInContext(()=>g(r,n))).pipe(ka())})).pipe(Wd())));return k(o).pipe(Wd())}(n,i.path,t),function nJ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(o=>i2(()=>{const s=ag(e)??t,a=Gd(o,s);return iu(function GY(n){return n&&lg(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(ka())}));return k(i).pipe(Wd())}(n,i.route,t))),ka(i=>!0!==i,!0))}(r,o,n,e):k(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Rr(u=>{if(o.guardsResult=u.guardsResult,Sc(u.guardsResult))throw O2(0,u.guardsResult);const d=new mY(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Ro(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),zD(u=>{if(u.guards.canActivateChecks.length)return k(u).pipe(Rr(d=>{const g=new _Y(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),Ue(d=>{let g=!1;return k(d).pipe(function wJ(n,e){return Tn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let o=0;return D(i).pipe(Qp(s=>function bJ(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!W2(i)&&(o[Yp]=i.title),function CJ(n,e,t,r){const i=function TJ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const o={};return D(i).pipe(Tn(s=>function DJ(n,e,t,r){const i=ag(e)??r,o=Gd(n,i);return iu(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(ka(),Rr(a=>{o[s]=a}))),TD(1),function UQ(n){return Oe(()=>n)}(o),Dc(s=>U2(s)?hr:Kp(s)))}(o,n,e,r).pipe(Oe(s=>(n._resolvedData=s,n.data=P2(n,t).resolve,i&&W2(i)&&(n.data[Yp]=i.title),null)))}(s.route,r,n,e)),Rr(()=>o++),TD(1),Tn(s=>o===i.length?k(t):hr))})}(t.paramsInheritanceStrategy,this.environmentInjector),Rr({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",2)}}))}),Rr(d=>{const g=new yY(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),zD(u=>{const d=g=>{const m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(Rr(v=>{g.component=v}),Oe(()=>{})));for(const v of g.children)m.push(...d(v));return m};return bD(d(u.targetSnapshot.root)).pipe(Py(),Xu(1))}),zD(()=>this.afterPreactivation()),Oe(u=>{const d=function RY(n,e,t){const r=sg(n,e._root,t?t._root:void 0);return new S2(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:d},o}),Rr(()=>{this.events.next(new ND)}),((n,e,t,r)=>Oe(i=>(new UY(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Xu(1),Rr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ou(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function BQ(n){return J((e,t)=>{Cn(n).subscribe(me(t,()=>t.complete(),Ne)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Rr(u=>{throw u}))),DD(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Dc(u=>{if(a=!0,V2(u))this.events.next(new ig(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function NY(n){return V2(n)&&Sc(n.url)}(u)?this.events.next(new xD(u.url)):o.resolve(!1);else{this.events.next(new aE(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(d){o.reject(d)}}return hr}))}))}cancelNavigationTransition(t,r,i){const o=new ig(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K2(n){return n!==rg}let Q2=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===at);return r}getResolvedTitleForRoute(t){return t.data[Yp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return Pe(RJ)},providedIn:"root"})}return n})(),RJ=(()=>{class n extends Q2{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(pe(n1))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return Pe(NJ)},providedIn:"root"})}return n})();class MJ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let NJ=(()=>{class n extends MJ{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=sr(n)))(i||n)}}();static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const gE=new we("",{providedIn:"root",factory:()=>({})});let xJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:function(){return Pe(OJ)},providedIn:"root"})}return n})(),OJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(dg||{});function Y2(n,e){n.events.pipe(Ro(t=>t instanceof ou||t instanceof ig||t instanceof aE||t instanceof Hd),Oe(t=>t instanceof ou||t instanceof Hd?dg.COMPLETE:t instanceof ig&&(0===t.code||1===t.code)?dg.REDIRECTING:dg.FAILED),Ro(t=>t!==dg.REDIRECTING),Xu(1)).subscribe(()=>{e()})}function kJ(n){throw n}function VJ(n,e,t){return e.parse("/")}const FJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let so=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Pe(xN),this.isNgZoneEnabled=!1,this._events=new te,this.options=Pe(gE,{optional:!0})||{},this.pendingTasks=Pe(ON),this.errorHandler=this.options.errorHandler||kJ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||VJ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Pe(xJ),this.routeReuseStrategy=Pe(PJ),this.titleStrategy=Pe(Q2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Pe(Kd,{optional:!0})?.flat()??[],this.navigationTransitions=Pe(pE),this.urlSerializer=Pe(Xp),this.location=Pe(B0),this.componentInputBindingEnabled=!!Pe(cE,{optional:!0}),this.eventsSubscription=new bt,this.isNgZoneEnabled=Pe(Mt)instanceof Mt&&Mt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new $d,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=R2(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(J2(r)&&this._events.next(r));if(r instanceof sE)K2(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Hd)this.rawUrlTree=i.rawUrl;else if(r instanceof T2){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof ND)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ig)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof xD){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||K2(i.source)};this.scheduleNavigation(o,rg,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof aE&&this.restoreHistory(i,!0),r instanceof ou&&(this.navigated=!0),J2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),rg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:s;let m,g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...o};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}null!==g&&(g=this.removeEmptyProps(g));try{m=y2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return v2(m,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,rg,null,r)}navigate(t,r={skipLocationChange:!1}){return function UJ(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new S(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...FJ}:!1===r?{...LJ}:r,Sc(t))return c2(this.currentUrlTree,t,i);const o=this.parseUrl(t);return c2(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,d;s?(a=s.resolve,u=s.reject,d=s.promise):d=new Promise((m,v)=>{a=m,u=v});const g=this.pendingTasks.add();return Y2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J2(n){return!(n instanceof ND||n instanceof xD)}class X2{}let $J=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ro(t=>t instanceof ou),Qp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=u0(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return D(i).pipe(br())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const o=i.pipe(Tn(s=>null===s?k(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?D([o,this.loader.loadComponent(r)]).pipe(br()):o})}static#e=this.\u0275fac=function(r){return new(r||n)(pe(so),pe(kN),pe(eo),pe(X2),pe(qD))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const WD=new we("");let eU=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ou?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Hd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof D2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new D2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function CR(){throw new Error("invalid")}()};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac})}return n})();function Qs(n,e){return{\u0275kind:n,\u0275providers:e}}function nU(){const n=Pe(zr);return e=>{const t=n.get(Ku);if(e!==t.components[0])return;const r=n.get(so),i=n.get(rU);1===n.get(ZD)&&r.initialNavigation(),n.get(iU,null,ht.Optional)?.setUpPreloading(),n.get(WD,null,ht.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const rU=new we("",{factory:()=>new te}),ZD=new we("",{providedIn:"root",factory:()=>1}),iU=new we("");function GJ(n){return Qs(0,[{provide:iU,useExisting:$J},{provide:X2,useExisting:n}])}const oU=new we("ROUTER_FORROOT_GUARD"),ZJ=[B0,{provide:Xp,useClass:AD},so,og,{provide:qd,useFactory:function tU(n){return n.routerState.root},deps:[so]},qD,[]];function KJ(){return new $N("Router",so)}let sU=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ZJ,[],{provide:Kd,multi:!0,useValue:t},{provide:oU,useFactory:XJ,deps:[[so,new Sa,new El]]},{provide:gE,useValue:r||{}},r?.useHash?{provide:Yu,useClass:u6}:{provide:Yu,useClass:vx},{provide:WD,useFactory:()=>{const n=Pe(Az),e=Pe(Mt),t=Pe(gE),r=Pe(pE),i=Pe(Xp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eU(i,r,n,e,t)}},r?.preloadingStrategy?GJ(r.preloadingStrategy).\u0275providers:[],{provide:$N,multi:!0,useFactory:KJ},r?.initialNavigation?eX(r):[],r?.bindToComponentInputs?Qs(8,[x2,{provide:cE,useExisting:x2}]).\u0275providers:[],[{provide:aU,useFactory:nU},{provide:P0,multi:!0,useExisting:aU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Kd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(pe(oU,8))};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({})}return n})();function XJ(n){return"guarded"}function eX(n){return["disabled"===n.initialNavigation?Qs(3,[{provide:w0,multi:!0,useFactory:()=>{const e=Pe(so);return()=>{e.setUpLocationChangeListener()}}},{provide:ZD,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Qs(2,[{provide:ZD,useValue:0},{provide:w0,multi:!0,deps:[zr],useFactory:e=>{const t=e.get(s6,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(so),o=e.get(rU);Y2(i,()=>{r(!0)}),e.get(pE).afterPreactivation=()=>(r(!0),o.closed?k(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const aU=new we("");let KD=(()=>{class n{constructor(t){this.db=t,this.productCollection=t.collection("products")}getProductData(){return this.db.collection("products").snapshotChanges()}addProduct(t){var r=this;return(0,oe.Z)(function*(){return r.db.collection("products").add(t)})()}getProductByID(t){return this.db.collection("products").doc(t).snapshotChanges().pipe(Oe(r=>{const i=r.payload.data();if(i)return{id:r.payload.id,...i}}))}getProductUpdate(t,r){return this.db.collection("products").doc(t).update(r)}deleteProduct(t){return this.db.collection("products").doc(t).delete()}static#e=this.\u0275fac=function(r){return new(r||n)(pe(AF))};static#t=this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nX(n,e){if(1&n&&(xe(0,"div",4)(1,"div",5),Nn(2,"img",6),xe(3,"div",7)(4,"h5",8),Je(5),ke(),xe(6,"button",9),Je(7," WhatsApp "),ul(),xe(8,"svg",10),Nn(9,"path",11)(10,"path",12)(11,"path",13)(12,"path",14)(13,"path",15),ke()()()()()),2&n){const t=e.$implicit;Sn(2),q_("src",t.image,gf),Sn(3),Ns(t.productName)}}function rX(n,e){if(1&n){const t=Ww();xe(0,"div",16)(1,"button",17),_n("click",function(){bs(t);const i=no();return Cs(null==i.modalRef?null:i.modalRef.hide())}),xe(2,"span",18),Je(3,"\xd7"),ke()()(),xe(4,"div",19)(5,"form",20,21)(7,"div",22)(8,"label",23),Je(9,"WhatsApp Number"),ke(),xe(10,"input",24),_n("ngModelChange",function(i){return bs(t),Cs(no().userPhoneNumber=i)}),ke()(),xe(11,"div",25)(12,"button",26),_n("click",function(){return bs(t),Cs(no().closeFirstModal())}),Je(13,"Cancel"),ke(),xe(14,"button",27),_n("click",function(){return bs(t),Cs(no().redirectToWhatsApp())}),Je(15,"Submit"),ke()()()()}if(2&n){const t=no();Sn(10),Ti("ngModel",t.userPhoneNumber)}}let iX=(()=>{class n{constructor(t,r,i){this.adminService=t,this.modalService=r,this.bsModalRef=i,this.productData=[],this.userPhoneNumber="",this.adminService.getProductData().subscribe(o=>{this.productData=o.map(s=>{const a=s.payload.doc.data();return{id:s.payload.doc.id,...a}})})}openModal(t){this.modalService.show(t)}redirectToWhatsApp(){if(""!==this.userPhoneNumber.trim()){const r=`https://wa.me/${this.userPhoneNumber}?text=${encodeURIComponent("Hello! I would like to chat with you.")}`;window.open(r,"_blank"),this.bsModalRef.hide()}else alert("Please enter a valid phone number.")}closeFirstModal(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(KD),ue(Bp),ue(Uv))};static#t=this.\u0275cmp=Vi({type:n,selectors:[["app-products"]],decls:8,vars:1,consts:[[1,"fs-1","fst-italic"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col  text-center",4,"ngFor","ngForOf"],["whatsappModal",""],[1,"col","text-center"],[1,"card"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title","fst-italic"],[1,"button2"],["viewBox","0 0 48 48","y","0px","x","0px","xmlns","http://www.w3.org/2000/svg"],["d","M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z","fill","#fff"],["d","M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z","fill","#fff"],["d","M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z","fill","#cfd8dc"],["d","M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z","fill","#40c351"],["clip-rule","evenodd","d","M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z","fill-rule","evenodd","fill","#fff"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"row","g-3"],["whatsappForm","ngForm"],[1,"col-md-12"],["for","productName",1,"form-label"],["type","text","id","name","name","userPhoneNumber","placeholder","Enter your phone number",1,"form-control","shadow-none",3,"ngModel","ngModelChange"],[1,"col-12","text-end"],["type","button",1,"btn","btn-danger","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(r,i){1&r&&(xe(0,"div")(1,"div")(2,"h1",0),Je(3," Products "),ke()(),xe(4,"div",1),bo(5,nX,14,2,"div",2),ke()(),bo(6,rX,16,1,"ng-template",null,3,mN)),2&r&&(Sn(5),Ti("ngForOf",i.productData))},dependencies:[Y0,gD,jp,iD,oD,pD,Jv],styles:['.card[_ngcontent-%COMP%]{--bs-card-border-color: #b8a267;--bs-card-bg: #F2EFE3 !important}.button2[_ngcontent-%COMP%]{display:inline-block;transition:all .2s ease-in;position:relative;overflow:hidden;z-index:1;color:#090909;padding:.7em 3.3em .7em 1.7em;font-size:18px;border-radius:.5em;background:#f9f7f1;border:1px solid #e8e8e8}.button2[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{height:30px;position:absolute;padding:0 5px;margin-top:-4px}.button2[_ngcontent-%COMP%]:active{color:#666;box-shadow:inset 4px 4px 12px #c5c5c5,inset -4px -4px 12px #fff}.button2[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;transform:translate(-50%) scaleY(1) scaleX(1.25);top:100%;width:140%;height:180%;background-color:#d9d1ae;border-radius:50%;display:block;transition:all .5s .1s cubic-bezier(.55,0,.1,1);z-index:-1}.button2[_ngcontent-%COMP%]:after{content:"";position:absolute;left:55%;transform:translate(-50%) scaleY(1) scaleX(1.45);top:180%;width:160%;height:190%;background-color:#d9d1ae;border-radius:50%;display:block;transition:all .5s .1s cubic-bezier(.55,0,.1,1);z-index:-1}.button2[_ngcontent-%COMP%]:hover{color:#fff;border:1px solid #d9d1ae}.button2[_ngcontent-%COMP%]:hover:before{top:-35%;background-color:#d9d1ae;transform:translate(-50%) scaleY(1.3) scaleX(.8)}.button2[_ngcontent-%COMP%]:hover:after{top:-45%;background-color:#d9d1ae;transform:translate(-50%) scaleY(1.3) scaleX(.8)}']})}return n})(),uU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Vi({type:n,selectors:[["app-home"]],decls:51,vars:0,consts:[[1,"container-margin"],[1,"row"],[1,"col-md-12","mb-4"],[1,"fs-5"],[1,"row","align-items-center","home","mb-4"],[1,"col-md-6","col-sm-12"],[1,"fs-1","fst-italic"],[1,"fs-4","fw-lighter"],[1,"row","align-items-center","mb-4","about"],[1,"fs-6","fw-lighter","text-break"],[1,"col-md-6","col-sm-12","text-center"],[1,"mt-5","mb-5"],[1,"mb-4"],[1,"col-md-4"],[1,"col-md-3"],[1,"col-md-2"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),Je(4,"SAM ART GALLERY"),ke()()(),xe(5,"div",4)(6,"div",5)(7,"h1",6),Je(8," Make "),Nn(9,"br"),Je(10," milestones "),Nn(11,"br"),Je(12," memorable"),ke(),xe(13,"p",7),Je(14," Celebrate with handmade "),Nn(15,"br"),Je(16," custom jewelry"),ke()(),Nn(17,"div",5),ke(),xe(18,"div",8)(19,"div",5)(20,"h1",6),Je(21," Our Story"),ke(),xe(22,"p",9),Je(23," Hello from Studio Moone! We are a small group of passionate jewelry makers who like making delicate and personalized jewelry for meaningful moments such as weddings, engagements, and other milestones "),Nn(24,"br"),Je(25," Our pieces are thoughtfully designed and one of a kind. You can be assured that no two pieces are ever alike, making it even more special as it is passed on from generation to generation."),ke()(),Nn(26,"div",10),ke(),Nn(27,"app-products"),xe(28,"div",11)(29,"div",12)(30,"h5"),Je(31,"SAM ART GALLERY"),ke()(),xe(32,"div",1)(33,"div",13)(34,"h1",6),Je(35,"Get in Touch"),ke()(),xe(36,"div",14)(37,"h6"),Je(38,"Mailing Address"),ke(),xe(39,"p"),Je(40,"123 Anywhere St., Any City, State, Country 12345"),ke()(),xe(41,"div",14)(42,"h6"),Je(43,"Email Address"),ke(),xe(44,"p"),Je(45,"hello@reallygreatsite.com"),ke()(),xe(46,"div",15)(47,"h6"),Je(48,"Phone Number"),ke(),xe(49,"p"),Je(50,"(123) 456 7890"),ke()()()()())},dependencies:[iX],styles:[".container-margin[_ngcontent-%COMP%]{margin:48px 150px 0}.home[_ngcontent-%COMP%]{height:78vh}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:480px;height:420px}.about[_ngcontent-%COMP%]{height:78vh}.about[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;height:400px}@media (max-width: 575.98px){.container-margin[_ngcontent-%COMP%]{margin:20px}.home[_ngcontent-%COMP%]{height:78vh}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:274px;height:200px}.about[_ngcontent-%COMP%]{height:118vh}.about[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:274px;height:200px}}"]})}return n})();function oX(n,e){1&n&&(xe(0,"div",20),Je(1," Name is required! "),ke())}function sX(n,e){if(1&n&&(xe(0,"div",20),Je(1),ke()),2&n){const t=no(2);Sn(1),K_(" Name must contain min. ",null==t.productForm.controls.productName||null==t.productForm.controls.productName.errors||null==t.productForm.controls.productName.errors.minlength?null:t.productForm.controls.productName.errors.minlength.requiredLength," characters! ")}}function aX(n,e){if(1&n&&(xe(0,"span"),bo(1,oX,2,0,"div",19),bo(2,sX,2,1,"div",19),ke()),2&n){const t=no();Sn(1),Ti("ngIf",null==t.productForm.controls.productName||null==t.productForm.controls.productName.errors?null:t.productForm.controls.productName.errors.required),Sn(1),Ti("ngIf",null==t.productForm.controls.productName||null==t.productForm.controls.productName.errors?null:t.productForm.controls.productName.errors.minlength)}}function uX(n,e){1&n&&(xe(0,"div",20),Je(1," price is required! "),ke())}function cX(n,e){if(1&n&&(xe(0,"span"),bo(1,uX,2,0,"div",19),ke()),2&n){const t=no();Sn(1),Ti("ngIf",null==t.productForm.controls.price||null==t.productForm.controls.price.errors?null:t.productForm.controls.price.errors.required)}}function lX(n,e){1&n&&(xe(0,"div",20),Je(1," Image is required! "),ke())}function dX(n,e){if(1&n&&(xe(0,"span"),bo(1,lX,2,0,"div",19),ke()),2&n){const t=no();Sn(1),Ti("ngIf",null==t.productForm.controls.image||null==t.productForm.controls.image.errors?null:t.productForm.controls.image.errors.required)}}let cU=(()=>{class n{constructor(t,r){this._productService=t,this.bsModalRef=r,this.event=new Pt,this.isSubmitted=!1,this.editMode=!1,this.productForm=new Wv({productName:new Zp(null,[$p.required,$p.minLength(3),$p.maxLength(30)]),price:new Zp(null,[$p.required]),image:new Zp(null,[$p.required])})}ngOnInit(){this.checkEdit()}fileUpload(t){if(t.target.files[0]){var r=new FileReader;r.onload=i=>{this.imageDisplay=i.target.result,this.productForm.patchValue({image:i.target.result})},r.readAsDataURL(t.target.files[0])}}checkEdit(){this.data&&(this.id=this.data.id,this.editMode=!0,this.title="Product",this._productService.getProductByID(this.id).subscribe({next:t=>{t&&(this.productForm.patchValue(t),this.imageDisplay=t.image)},error:t=>{alert(t)}}))}saveCategory(){if(this.isSubmitted=!0,this.productForm.invalid)return;const t=this.productForm.value;this.editMode?(this._productService.getProductUpdate(this.id,t),this.bsModalRef.hide()):(this._productService.addProduct(t),this.bsModalRef.hide())}static#e=this.\u0275fac=function(r){return new(r||n)(ue(KD),ue(Uv))};static#t=this.\u0275cmp=Vi({type:n,selectors:[["app-admin-form"]],outputs:{event:"event"},decls:30,vars:8,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-12"],["for","productName",1,"form-label"],["type","text","id","name","formControlName","productName",1,"form-control","shadow-none"],[4,"ngIf"],["for","price",1,"form-label"],["type","text","id","price","formControlName","price",1,"form-control","shadow-none"],["for","image",1,"form-label"],["accept","image/*","id","brand","type","file","id","image",1,"form-control","shadow-none",3,"change"],[1,"col-2","mt-4"],[2,"width","100%",3,"src"],[1,"col-12","text-end"],["type","button",1,"btn","btn-danger","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"h4",1),Je(2),ke(),xe(3,"button",2),_n("click",function(){return i.bsModalRef.hide()}),xe(4,"span",3),Je(5,"\xd7"),ke()()(),xe(6,"div",4)(7,"form",5),_n("ngSubmit",function(){return i.saveCategory()}),xe(8,"div",6)(9,"label",7),Je(10,"Name"),ke(),Nn(11,"input",8),bo(12,aX,3,2,"span",9),ke(),xe(13,"div",6)(14,"label",10),Je(15,"Price"),ke(),Nn(16,"input",11),bo(17,cX,2,1,"span",9),ke(),xe(18,"div",6)(19,"label",12),Je(20,"Image"),ke(),xe(21,"input",13),_n("change",function(s){return i.fileUpload(s)}),ke(),bo(22,dX,2,1,"span",9),xe(23,"div",14),Nn(24,"img",15),ke()(),xe(25,"div",16)(26,"button",17),_n("click",function(){return i.bsModalRef.hide()}),Je(27),ke(),xe(28,"button",18),Je(29),ke()()()()),2&r&&(Sn(2),Ns(i.title),Sn(5),Ti("formGroup",i.productForm),Sn(5),Ti("ngIf",(null==i.productForm.controls.productName?null:i.productForm.controls.productName.errors)&&i.isSubmitted),Sn(5),Ti("ngIf",(null==i.productForm.controls.price?null:i.productForm.controls.price.errors)&&i.isSubmitted),Sn(5),Ti("ngIf",(null==i.productForm.controls.image?null:i.productForm.controls.image.errors)&&i.isSubmitted),Sn(2),Ti("src",i.imageDisplay,gf),Sn(3),Ns(i.closeButton),Sn(2),Ns(i.button))},dependencies:[Nx,gD,jp,iD,oD,Xv,vD]})}return n})();function hX(n,e){if(1&n){const t=Ww();xe(0,"tr",9)(1,"th",12),Je(2),ke(),xe(3,"td"),Je(4),ke(),xe(5,"td"),Je(6),ke(),xe(7,"td")(8,"span"),Nn(9,"img",13),ke()(),xe(10,"td")(11,"div",14)(12,"button",15),_n("click",function(){const o=bs(t).$implicit;return Cs(no().EditModal(o))}),ul(),xe(13,"svg",16),Nn(14,"path",17),ke()(),function cl(){!function mI(){He.lFrame.currentNamespace=null}()}(),xe(15,"button",18),_n("click",function(){const o=bs(t).$implicit;return Cs(no().deleteProduct(o.id))}),ul(),xe(16,"svg",19),Nn(17,"line",20)(18,"line",21),ke(),xe(19,"svg",22)(20,"mask",23),Nn(21,"path",24),ke(),Nn(22,"path",25)(23,"path",26)(24,"path",27),ke(),xe(25,"svg",28),Nn(26,"path",29),ke()()()()()}if(2&n){const t=e.$implicit,r=e.index;Sn(2),Ns(r+1),Sn(2),Ns(t.productName),Sn(2),Ns(t.price),Sn(3),q_("src",t.image,gf)}}const fX=[{path:"",component:uU,pathMatch:"full"},{path:"home",component:uU},{path:"sam-art-gallery",component:(()=>{class n{constructor(t,r){this.adminService=t,this.modalService=r,this.productData=[],this.adminService.getProductData().subscribe(i=>{this.productData=i.map(o=>{const s=o.payload.doc.data();return{id:o.payload.doc.id,...s}})})}openModal(){this.modalRef=this.modalService.show(cU,{initialState:{title:"Product",button:"+ Add",closeButton:"Cancel"}}),this.modalRef.content.closeBtnName="Close",this.modalRef.content.event.subscribe(r=>{this.productData.push(r?.data)})}EditModal(t){this.modalRef=this.modalService.show(cU,{initialState:{title:"Product",button:"+ Edit",closeButton:"Cancel",data:t}}),this.modalRef.content.closeBtnName="Close",this.modalRef.content.event.subscribe(i=>{this.productData.push(i?.data)})}deleteProduct(t){this.adminService.deleteProduct(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ue(KD),ue(Bp))};static#t=this.\u0275cmp=Vi({type:n,selectors:[["app-admin"]],decls:26,vars:1,consts:[[1,"container-margin"],[1,"row","text-center"],[1,"col-md-12","mb-4"],[1,"fs-5"],[1,"clearfix","mb-2"],[1,"float-start"],[1,"card-title"],[1,"btn","btn-outline-secondary","btn-sm","float-end",3,"click"],[1,"table"],[1,"text-center"],[1,"fst-italic"],["class","text-center",4,"ngFor","ngForOf"],["scope","row"],[1,"image",3,"src"],[1,"row"],[1,"editBtn",3,"click"],["height","1em","viewBox","0 0 512 512"],["d","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"],[1,"bin-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 39 7",1,"bin-top"],["stroke-width","4","stroke","white","y2","5","x2","39","y1","5"],["stroke-width","3","stroke","white","y2","1.5","x2","26.0357","y1","1.5","x1","12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 33 39",1,"bin-bottom"],["fill","white","id","path-1-inside-1_8_19"],["d","M0 0H33V35C33 37.2091 31.2091 39 29 39H4C1.79086 39 0 37.2091 0 35V0Z"],["mask","url(#path-1-inside-1_8_19)","fill","white","d","M0 0H33H0ZM37 35C37 39.4183 33.4183 43 29 43H4C-0.418278 43 -4 39.4183 -4 35H4H29H37ZM4 43C-0.418278 43 -4 39.4183 -4 35V0H4V35V43ZM37 0V35C37 39.4183 33.4183 43 29 43V35V0H37Z"],["stroke-width","4","stroke","white","d","M12 6L12 29"],["stroke-width","4","stroke","white","d","M21 6V29"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 89 80",1,"garbage"],["fill","white","d","M20.5 10.5L37.5 15.5L42.5 11.5L51.5 12.5L68.75 0L72 11.5L79.5 12.5H88.5L87 22L68.75 31.5L75.5066 25L86 26L87 35.5L77.5 48L70.5 49.5L80 50L77.5 71.5L63.5 58.5L53.5 68.5L65.5 70.5L45.5 73L35.5 79.5L28 67L16 63L12 51.5L0 48L16 25L22.5 17L20.5 10.5Z"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),Je(4,"SAM ART GALLERY"),ke()()(),xe(5,"div",4)(6,"div",5)(7,"h4",6),Je(8,"Products List"),ke()(),xe(9,"a",7),_n("click",function(){return i.openModal()}),Je(10,"+ Add"),ke()(),xe(11,"table",8)(12,"thead")(13,"tr",9)(14,"th",10),Je(15,"Sr. No"),ke(),xe(16,"th",10),Je(17,"Name"),ke(),xe(18,"th",10),Je(19,"Price"),ke(),xe(20,"th",10),Je(21,"Image"),ke(),xe(22,"th",10),Je(23,"Action"),ke()()(),xe(24,"tbody"),bo(25,hX,27,4,"tr",11),ke()()()),2&r&&(Sn(25),Ti("ngForOf",i.productData))},dependencies:[Y0],styles:['.container-margin[_ngcontent-%COMP%]{margin:48px 150px 0}table[_ngcontent-%COMP%]{--bs-table-bg: #F2EFE3 !important}.image[_ngcontent-%COMP%]{width:15%;height:15%}.editBtn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:20px;border:none;background-color:#ac8b54;display:flex;align-items:center;justify-content:center;box-shadow:0 5px 10px #0000001f;cursor:pointer;position:relative;overflow:hidden;transition:all .3s;margin-left:25%}.editBtn[_ngcontent-%COMP%]:before{content:"";width:200%;height:200%;background-color:#987247;position:absolute;z-index:1;transform:scale(0);transition:all .3s;border-radius:50%;filter:blur(10px)}.editBtn[_ngcontent-%COMP%]:hover:before{transform:scale(1)}.editBtn[_ngcontent-%COMP%]:hover{box-shadow:0 5px 10px #00000056}.editBtn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:17px;fill:#fff;z-index:3;transition:all .2s;transform-origin:bottom}.editBtn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:rotate(-15deg) translate(5px)}.editBtn[_ngcontent-%COMP%]:after{content:"";width:25px;height:1.5px;position:absolute;bottom:19px;left:-5px;background-color:#fff;border-radius:2px;z-index:2;transform:scaleX(0);transform-origin:left;transition:transform .5s ease-out}.editBtn[_ngcontent-%COMP%]:hover:after{transform:scaleX(1);left:0;transform-origin:right}.bin-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:45px;height:45px;border-radius:50%;background-color:#ff5f5f;cursor:pointer;border:2px solid rgb(255,201,201);transition-duration:.3s;position:relative;overflow:hidden}.bin-bottom[_ngcontent-%COMP%]{width:15px;z-index:2}.bin-top[_ngcontent-%COMP%]{width:17px;transform-origin:right;transition-duration:.3s;z-index:2}.bin-button[_ngcontent-%COMP%]:hover   .bin-top[_ngcontent-%COMP%]{transform:rotate(45deg)}.bin-button[_ngcontent-%COMP%]:hover{background-color:red}.bin-button[_ngcontent-%COMP%]:active{transform:scale(.9)}.garbage[_ngcontent-%COMP%]{position:absolute;width:14px;height:auto;z-index:1;opacity:0;transition:all .3s}.bin-button[_ngcontent-%COMP%]:hover   .garbage[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_throw .4s linear}@keyframes _ngcontent-%COMP%_throw{0%{transform:translate(-400%,-700%);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 575.98px){.container-margin[_ngcontent-%COMP%]{margin:20px}.image[_ngcontent-%COMP%]{width:100%;height:100%}.editBtn[_ngcontent-%COMP%]{width:35px;height:35px;margin-left:0}.bin-button[_ngcontent-%COMP%]{width:35px;height:35px}}']})}return n})()}];let pX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n});static#n=this.\u0275inj=nr({imports:[sU.forRoot(fX),sU]})}return n})(),gX=(()=>{class n{constructor(){this.title="resin_jewellery"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Vi({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Nn(0,"router-outlet")},dependencies:[UD]})}return n})(),mX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Gn({type:n,bootstrap:[gX]});static#n=this.\u0275inj=nr({providers:[Bp],imports:[I8,pX,OQ,kQ,W8.initializeApp(Q8_firebase),eq,AZ,xK]})}return n})();v8().bootstrapModule(mX).catch(n=>console.error(n))},106:(ao,Qn,nt)=>{nt.d(Qn,{Z:()=>Jn});var T=nt(58),ze=nt(537),Se=nt(534),ee=nt(879);class bt{constructor(Ke,ot){this._delegate=Ke,this.firebase=ot,(0,Se._addComponent)(Ke,new ze.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Se.deleteApp)(this._delegate)))}_getService(Ke,ot=Se._DEFAULT_ENTRY_NAME){var Xn;this._delegate.checkDestroyed();const er=this._delegate.container.getProvider(Ke);return!er.isInitialized()&&"EXPLICIT"===(null===(Xn=er.getComponent())||void 0===Xn?void 0:Xn.instantiationMode)&&er.initialize(),er.getImmediate({identifier:ot})}_removeServiceInstance(Ke,ot=Se._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(ot)}_addComponent(Ke){(0,Se._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,Se._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pn=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),se=function pt(){const At=function Yn(At){const Ke={},ot={__esModule:!0,initializeApp:function en(je,bn={}){const Ht=Se.initializeApp(je,bn);if((0,T.r3)(Ke,Ht.name))return Ke[Ht.name];const le=new At(Ht,ot);return Ke[Ht.name]=le,le},app:er,registerVersion:Se.registerVersion,setLogLevel:Se.setLogLevel,onLog:Se.onLog,apps:null,SDK_VERSION:Se.SDK_VERSION,INTERNAL:{registerComponent:function Lt(je){const bn=je.name,Ht=bn.replace("-compat","");if(Se._registerComponent(je)&&"PUBLIC"===je.type){const le=(tn=er())=>{if("function"!=typeof tn[Ht])throw pn.create("invalid-app-argument",{appName:bn});return tn[Ht]()};void 0!==je.serviceProps&&(0,T.ZB)(le,je.serviceProps),ot[Ht]=le,At.prototype[Ht]=function(...tn){return this._getService.bind(this,bn).apply(this,je.multipleInstances?tn:[])}}return"PUBLIC"===je.type?ot[Ht]:null},removeApp:function Xn(je){delete Ke[je]},useAsService:function wr(je,bn){return"serverAuth"===bn?null:bn},modularAPIs:Se}};function er(je){if(!(0,T.r3)(Ke,je=je||Se._DEFAULT_ENTRY_NAME))throw pn.create("no-app",{appName:je});return Ke[je]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function St(){return Object.keys(Ke).map(je=>Ke[je])}}),er.App=At,ot}(bt);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:pt,extendNamespace:function Ke(ot){(0,T.ZB)(At,ot)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),At}(),ge=new ee.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const At=self.firebase.SDK_VERSION;At&&At.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Jn=se;!function Tt(At){(0,Se.registerVersion)("@firebase/app-compat","0.2.36",At)}()},534:(ao,Qn,nt)=>{nt.r(Qn),nt.d(Qn,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Ni,_addComponent:()=>Gi,_addOrOverwriteComponent:()=>Tn,_apps:()=>ti,_clearComponents:()=>Vr,_components:()=>Pn,_getProvider:()=>hr,_isFirebaseApp:()=>xo,_isFirebaseServerApp:()=>fu,_registerComponent:()=>br,_removeServiceInstance:()=>No,_serverApps:()=>xi,deleteApp:()=>ko,getApp:()=>na,getApps:()=>xc,initializeApp:()=>Oo,initializeServerApp:()=>gu,onLog:()=>D,registerVersion:()=>M,setLogLevel:()=>L});var T=nt(861),ze=nt(537),Se=nt(879),ee=nt(58);const bt=(S,j)=>j.some(z=>S instanceof z);let an,pn;const se=new WeakMap,ge=new WeakMap,Ne=new WeakMap,lt=new WeakMap,Tt=new WeakMap;let Ke={get(S,j,z){if(S instanceof IDBTransaction){if("done"===j)return ge.get(S);if("objectStoreNames"===j)return S.objectStoreNames||Ne.get(S);if("store"===j)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return en(S[j])},set:(S,j,z)=>(S[j]=z,!0),has:(S,j)=>S instanceof IDBTransaction&&("done"===j||"store"===j)||j in S};function er(S){return"function"==typeof S?function Xn(S){return S!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pt(){return pn||(pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(S)?function(...j){return S.apply(St(this),j),en(se.get(this))}:function(...j){return en(S.apply(St(this),j))}:function(j,...z){const he=S.call(St(this),j,...z);return Ne.set(he,j.sort?j.sort():[j]),en(he)}}(S):(S instanceof IDBTransaction&&function At(S){if(ge.has(S))return;const j=new Promise((z,he)=>{const Qe=()=>{S.removeEventListener("complete",Xe),S.removeEventListener("error",ut),S.removeEventListener("abort",ut)},Xe=()=>{z(),Qe()},ut=()=>{he(S.error||new DOMException("AbortError","AbortError")),Qe()};S.addEventListener("complete",Xe),S.addEventListener("error",ut),S.addEventListener("abort",ut)});ge.set(S,j)}(S),bt(S,function Yn(){return an||(an=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(S,Ke):S)}function en(S){if(S instanceof IDBRequest)return function Jn(S){const j=new Promise((z,he)=>{const Qe=()=>{S.removeEventListener("success",Xe),S.removeEventListener("error",ut)},Xe=()=>{z(en(S.result)),Qe()},ut=()=>{he(S.error),Qe()};S.addEventListener("success",Xe),S.addEventListener("error",ut)});return j.then(z=>{z instanceof IDBCursor&&se.set(z,S)}).catch(()=>{}),Tt.set(j,S),j}(S);if(lt.has(S))return lt.get(S);const j=er(S);return j!==S&&(lt.set(S,j),Tt.set(j,S)),j}const St=S=>Tt.get(S),je=["get","getKey","getAll","getAllKeys","count"],bn=["put","add","delete","clear"],Ht=new Map;function le(S,j){if(!(S instanceof IDBDatabase)||j in S||"string"!=typeof j)return;if(Ht.get(j))return Ht.get(j);const z=j.replace(/FromIndex$/,""),he=j!==z,Qe=bn.includes(z);if(!(z in(he?IDBIndex:IDBObjectStore).prototype)||!Qe&&!je.includes(z))return;const Xe=function(){var ut=(0,T.Z)(function*(zt,...dt){const _i=this.transaction(zt,Qe?"readwrite":"readonly");let ps=_i.store;return he&&(ps=ps.index(dt.shift())),(yield Promise.all([ps[z](...dt),Qe&&_i.done]))[0]});return function(dt){return ut.apply(this,arguments)}}();return Ht.set(j,Xe),Xe}!function ot(S){Ke=S(Ke)}(S=>({...S,get:(j,z,he)=>le(j,z)||S.get(j,z,he),has:(j,z)=>!!le(j,z)||S.has(j,z)}));class tn{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function Yt(S){const j=S.getComponent();return"VERSION"===j?.type}(z)){const he=z.getImmediate();return`${he.library}/${he.version}`}return null}).filter(z=>z).join(" ")}}const Or="@firebase/app",Mi="0.10.6",gt=new Se.Yd("@firebase/app"),Ni="[DEFAULT]",ta={[Or]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ti=new Map,xi=new Map,Pn=new Map;function Gi(S,j){try{S.container.addComponent(j)}catch(z){gt.debug(`Component ${j.name} failed to register with FirebaseApp ${S.name}`,z)}}function Tn(S,j){S.container.addOrOverwriteComponent(j)}function br(S){const j=S.name;if(Pn.has(j))return gt.debug(`There were multiple attempts to register component ${j}.`),!1;Pn.set(j,S);for(const z of ti.values())Gi(z,S);for(const z of xi.values())Gi(z,S);return!0}function hr(S,j){const z=S.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),S.container.getProvider(j)}function No(S,j,z=Ni){hr(S,j).clearInstance(z)}function xo(S){return void 0!==S.options}function fu(S){return void 0!==S.settings}function Vr(){Pn.clear()}const Fn=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class pu{constructor(j,z,he){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=he,this.container.addComponent(new ze.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}class ni extends pu{constructor(j,z,he,Qe){const Xe=void 0!==z.automaticDataCollectionEnabled&&z.automaticDataCollectionEnabled,ut={name:he,automaticDataCollectionEnabled:Xe};super(void 0!==j.apiKey?j:j.options,ut,Qe),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Xe},z),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,z.releaseOnDeref=void 0,M(Or,Mi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(j){this.isDeleted||(this._refCount++,void 0!==j&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(j,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ko(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}const Fr="10.12.3";function Oo(S,j={}){let z=S;"object"!=typeof j&&(j={name:j});const he=Object.assign({name:Ni,automaticDataCollectionEnabled:!1},j),Qe=he.name;if("string"!=typeof Qe||!Qe)throw Fn.create("bad-app-name",{appName:String(Qe)});if(z||(z=(0,ee.aH)()),!z)throw Fn.create("no-options");const Xe=ti.get(Qe);if(Xe){if((0,ee.vZ)(z,Xe.options)&&(0,ee.vZ)(he,Xe.config))return Xe;throw Fn.create("duplicate-app",{appName:Qe})}const ut=new ze.H0(Qe);for(const dt of Pn.values())ut.addComponent(dt);const zt=new pu(z,he,ut);return ti.set(Qe,zt),zt}function gu(S,j){if((0,ee.jU)()&&!(0,ee.n2)())throw Fn.create("invalid-server-app-environment");let z;void 0===j.automaticDataCollectionEnabled&&(j.automaticDataCollectionEnabled=!1),z=xo(S)?S.options:S;const he=Object.assign(Object.assign({},j),z);if(void 0!==he.releaseOnDeref&&delete he.releaseOnDeref,void 0!==j.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const Xe=""+(_i=JSON.stringify(he),[..._i].reduce((ps,Mg)=>Math.imul(31,ps)+Mg.charCodeAt(0)|0,0)),ut=xi.get(Xe);var _i;if(ut)return ut.incRefCount(j.releaseOnDeref),ut;const zt=new ze.H0(Xe);for(const _i of Pn.values())zt.addComponent(_i);const dt=new ni(z,j,Xe,zt);return xi.set(Xe,dt),dt}function na(S=Ni){const j=ti.get(S);if(!j&&S===Ni&&(0,ee.aH)())return Oo();if(!j)throw Fn.create("no-app",{appName:S});return j}function xc(){return Array.from(ti.values())}function ko(S){return hs.apply(this,arguments)}function hs(){return(hs=(0,T.Z)(function*(S){let j=!1;const z=S.name;ti.has(z)?(j=!0,ti.delete(z)):xi.has(z)&&S.decRefCount()<=0&&(xi.delete(z),j=!0),j&&(yield Promise.all(S.container.getProviders().map(he=>he.delete())),S.isDeleted=!0)})).apply(this,arguments)}function M(S,j,z){var he;let Qe=null!==(he=ta[S])&&void 0!==he?he:S;z&&(Qe+=`-${z}`);const Xe=Qe.match(/\s|\//),ut=j.match(/\s|\//);if(Xe||ut){const zt=[`Unable to register library "${Qe}" with version "${j}":`];return Xe&&zt.push(`library name "${Qe}" contains illegal characters (whitespace or "/")`),Xe&&ut&&zt.push("and"),ut&&zt.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void gt.warn(zt.join(" "))}br(new ze.wA(`${Qe}-version`,()=>({library:Qe,version:j}),"VERSION"))}function D(S,j){if(null!==S&&"function"!=typeof S)throw Fn.create("invalid-log-argument");(0,Se.Am)(S,j)}function L(S){(0,Se.Ub)(S)}const ne="firebase-heartbeat-database",k=1,Ce="firebase-heartbeat-store";let We=null;function Ue(){return We||(We=function Lt(S,j,{blocked:z,upgrade:he,blocking:Qe,terminated:Xe}={}){const ut=indexedDB.open(S,j),zt=en(ut);return he&&ut.addEventListener("upgradeneeded",dt=>{he(en(ut.result),dt.oldVersion,dt.newVersion,en(ut.transaction),dt)}),z&&ut.addEventListener("blocked",dt=>z(dt.oldVersion,dt.newVersion,dt)),zt.then(dt=>{Xe&&dt.addEventListener("close",()=>Xe()),Qe&&dt.addEventListener("versionchange",_i=>Qe(_i.oldVersion,_i.newVersion,_i))}).catch(()=>{}),zt}(ne,k,{upgrade:(S,j)=>{if(0===j)try{S.createObjectStore(Ce)}catch(z){console.warn(z)}}}).catch(S=>{throw Fn.create("idb-open",{originalErrorMessage:S.message})})),We}function nn(){return(nn=(0,T.Z)(function*(S){try{const z=(yield Ue()).transaction(Ce),he=yield z.objectStore(Ce).get(Ct(S));return yield z.done,he}catch(j){if(j instanceof ee.ZR)gt.warn(j.message);else{const z=Fn.create("idb-get",{originalErrorMessage:j?.message});gt.warn(z.message)}}})).apply(this,arguments)}function Ze(S,j){return rt.apply(this,arguments)}function rt(){return(rt=(0,T.Z)(function*(S,j){try{const he=(yield Ue()).transaction(Ce,"readwrite");yield he.objectStore(Ce).put(j,Ct(S)),yield he.done}catch(z){if(z instanceof ee.ZR)gt.warn(z.message);else{const he=Fn.create("idb-set",{originalErrorMessage:z?.message});gt.warn(he.message)}}})).apply(this,arguments)}function Ct(S){return`${S.name}!${S.options.appId}`}class Ot{constructor(j){this.container=j,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new ra(z),this._heartbeatsCachePromise=this._storage.read().then(he=>(this._heartbeatsCache=he,he))}triggerHeartbeat(){var j=this;return(0,T.Z)(function*(){var z,he;const Xe=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=$e();if((null!=(null===(z=j._heartbeatsCache)||void 0===z?void 0:z.heartbeats)||(j._heartbeatsCache=yield j._heartbeatsCachePromise,null!=(null===(he=j._heartbeatsCache)||void 0===he?void 0:he.heartbeats)))&&j._heartbeatsCache.lastSentHeartbeatDate!==ut&&!j._heartbeatsCache.heartbeats.some(zt=>zt.date===ut))return j._heartbeatsCache.heartbeats.push({date:ut,agent:Xe}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(zt=>{const dt=new Date(zt.date).valueOf();return Date.now()-dt<=2592e6}),j._storage.overwrite(j._heartbeatsCache)})()}getHeartbeatsHeader(){var j=this;return(0,T.Z)(function*(){var z;if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null==(null===(z=j._heartbeatsCache)||void 0===z?void 0:z.heartbeats)||0===j._heartbeatsCache.heartbeats.length)return"";const he=$e(),{heartbeatsToSend:Qe,unsentEntries:Xe}=function uo(S,j=1024){const z=[];let he=S.slice();for(const Qe of S){const Xe=z.find(ut=>ut.agent===Qe.agent);if(Xe){if(Xe.dates.push(Qe.date),Oc(z)>j){Xe.dates.pop();break}}else if(z.push({agent:Qe.agent,dates:[Qe.date]}),Oc(z)>j){z.pop();break}he=he.slice(1)}return{heartbeatsToSend:z,unsentEntries:he}}(j._heartbeatsCache.heartbeats),ut=(0,ee.L)(JSON.stringify({version:2,heartbeats:Qe}));return j._heartbeatsCache.lastSentHeartbeatDate=he,Xe.length>0?(j._heartbeatsCache.heartbeats=Xe,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),ut})()}}function $e(){return(new Date).toISOString().substring(0,10)}class ra{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,T.Z)(function*(){if(yield j._canUseIndexedDBPromise){const he=yield function Cr(S){return nn.apply(this,arguments)}(j.app);return he?.heartbeats?he:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(j){var z=this;return(0,T.Z)(function*(){var he;if(yield z._canUseIndexedDBPromise){const Xe=yield z.read();return Ze(z.app,{lastSentHeartbeatDate:null!==(he=j.lastSentHeartbeatDate)&&void 0!==he?he:Xe.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var z=this;return(0,T.Z)(function*(){var he;if(yield z._canUseIndexedDBPromise){const Xe=yield z.read();return Ze(z.app,{lastSentHeartbeatDate:null!==(he=j.lastSentHeartbeatDate)&&void 0!==he?he:Xe.lastSentHeartbeatDate,heartbeats:[...Xe.heartbeats,...j.heartbeats]})}})()}}function Oc(S){return(0,ee.L)(JSON.stringify({version:2,heartbeats:S})).length}!function co(S){br(new ze.wA("platform-logger",j=>new tn(j),"PRIVATE")),br(new ze.wA("heartbeat",j=>new Ot(j),"PRIVATE")),M(Or,Mi,S),M(Or,Mi,"esm2017"),M("fire-js","")}("")},537:(ao,Qn,nt)=>{nt.d(Qn,{H0:()=>Yn,wA:()=>Se});var T=nt(861),ze=nt(58);class Se{constructor(se,ge,Ne){this.name=se,this.instanceFactory=ge,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(se){return this.instantiationMode=se,this}setMultipleInstances(se){return this.multipleInstances=se,this}setServiceProps(se){return this.serviceProps=se,this}setInstanceCreatedCallback(se){return this.onInstanceCreated=se,this}}const ee="[DEFAULT]";class bt{constructor(se,ge){this.name=se,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(se){const ge=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(ge)){const Ne=new ze.BH;if(this.instancesDeferred.set(ge,Ne),this.isInitialized(ge)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:ge});lt&&Ne.resolve(lt)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(se){var ge;const Ne=this.normalizeInstanceIdentifier(se?.identifier),lt=null!==(ge=se?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(Tt){if(lt)return null;throw Tt}}getComponent(){return this.component}setComponent(se){if(se.name!==this.name)throw Error(`Mismatching Component ${se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=se,this.shouldAutoInitialize()){if(function pn(pt){return"EAGER"===pt.instantiationMode}(se))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[ge,Ne]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(ge);try{const Tt=this.getOrInitializeService({instanceIdentifier:lt});Ne.resolve(Tt)}catch{}}}}clearInstance(se=ee){this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)}delete(){var se=this;return(0,T.Z)(function*(){const ge=Array.from(se.instances.values());yield Promise.all([...ge.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...ge.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(se=ee){return this.instances.has(se)}getOptions(se=ee){return this.instancesOptions.get(se)||{}}initialize(se={}){const{options:ge={}}=se,Ne=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:Ne,options:ge});for(const[Tt,Jn]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(Tt)&&Jn.resolve(lt);return lt}onInit(se,ge){var Ne;const lt=this.normalizeInstanceIdentifier(ge),Tt=null!==(Ne=this.onInitCallbacks.get(lt))&&void 0!==Ne?Ne:new Set;Tt.add(se),this.onInitCallbacks.set(lt,Tt);const Jn=this.instances.get(lt);return Jn&&se(Jn,lt),()=>{Tt.delete(se)}}invokeOnInitCallbacks(se,ge){const Ne=this.onInitCallbacks.get(ge);if(Ne)for(const lt of Ne)try{lt(se,ge)}catch{}}getOrInitializeService({instanceIdentifier:se,options:ge={}}){let Ne=this.instances.get(se);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(pt=se,pt===ee?void 0:pt),options:ge}),this.instances.set(se,Ne),this.instancesOptions.set(se,ge),this.invokeOnInitCallbacks(Ne,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,Ne)}catch{}var pt;return Ne||null}normalizeInstanceIdentifier(se=ee){return this.component?this.component.multipleInstances?se:ee:se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Yn{constructor(se){this.name=se,this.providers=new Map}addComponent(se){const ge=this.getProvider(se.name);if(ge.isComponentSet())throw new Error(`Component ${se.name} has already been registered with ${this.name}`);ge.setComponent(se)}addOrOverwriteComponent(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)}getProvider(se){if(this.providers.has(se))return this.providers.get(se);const ge=new bt(se,this);return this.providers.set(se,ge),ge}getProviders(){return Array.from(this.providers.values())}}},879:(ao,Qn,nt)=>{nt.d(Qn,{Am:()=>pt,Ub:()=>Yn,Yd:()=>pn,in:()=>ze});const T=[];var ze=function(se){return se[se.DEBUG=0]="DEBUG",se[se.VERBOSE=1]="VERBOSE",se[se.INFO=2]="INFO",se[se.WARN=3]="WARN",se[se.ERROR=4]="ERROR",se[se.SILENT=5]="SILENT",se}(ze||{});const Se={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},ee=ze.INFO,bt={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},an=(se,ge,...Ne)=>{if(ge<se.logLevel)return;const lt=(new Date).toISOString(),Tt=bt[ge];if(!Tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[Tt](`[${lt}]  ${se.name}:`,...Ne)};class pn{constructor(ge){this.name=ge,this._logLevel=ee,this._logHandler=an,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in ze))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?Se[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...ge),this._logHandler(this,ze.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...ge),this._logHandler(this,ze.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...ge),this._logHandler(this,ze.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...ge),this._logHandler(this,ze.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...ge),this._logHandler(this,ze.ERROR,...ge)}}function Yn(se){T.forEach(ge=>{ge.setLogLevel(se)})}function pt(se,ge){for(const Ne of T){let lt=null;ge&&ge.level&&(lt=Se[ge.level]),Ne.userLogHandler=null===se?null:(Tt,Jn,...At)=>{const Ke=At.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch{return null}}).filter(ot=>ot).join(" ");Jn>=(lt??Tt.logLevel)&&se({level:ze[Jn].toLowerCase(),message:Ke,args:At,type:Tt.name})}}}},325:(ao,Qn,nt)=>{nt.r(Qn);var T=nt(861),ze=nt(106),Se=nt(534),ee=nt(58),bt=nt(879),an=nt(582),pn=nt(537);const pt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Jn=function lt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},At=function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xn=new bt.Yd("@firebase/auth");function en(f,...c){Xn.logLevel<=bt.in.ERROR&&Xn.error(`Auth (${Se.SDK_VERSION}): ${f}`,...c)}function St(f,...c){throw Ht(f,...c)}function Lt(f,...c){return Ht(f,...c)}function wr(f,c,l){const p=Object.assign(Object.assign({},At()),{[c]:l});return new ee.LL("auth","Firebase",p).create(c,{appName:f.name})}function je(f){return wr(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bn(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&St(f,"argument-error"),wr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(f,...c){if("string"!=typeof f){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(l,...p)}return Ke.create(f,...c)}function le(f,c,...l){if(!f)throw Ht(c,...l)}function tn(f){const c="INTERNAL ASSERTION FAILED: "+f;throw en(c),new Error(c)}function Yt(f,c){f||tn(c)}function Or(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Mi(){return"http:"===gt()||"https:"===gt()}function gt(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Z{constructor(c,l){this.shortDelay=c,this.longDelay=l,Yt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function us(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mi()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Y(f,c){Yt(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class te{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_e=new Z(3e4,6e4);function J(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function me(f,c,l,p){return vt.apply(this,arguments)}function vt(){return(vt=(0,T.Z)(function*(f,c,l,p,y={}){return Oe(f,y,(0,T.Z)(function*(){let w={},R={};p&&("GET"===c?R=p:w={body:JSON.stringify(p)});const B=(0,ee.xO)(Object.assign({key:f.config.apiKey},R)).slice(1),re=yield f._getAdditionalHeaders();return re["Content-Type"]="application/json",f.languageCode&&(re["X-Firebase-Locale"]=f.languageCode),te.fetch()(mi(f,f.config.apiHost,l,B),Object.assign({method:c,headers:re,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function Oe(f,c,l){return Le.apply(this,arguments)}function Le(){return(Le=(0,T.Z)(function*(f,c,l){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},ie),c);try{const y=new Vn(f),w=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const R=yield w.json();if("needConfirmation"in R)throw Rn(f,"account-exists-with-different-credential",R);if(w.ok&&!("errorMessage"in R))return R;{const B=w.ok?R.errorMessage:R.error.message,[re,ve]=B.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw Rn(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===re)throw Rn(f,"email-already-in-use",R);if("USER_DISABLED"===re)throw Rn(f,"user-disabled",R);const De=p[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(ve)throw wr(f,De,ve);St(f,De)}}catch(y){if(y instanceof ee.ZR)throw y;St(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function yt(f,c,l,p){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,T.Z)(function*(f,c,l,p,y={}){const w=yield me(f,c,l,p,y);return"mfaPendingCredential"in w&&St(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function mi(f,c,l,p){const y=`${c}${l}?${p}`;return f.config.emulator?Y(f.config,y):`${f.config.apiScheme}://${y}`}function Nt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Lt(this.auth,"network-request-failed")),_e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(f,c,l){const p={appName:f.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const y=Lt(f,c,p);return y.customData._tokenResponse=l,y}function tr(f){return void 0!==f&&void 0!==f.getResponse}function kr(f){return void 0!==f&&void 0!==f.enterprise}class cs{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Nt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Cn(){return(Cn=(0,T.Z)(function*(f){return(yield me(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ls(f,c){return ea.apply(this,arguments)}function ea(){return(ea=(0,T.Z)(function*(f,c){return me(f,"GET","/v2/recaptchaConfig",J(f,c))})).apply(this,arguments)}function Ni(){return(Ni=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function ti(){return(ti=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function xi(f,c){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Gi(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function hr(){return(hr=(0,T.Z)(function*(f,c=!1){const l=(0,ee.m9)(f),p=yield l.getIdToken(c),y=xo(p);le(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const w="object"==typeof y.firebase?y.firebase:void 0,R=w?.sign_in_provider;return{claims:y,token:p,authTime:Gi(No(y.auth_time)),issuedAtTime:Gi(No(y.iat)),expirationTime:Gi(No(y.exp)),signInProvider:R||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function No(f){return 1e3*Number(f)}function xo(f){const[c,l,p]=f.split(".");if(void 0===c||void 0===l||void 0===p)return en("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,ee.tV)(l);return y?JSON.parse(y):(en("Failed to decode base64 JWT payload"),null)}catch(y){return en("Caught error parsing JWT payload as JSON",y?.toString()),null}}function fu(f){const c=xo(f);return le(c,"internal-error"),le(typeof c.exp<"u","internal-error"),le(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Vr(f,c){return ds.apply(this,arguments)}function ds(){return(ds=(0,T.Z)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof ee.ZR&&function Fn({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class pu{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,T.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,T.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class ni{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gi(this.lastLoginAt),this.creationTime=Gi(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,T.Z)(function*(f){var c;const l=f.auth,p=yield f.getIdToken(),y=yield Vr(f,xi(l,{idToken:p}));le(y?.users.length,l,"internal-error");const w=y.users[0];f._notifyReloadListener(w);const R=null!==(c=w.providerUserInfo)&&void 0!==c&&c.length?ko(w.providerUserInfo):[],B=function xc(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,R),De=!!f.isAnonymous&&!(f.email&&w.passwordHash||B?.length),Ae={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:B,metadata:new ni(w.createdAt,w.lastLoginAt),isAnonymous:De};Object.assign(f,Ae)})).apply(this,arguments)}function na(){return(na=(0,T.Z)(function*(f){const c=(0,ee.m9)(f);yield Fr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function ko(f){return f.map(c=>{var{providerId:l}=c,p=(0,an._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function M(){return(M=(0,T.Z)(function*(f,c){const l=yield Oe(f,{},(0,T.Z)(function*(){const p=(0,ee.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:w}=f.config,R=mi(f,y,"/v1/token",`key=${w}`),B=yield f._getAdditionalHeaders();return B["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(R,{method:"POST",headers:B,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function L(){return(L=(0,T.Z)(function*(f,c){return me(f,"POST","/v2/accounts:revokeToken",J(f,c))})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){le(c.idToken,"internal-error"),le(typeof c.idToken<"u","internal-error"),le(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):fu(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){le(0!==c.length,"internal-error");const l=fu(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,T.Z)(function*(){return l||!p.accessToken||p.isExpired?(le(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,T.Z)(function*(){const{accessToken:y,refreshToken:w,expiresIn:R}=yield function hs(f,c){return M.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(y,w,Number(R))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:y,expirationTime:w}=l,R=new ne;return p&&(le("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),y&&(le("string"==typeof y,"internal-error",{appName:c}),R.accessToken=y),w&&(le("number"==typeof w,"internal-error",{appName:c}),R.expirationTime=w),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return tn("not implemented")}}function k(f,c){le("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class Ce{constructor(c){var{uid:l,auth:p,stsTokenManager:y}=c,w=(0,an._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new ni(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,T.Z)(function*(){const p=yield Vr(l,l.stsTokenManager.getToken(l.auth,c));return le(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function br(f){return hr.apply(this,arguments)}(this,c)}reload(){return function gu(f){return na.apply(this,arguments)}(this)}_assign(c){this!==c&&(le(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new Ce(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,T.Z)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield Fr(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,T.Z)(function*(){if((0,Se._isFirebaseServerApp)(c.auth.app))return Promise.reject(je(c.auth));const l=yield c.getIdToken();return yield Vr(c,function hu(f,c){return Ni.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,y,w,R,B,re,ve,De;const Ae=null!==(p=l.displayName)&&void 0!==p?p:void 0,Zt=null!==(y=l.email)&&void 0!==y?y:void 0,bi=null!==(w=l.phoneNumber)&&void 0!==w?w:void 0,wl=null!==(R=l.photoURL)&&void 0!==R?R:void 0,rf=null!==(B=l.tenantId)&&void 0!==B?B:void 0,s_=null!==(re=l._redirectEventId)&&void 0!==re?re:void 0,sf=null!==(ve=l.createdAt)&&void 0!==ve?ve:void 0,OI=null!==(De=l.lastLoginAt)&&void 0!==De?De:void 0,{uid:af,emailVerified:a_,isAnonymous:bl,providerData:u_,stsTokenManager:kI}=l;le(af&&kI,c,"internal-error");const uf=ne.fromJSON(this.name,kI);le("string"==typeof af,c,"internal-error"),k(Ae,c.name),k(Zt,c.name),le("boolean"==typeof a_,c,"internal-error"),le("boolean"==typeof bl,c,"internal-error"),k(bi,c.name),k(wl,c.name),k(rf,c.name),k(s_,c.name),k(sf,c.name),k(OI,c.name);const c_=new Ce({uid:af,auth:c,email:Zt,emailVerified:a_,displayName:Ae,isAnonymous:bl,photoURL:wl,phoneNumber:bi,tenantId:rf,stsTokenManager:uf,createdAt:sf,lastLoginAt:OI});return u_&&Array.isArray(u_)&&(c_.providerData=u_.map(KA=>Object.assign({},KA))),s_&&(c_._redirectEventId=s_),c_}static _fromIdTokenResponse(c,l,p=!1){return(0,T.Z)(function*(){const y=new ne;y.updateFromServerResponse(l);const w=new Ce({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield Fr(w),w})()}static _fromGetAccountInfoResponse(c,l,p){return(0,T.Z)(function*(){const y=l.users[0];le(void 0!==y.localId,"internal-error");const w=void 0!==y.providerUserInfo?ko(y.providerUserInfo):[],R=!(y.email&&y.passwordHash||w?.length),B=new ne;B.updateFromIdToken(p);const re=new Ce({uid:y.localId,auth:c,stsTokenManager:B,isAnonymous:R}),ve={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:w,metadata:new ni(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||w?.length)};return Object.assign(re,ve),re})()}}const We=new Map;function Ue(f){Yt(f instanceof Function,"Expected a class definition");let c=We.get(f);return c?(Yt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,We.set(f,c),c)}const nn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(l,p){var y=this;return(0,T.Z)(function*(){y.storage[l]=p})()}_get(l){var p=this;return(0,T.Z)(function*(){const y=p.storage[l];return void 0===y?null:y})()}_remove(l){var p=this;return(0,T.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return f.type="NONE",f})();function Ze(f,c,l){return`firebase:${f}:${c}:${l}`}class rt{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:y,name:w}=this.auth;this.fullUserKey=Ze(this.userKey,y.apiKey,w),this.fullPersistenceKey=Ze("persistence",y.apiKey,w),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,T.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?Ce._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,T.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,T.Z)(function*(){if(!l.length)return new rt(Ue(nn),c,p);const y=(yield Promise.all(l.map(function(){var ve=(0,T.Z)(function*(De){if(yield De._isAvailable())return De});return function(De){return ve.apply(this,arguments)}}()))).filter(ve=>ve);let w=y[0]||Ue(nn);const R=Ze(p,c.config.apiKey,c.name);let B=null;for(const ve of l)try{const De=yield ve._get(R);if(De){const Ae=Ce._fromJSON(c,De);ve!==w&&(B=Ae),w=ve;break}}catch{}const re=y.filter(ve=>ve._shouldAllowMigration);return w._shouldAllowMigration&&re.length?(w=re[0],B&&(yield w._set(R,B.toJSON())),yield Promise.all(l.map(function(){var ve=(0,T.Z)(function*(De){if(De!==w)try{yield De._remove(R)}catch{}});return function(De){return ve.apply(this,arguments)}}())),new rt(w,c,p)):new rt(w,c,p)})()}}function Ct(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if($e(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Oi(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ra(c))return"Blackberry";if(Oc(c))return"Webos";if(fs(c))return"Safari";if((c.includes("chrome/")||Ot(c))&&!c.includes("edge/"))return"Chrome";if(uo(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Oi(f=(0,ee.z$)()){return/firefox\//i.test(f)}function fs(f=(0,ee.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Ot(f=(0,ee.z$)()){return/crios\//i.test(f)}function $e(f=(0,ee.z$)()){return/iemobile/i.test(f)}function uo(f=(0,ee.z$)()){return/android/i.test(f)}function ra(f=(0,ee.z$)()){return/blackberry/i.test(f)}function Oc(f=(0,ee.z$)()){return/webos/i.test(f)}function co(f=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function he(f=(0,ee.z$)()){return co(f)||uo(f)||Oc(f)||ra(f)||/windows phone/i.test(f)||$e(f)}function Xe(f,c=[]){let l;switch(f){case"Browser":l=Ct((0,ee.z$)());break;case"Worker":l=`${Ct((0,ee.z$)())}-${f}`;break;default:l=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Se.SDK_VERSION}/${p}`}class ut{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=w=>new Promise((R,B)=>{try{R(c(w))}catch(re){B(re)}});p.onAbort=l,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,T.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const y of l.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const w of p)try{w()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function dt(){return(dt=(0,T.Z)(function*(f,c={}){return me(f,"GET","/v2/passwordPolicy",J(f,c))})).apply(this,arguments)}class ps{constructor(c){var l,p,y,w;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=R.minPasswordLength)&&void 0!==l?l:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(w=c.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,y,w,R,B;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,re),this.validatePasswordCharacterOptions(c,re),re.isValid&&(re.isValid=null===(l=re.meetsMinPasswordLength)||void 0===l||l),re.isValid&&(re.isValid=null===(p=re.meetsMaxPasswordLength)||void 0===p||p),re.isValid&&(re.isValid=null===(y=re.containsLowercaseLetter)||void 0===y||y),re.isValid&&(re.isValid=null===(w=re.containsUppercaseLetter)||void 0===w||w),re.isValid&&(re.isValid=null===(R=re.containsNumericCharacter)||void 0===R||R),re.isValid&&(re.isValid=null===(B=re.containsNonAlphanumericCharacter)||void 0===B||B),re}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,y,w){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=w))}}class Mg{constructor(c,l,p,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xE(this),this.idTokenSubscription=new xE(this),this.beforeStateQueue=new ut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ue(l)),this._initializationPromise=this.queue((0,T.Z)(function*(){var y,w;if(!p._deleted&&(p.persistenceManager=yield rt.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(w=p.currentUser)||void 0===w?void 0:w.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,T.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,T.Z)(function*(){try{const p=yield xi(l,{idToken:c}),y=yield Ce._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,T.Z)(function*(){var p;if((0,Se._isFirebaseServerApp)(l.app)){const B=l.app.settings.authIdToken;return B?new Promise(re=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(B).then(re,re))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let w=y,R=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const B=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,re=w?._redirectEventId,ve=yield l.tryRedirectSignIn(c);(!B||B===re)&&ve?.user&&(w=ve.user,R=!0)}if(!w)return l.directlySetCurrentUser(null);if(!w._redirectEventId){if(R)try{yield l.beforeStateQueue.runMiddleware(w)}catch(B){w=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(B))}return w?l.reloadAndSetCurrentUserOrClear(w):l.directlySetCurrentUser(null)}return le(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===w._redirectEventId?l.directlySetCurrentUser(w):l.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(c){var l=this;return(0,T.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,T.Z)(function*(){try{yield Fr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function lu(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,T.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,T.Z)(function*(){if((0,Se._isFirebaseServerApp)(l.app))return Promise.reject(je(l));const p=c?(0,ee.m9)(c):null;return p&&le(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,T.Z)(function*(){if(!p._deleted)return c&&le(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,T.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,T.Z)(function*(){return(0,Se._isFirebaseServerApp)(c.app)?Promise.reject(je(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Se._isFirebaseServerApp)(this.app)?Promise.reject(je(this)):this.queue((0,T.Z)(function*(){yield l.assertedPersistence.setPersistence(Ue(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,T.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,T.Z)(function*(){const l=yield function zt(f){return dt.apply(this,arguments)}(c),p=new ps(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ee.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,T.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function D(f,c){return L.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,T.Z)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,T.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ue(c)||l._popupRedirectResolver;le(p,l,"argument-error"),l.redirectPersistenceManager=yield rt.create(l,[Ue(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,T.Z)(function*(){var p,y;return l._isInitialized&&(yield l.queue((0,T.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,T.Z)(function*(){if(c===l.currentUser)return l.queue((0,T.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,y){if(this._deleted)return()=>{};const w="function"==typeof l?l:l.next.bind(l);let R=!1;const B=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(B,this,"internal-error"),B.then(()=>{R||w(this.currentUser)}),"function"==typeof l){const re=c.addObserver(l,p,y);return()=>{R=!0,re()}}{const re=c.addObserver(l);return()=>{R=!0,re()}}}directlySetCurrentUser(c){var l=this;return(0,T.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,T.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const w=yield c._getAppCheckToken();return w&&(p["X-Firebase-AppCheck"]=w),p})()}_getAppCheckToken(){var c=this;return(0,T.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function er(f,...c){Xn.logLevel<=bt.in.WARN&&Xn.warn(`Auth (${Se.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Rt(f){return(0,ee.m9)(f)}class xE{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ee.ne)(l=>this.observer=l)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kc={loadJS:()=>(0,T.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ng(f){return kc.loadJS(f)}function VE(f){return`__${f}${Math.floor(1e6*Math.random())}`}class FE{constructor(c){this.type="recaptcha-enterprise",this.auth=Rt(c)}verify(c="verify",l=!1){var p=this;return(0,T.Z)(function*(){function w(){return w=(0,T.Z)(function*(B){if(!l){if(null==B.tenantId&&null!=B._agentRecaptchaConfig)return B._agentRecaptchaConfig.siteKey;if(null!=B.tenantId&&void 0!==B._tenantRecaptchaConfigs[B.tenantId])return B._tenantRecaptchaConfigs[B.tenantId].siteKey}return new Promise(function(){var re=(0,T.Z)(function*(ve,De){ls(B,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ae=>{if(void 0!==Ae.recaptchaKey){const Zt=new cs(Ae);return null==B.tenantId?B._agentRecaptchaConfig=Zt:B._tenantRecaptchaConfigs[B.tenantId]=Zt,ve(Zt.siteKey)}De(new Error("recaptcha Enterprise site key undefined"))}).catch(Ae=>{De(Ae)})});return function(ve,De){return re.apply(this,arguments)}}())}),w.apply(this,arguments)}function R(B,re,ve){const De=window.grecaptcha;kr(De)?De.enterprise.ready(()=>{De.enterprise.execute(B,{action:c}).then(Ae=>{re(Ae)}).catch(()=>{re("NO_RECAPTCHA")})}):ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((B,re)=>{(function y(B){return w.apply(this,arguments)})(p.auth).then(ve=>{if(!l&&kr(window.grecaptcha))R(ve,B,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let De=function wA(){return kc.recaptchaEnterpriseScript}();0!==De.length&&(De+=ve),Ng(De).then(()=>{R(ve,B,re)}).catch(Ae=>{re(Ae)})}}).catch(ve=>{re(ve)})})})()}}function LE(f,c,l){return xg.apply(this,arguments)}function xg(){return(xg=(0,T.Z)(function*(f,c,l,p=!1){const y=new FE(f);let w;try{w=yield y.verify(l)}catch{w=yield y.verify(l,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:w}:{captchaResponse:w}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Re(f,c,l,p){return Og.apply(this,arguments)}function Og(){return Og=(0,T.Z)(function*(f,c,l,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield LE(f,c,l,"getOobCode"===l);return p(f,w)}return p(f,c).catch(function(){var w=(0,T.Z)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const B=yield LE(f,c,l,"getOobCode"===l);return p(f,B)}return Promise.reject(R)});return function(R){return w.apply(this,arguments)}}())}),Og.apply(this,arguments)}function mu(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Fc(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class oa{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return tn("not implemented")}_getIdTokenResponse(c){return tn("not implemented")}_linkToIdToken(c,l){return tn("not implemented")}_getReauthenticationResolver(c){return tn("not implemented")}}function ht(f,c){return _u.apply(this,arguments)}function _u(){return(_u=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:resetPassword",J(f,c))})).apply(this,arguments)}function fr(){return(fr=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ug(f,c){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function jg(){return(jg=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:update",J(f,c))})).apply(this,arguments)}function bA(f,c){return we.apply(this,arguments)}function we(){return(we=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithPassword",J(f,c))})).apply(this,arguments)}function sa(f,c){return yu.apply(this,arguments)}function yu(){return(yu=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:sendOobCode",J(f,c))})).apply(this,arguments)}function vu(){return(vu=(0,T.Z)(function*(f,c){return sa(f,c)})).apply(this,arguments)}function BE(f,c){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,T.Z)(function*(f,c){return sa(f,c)})).apply(this,arguments)}function CA(f,c){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,T.Z)(function*(f,c){return sa(f,c)})).apply(this,arguments)}function zg(){return(zg=(0,T.Z)(function*(f,c){return sa(f,c)})).apply(this,arguments)}function gs(){return(gs=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithEmailLink",J(f,c))})).apply(this,arguments)}function aa(){return(aa=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithEmailLink",J(f,c))})).apply(this,arguments)}class Iu extends oa{constructor(c,l,p,y=null){super("password",p),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new Iu(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Iu(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,T.Z)(function*(){switch(l.signInMethod){case"password":return Re(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",bA);case"emailLink":return function DA(f,c){return gs.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:St(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,T.Z)(function*(){switch(p.signInMethod){case"password":return Re(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ug);case"emailLink":return function eh(f,c){return aa.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:St(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function lo(f,c){return th.apply(this,arguments)}function th(){return(th=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithIdp",J(f,c))})).apply(this,arguments)}class Tr extends oa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Tr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):St("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=l,w=(0,an._T)(l,["providerId","signInMethod"]);if(!p||!y)return null;const R=new Tr(p,y);return R.idToken=w.idToken||void 0,R.accessToken=w.accessToken||void 0,R.secret=w.secret,R.nonce=w.nonce,R.pendingToken=w.pendingToken||null,R}_getIdTokenResponse(c){return lo(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,lo(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,lo(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,ee.xO)(l)}return c}}function Wi(){return(Wi=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:sendVerificationCode",J(f,c))})).apply(this,arguments)}function pe(){return(pe=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithPhoneNumber",J(f,c))})).apply(this,arguments)}function Pe(){return(Pe=(0,T.Z)(function*(f,c){const l=yield yt(f,"POST","/v1/accounts:signInWithPhoneNumber",J(f,c));if(l.temporaryProof)throw Rn(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const Lc={USER_NOT_FOUND:"user-not-found"};function ms(){return(ms=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithPhoneNumber",J(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Lc)})).apply(this,arguments)}class _s extends oa{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new _s({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new _s({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function $E(f,c){return pe.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function Gg(f,c){return Pe.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function nh(f,c){return ms.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:w}=c;return p||l||y||w?new _s({verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:w}):null}}class ri{constructor(c){var l,p,y,w,R,B;const re=(0,ee.zd)((0,ee.pd)(c)),ve=null!==(l=re.apiKey)&&void 0!==l?l:null,De=null!==(p=re.oobCode)&&void 0!==p?p:null,Ae=function HE(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=re.mode)&&void 0!==y?y:null);le(ve&&De&&Ae,"argument-error"),this.apiKey=ve,this.operation=Ae,this.code=De,this.continueUrl=null!==(w=re.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(R=re.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(B=re.tenantId)&&void 0!==B?B:null}static parseLink(c){const l=function zE(f){const c=(0,ee.zd)((0,ee.pd)(f)).link,l=c?(0,ee.zd)((0,ee.pd)(c)).deep_link_id:null,p=(0,ee.zd)((0,ee.pd)(f)).deep_link_id;return(p?(0,ee.zd)((0,ee.pd)(p)).link:null)||p||l||c||f}(c);try{return new ri(l)}catch{return null}}}let ii=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,p){return Iu._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const y=ri.parseLink(p);return le(y,"argument-error"),Iu._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class qn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class mt extends qn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ho extends mt{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return le("providerId"in l&&"signInMethod"in l,"argument-error"),Tr._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return le(c.idToken||c.accessToken,"argument-error"),Tr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ho.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ho.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:w,nonce:R,providerId:B}=c;if(!p&&!y&&!l&&!w||!B)return null;try{return new ho(B)._credential({idToken:l,accessToken:p,nonce:R,pendingToken:w})}catch{return null}}}let Uc=(()=>{class f extends mt{constructor(){super("facebook.com")}static credential(l){return Tr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Bc=(()=>{class f extends mt{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Tr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:y}=l;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),ih=(()=>{class f extends mt{constructor(){super("github.com")}static credential(l){return Tr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Zi extends oa{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return lo(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,lo(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,lo(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:w}=l;return p&&y&&w&&p===y?new Zi(p,w):null}static _create(c,l){return new Zi(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wu extends qn{constructor(c){le(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return wu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return wu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Zi.fromJSON(c);return le(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Zi._create(p,l)}catch{return null}}}let jc=(()=>{class f extends mt{constructor(){super("twitter.com")}static credential(l,p){return Tr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=l;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function oh(f,c){return $c.apply(this,arguments)}function $c(){return($c=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signUp",J(f,c))})).apply(this,arguments)}class pr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,y=!1){return(0,T.Z)(function*(){const w=yield Ce._fromIdTokenResponse(c,p,y),R=sh(p);return new pr({user:w,providerId:R,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,T.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=sh(p);return new pr({user:c,providerId:y,_tokenResponse:p,operationType:l})})()}}function sh(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function ah(){return(ah=(0,T.Z)(function*(f){var c;if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const l=Rt(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new pr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield oh(l,{returnSecureToken:!0}),y=yield pr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class bu extends ee.ZR{constructor(c,l,p,y){var w;super(l.code,l.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,bu.prototype),this.customData={appName:c.name,tenantId:null!==(w=c.tenantId)&&void 0!==w?w:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,y){return new bu(c,l,p,y)}}function Kg(f,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?bu._fromErrorAndOperation(f,w,c,p):w})}function Qg(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function uh(){return uh=(0,T.Z)(function*(f,c){const l=(0,ee.m9)(f);yield zc(!0,l,c);const{providerUserInfo:p}=yield function ta(f,c){return ti.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=Qg(p||[]);return l.providerData=l.providerData.filter(w=>y.has(w.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),uh.apply(this,arguments)}function Hc(f,c){return ch.apply(this,arguments)}function ch(){return(ch=(0,T.Z)(function*(f,c,l=!1){const p=yield Vr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return pr._forOperation(f,"link",p)})).apply(this,arguments)}function zc(f,c,l){return lh.apply(this,arguments)}function lh(){return(lh=(0,T.Z)(function*(f,c,l){yield Fr(c);const y=!1===f?"provider-already-linked":"no-such-provider";le(Qg(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function Yg(f,c){return qc.apply(this,arguments)}function qc(){return(qc=(0,T.Z)(function*(f,c,l=!1){const{auth:p}=f;if((0,Se._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const y="reauthenticate";try{const w=yield Vr(f,Kg(p,y,c,f),l);le(w.idToken,p,"internal-error");const R=xo(w.idToken);le(R,p,"internal-error");const{sub:B}=R;return le(f.uid===B,p,"user-mismatch"),pr._forOperation(f,y,w)}catch(w){throw"auth/user-not-found"===w?.code&&St(p,"user-mismatch"),w}})).apply(this,arguments)}function Jg(f,c){return dh.apply(this,arguments)}function dh(){return(dh=(0,T.Z)(function*(f,c,l=!1){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p="signIn",y=yield Kg(f,p,c),w=yield pr._fromIdTokenResponse(f,p,y);return l||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function Gc(f,c){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,T.Z)(function*(f,c){return Jg(Rt(f),c)})).apply(this,arguments)}function Xg(f,c){return hh.apply(this,arguments)}function hh(){return(hh=(0,T.Z)(function*(f,c){const l=(0,ee.m9)(f);return yield zc(!1,l,c.providerId),Hc(l,c)})).apply(this,arguments)}function em(f,c){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,T.Z)(function*(f,c){return Yg((0,ee.m9)(f),c)})).apply(this,arguments)}function Wc(){return(Wc=(0,T.Z)(function*(f,c){return yt(f,"POST","/v1/accounts:signInWithCustomToken",J(f,c))})).apply(this,arguments)}function gr(){return gr=(0,T.Z)(function*(f,c){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const l=Rt(f),p=yield function qE(f,c){return Wc.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield pr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(y.user),y}),gr.apply(this,arguments)}class ft{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Ln._fromServerResponse(c,l):"totpInfo"in l?rr._fromServerResponse(c,l):St(c,"internal-error")}}class Ln extends ft{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Ln(l)}}class rr extends ft{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new rr(l)}}function po(f,c,l){var p;le((null===(p=l.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),le(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(le(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(le(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Dr(f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,T.Z)(function*(f){const c=Rt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function ua(){return(ua=(0,T.Z)(function*(f,c,l){const p=Rt(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&po(p,y,l),yield Re(p,y,"getOobCode",BE)})).apply(this,arguments)}function fh(){return fh=(0,T.Z)(function*(f,c,l){yield ht((0,ee.m9)(f),{oobCode:c,newPassword:l}).catch(function(){var p=(0,T.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Dr(f),y});return function(y){return p.apply(this,arguments)}}())}),fh.apply(this,arguments)}function Te(){return Te=(0,T.Z)(function*(f,c){yield function qt(f,c){return jg.apply(this,arguments)}((0,ee.m9)(f),{oobCode:c})}),Te.apply(this,arguments)}function et(f,c){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,T.Z)(function*(f,c){const l=(0,ee.m9)(f),p=yield ht(l,{oobCode:c}),y=p.requestType;switch(le(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(p.mfaInfo,l,"internal-error");default:le(p.email,l,"internal-error")}let w=null;return p.mfaInfo&&(w=ft._fromServerResponse(Rt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:w},operation:y}})).apply(this,arguments)}function ys(){return(ys=(0,T.Z)(function*(f,c){const{data:l}=yield et((0,ee.m9)(f),c);return l.email})).apply(this,arguments)}function Vo(){return(Vo=(0,T.Z)(function*(f,c,l){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Rt(f),R=yield Re(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oh).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&Dr(f),re}),B=yield pr._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(B.user),B})).apply(this,arguments)}function Lo(){return(Lo=(0,T.Z)(function*(f,c,l){const p=Rt(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function w(R,B){le(B.handleCodeInApp,p,"argument-error"),B&&po(p,R,B)})(y,l),yield Re(p,y,"getOobCode",CA)})).apply(this,arguments)}function Kc(){return(Kc=(0,T.Z)(function*(f,c,l){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=(0,ee.m9)(f),y=ii.credentialWithLink(c,l||Or());return le(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Gc(p,y)})).apply(this,arguments)}function un(){return(un=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:createAuthUri",J(f,c))})).apply(this,arguments)}function Uo(){return Uo=(0,T.Z)(function*(f,c){const p={identifier:c,continueUri:Mi()?Or():"http://localhost"},{signinMethods:y}=yield function ca(f,c){return un.apply(this,arguments)}((0,ee.m9)(f),p);return y||[]}),Uo.apply(this,arguments)}function vs(){return vs=(0,T.Z)(function*(f,c){const l=(0,ee.m9)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&po(l.auth,y,c);const{email:w}=yield function $g(f,c){return vu.apply(this,arguments)}(l.auth,y);w!==f.email&&(yield f.reload())}),vs.apply(this,arguments)}function Qi(){return Qi=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&po(p.auth,w,l);const{email:R}=yield function TA(f,c){return zg.apply(this,arguments)}(p.auth,w);R!==f.email&&(yield f.reload())}),Qi.apply(this,arguments)}function Es(){return(Es=(0,T.Z)(function*(f,c){return me(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ct(){return ct=(0,T.Z)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,ee.m9)(f),w={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},R=yield Vr(p,function go(f,c){return Es.apply(this,arguments)}(p.auth,w));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const B=p.providerData.find(({providerId:re})=>"password"===re);B&&(B.displayName=p.displayName,B.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),ct.apply(this,arguments)}function gh(f,c,l){return vi.apply(this,arguments)}function vi(){return vi=(0,T.Z)(function*(f,c,l){const{auth:p}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(w.email=c),l&&(w.password=l);const R=yield Vr(f,function Lg(f,c){return fr.apply(this,arguments)}(p,w));yield f._updateTokensIfNecessary(R,!0)}),vi.apply(this,arguments)}class Li{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class la extends Li{constructor(c,l,p,y){super(c,l,p),this.username=y}}class ir extends Li{constructor(c,l){super(c,"facebook.com",l)}}class SA extends la{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Lr extends Li{constructor(c,l){super(c,"google.com",l)}}class Ar extends la{constructor(c,l,p){super(c,"twitter.com",l,p)}}function mh(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Qc(f){var c,l;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(l=null===(c=xo(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(R)return new Li(w,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new ir(w,y);case"github.com":return new SA(w,y);case"google.com":return new Lr(w,y);case"twitter.com":return new Ar(w,y,f.screenName||null);case"custom":case"anonymous":return new Li(w,null);default:return new Li(w,p,y)}}(l)}class ha{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new ha("enroll",c,l)}static _fromMfaPendingCredential(c){return new ha("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return ha._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return ha._fromIdtoken(c.multiFactorSession.idToken)}return null}}class im{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Rt(c),y=l.customData._serverResponse,w=(y.mfaInfo||[]).map(B=>ft._fromServerResponse(p,B));le(y.mfaPendingCredential,p,"internal-error");const R=ha._fromMfaPendingCredential(y.mfaPendingCredential);return new im(R,w,function(){var B=(0,T.Z)(function*(re){const ve=yield re._process(p,R);delete y.mfaInfo,delete y.mfaPendingCredential;const De=Object.assign(Object.assign({},y),{idToken:ve.idToken,refreshToken:ve.refreshToken});switch(l.operationType){case"signIn":const Ae=yield pr._fromIdTokenResponse(p,l.operationType,De);return yield p._updateCurrentUser(Ae.user),Ae;case"reauthenticate":return le(l.user,p,"internal-error"),pr._forOperation(l.user,l.operationType,De);default:St(p,"internal-error")}});return function(re){return B.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,T.Z)(function*(){return l.signInResolver(c)})()}}class Yc{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>ft._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Yc(c)}getSession(){var c=this;return(0,T.Z)(function*(){return ha._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,T.Z)(function*(){const y=c,w=yield p.getSession(),R=yield Vr(p.user,y._process(p.user.auth,w,l));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var l=this;return(0,T.Z)(function*(){const p="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const w=yield Vr(l.user,function kA(f,c){return me(f,"POST","/v2/accounts/mfaEnrollment:withdraw",J(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:R})=>R!==p),yield l.user._updateTokensIfNecessary(w),yield l.user.reload()}catch(w){throw w}})()}}const Jc=new WeakMap,yh="__sak";class KE{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mn=(()=>{class f extends KE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Is(){const f=(0,ee.z$)();return fs(f)||co(f)}()&&function Qe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=he(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),w=this.localCache[p];y!==w&&l(p,w,y)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((B,re,ve)=>{this.notifyListeners(B,ve)});const y=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const B=this.storage.getItem(y);if(l.newValue!==B)null!==l.newValue?this.storage.setItem(y,l.newValue):this.storage.removeItem(y);else if(this.localCache[y]===l.newValue&&!p)return}const w=()=>{const B=this.storage.getItem(y);!p&&this.localCache[y]===B||this.notifyListeners(y,B)},R=this.storage.getItem(y);!function z(){return(0,ee.w1)()&&10===document.documentMode}()||R===l.newValue||l.newValue===l.oldValue?w():setTimeout(w,10)}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const w of Array.from(y))w(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var y=()=>super._set,w=this;return(0,T.Z)(function*(){yield y().call(w,l,p),w.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,y=this;return(0,T.Z)(function*(){const w=yield p().call(y,l);return y.localCache[l]=JSON.stringify(w),w})()}_remove(l){var p=()=>super._remove,y=this;return(0,T.Z)(function*(){yield p().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),Un=(()=>{class f extends KE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return f.type="SESSION",f})();let sm=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(w=>w.isListeningto(l));if(p)return p;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,T.Z)(function*(){const y=l,{eventId:w,eventType:R,data:B}=y.data,re=p.handlersMap[R];if(!re?.size)return;y.ports[0].postMessage({status:"ack",eventId:w,eventType:R});const ve=Array.from(re).map(function(){var Ae=(0,T.Z)(function*(Zt){return Zt(y.origin,B)});return function(Zt){return Ae.apply(this,arguments)}}()),De=yield function om(f){return Promise.all(f.map(function(){var c=(0,T.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ve);y.ports[0].postMessage({status:"done",eventId:w,eventType:R,response:De})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function fa(f="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return f+l}class am{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var y=this;return(0,T.Z)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let R,B;return new Promise((re,ve)=>{const De=fa("",20);w.port1.start();const Ae=setTimeout(()=>{ve(new Error("unsupported_event"))},p);B={messageChannel:w,onMessage(Zt){const bi=Zt;if(bi.data.eventId===De)switch(bi.data.status){case"ack":clearTimeout(Ae),R=setTimeout(()=>{ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),re(bi.data.response);break;default:clearTimeout(Ae),clearTimeout(R),ve(new Error("invalid_response"))}}},y.handlers.add(B),w.port1.addEventListener("message",B.onMessage),y.target.postMessage({eventType:c,eventId:De,data:l},[w.port2])}).finally(()=>{B&&y.removeMessageHandler(B)})})()}}function mn(){return window}function Su(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function Xc(){return(Xc=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ru="firebaseLocalStorageDb",mo="firebaseLocalStorage",Ih="fbase_key";class el{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function wh(f,c){return f.transaction([mo],c?"readwrite":"readonly").objectStore(mo)}function bh(){const f=indexedDB.open(Ru,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(mo,{keyPath:Ih})}catch(y){l(y)}}),f.addEventListener("success",(0,T.Z)(function*(){const p=f.result;p.objectStoreNames.contains(mo)?c(p):(p.close(),yield function LA(){const f=indexedDB.deleteDatabase(Ru);return new el(f).toPromise()}(),c(yield bh()))}))})}function dm(f,c,l){return hm.apply(this,arguments)}function hm(){return(hm=(0,T.Z)(function*(f,c,l){const p=wh(f,!0).put({[Ih]:c,value:l});return new el(p).toPromise()})).apply(this,arguments)}function Mu(){return(Mu=(0,T.Z)(function*(f,c){const l=wh(f,!1).get(c),p=yield new el(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function pm(f,c){const l=wh(f,!0).delete(c);return new el(l).toPromise()}const pa=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,T.Z)(function*(){return l.db||(l.db=yield bh()),l.db})()}_withRetries(l){var p=this;return(0,T.Z)(function*(){let y=0;for(;;)try{const w=yield p._openDb();return yield l(w)}catch(w){if(y++>3)throw w;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,T.Z)(function*(){return Su()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,T.Z)(function*(){l.receiver=sm._getInstance(function lm(){return Su()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,T.Z)(function*(y,w){return{keyProcessed:(yield l._poll()).includes(w.key)}});return function(y,w){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,T.Z)(function*(y,w){return["keyChanged"]});return function(y,w){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,T.Z)(function*(){var p,y;if(l.activeServiceWorker=yield function Eh(){return Xc.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new am(l.activeServiceWorker);const w=yield l.sender._send("ping",{},800);w&&null!==(p=w[0])&&void 0!==p&&p.fulfilled&&null!==(y=w[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,T.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function cm(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const l=yield bh();return yield dm(l,yh,"1"),yield pm(l,yh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,T.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var y=this;return(0,T.Z)(function*(){return y._withPendingWrite((0,T.Z)(function*(){return yield y._withRetries(w=>dm(w,l,p)),y.localCache[l]=p,y.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,T.Z)(function*(){const y=yield p._withRetries(w=>function fm(f,c){return Mu.apply(this,arguments)}(w,l));return p.localCache[l]=y,y})()}_remove(l){var p=this;return(0,T.Z)(function*(){return p._withPendingWrite((0,T.Z)(function*(){return yield p._withRetries(y=>pm(y,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,T.Z)(function*(){const p=yield l._withRetries(R=>{const B=wh(R,!1).getAll();return new el(B).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const y=[],w=new Set;if(0!==p.length)for(const{fbase_key:R,value:B}of p)w.add(R),JSON.stringify(l.localCache[R])!==JSON.stringify(B)&&(l.notifyListeners(R,B),y.push(R));for(const R of Object.keys(l.localCache))l.localCache[R]&&!w.has(R)&&(l.notifyListeners(R,null),y.push(R));return y})()}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const w of Array.from(y))w(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Nu=1e12;class XE{constructor(c){this.auth=c,this.counter=Nu,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new _m(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Nu;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Nu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,T.Z)(function*(){var p;return null===(p=l._widgets.get(c||Nu))||void 0===p||p.execute(),""})()}}class _m{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;le(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ym=VE("rcb"),tI=new Z(3e4,6e4);class oi{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=mn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return le(function vm(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&tr(mn().grecaptcha)?Promise.resolve(mn().grecaptcha):new Promise((p,y)=>{const w=mn().setTimeout(()=>{y(Lt(c,"network-request-failed"))},tI.get());mn()[ym]=()=>{mn().clearTimeout(w),delete mn()[ym];const B=mn().grecaptcha;if(!B||!tr(B))return void y(Lt(c,"internal-error"));const re=B.render;B.render=(ve,De)=>{const Ae=re(ve,De);return this.counter++,Ae},this.hostLanguage=l,p(B)},Ng(`${function OE(){return kc.recaptchaV2Script}()}?${(0,ee.xO)({onload:ym,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(w),y(Lt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=mn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nI{load(c){return(0,T.Z)(function*(){return new XE(c)})()}clearedOneInstance(){}}const Em="recaptcha",Im={theme:"light",type:"image"};class wm{constructor(c,l,p=Object.assign({},Im)){this.parameters=p,this.type=Em,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(c),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nI:new oi,this.validateStartingState()}verify(){var c=this;return(0,T.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(w=>{const R=B=>{B&&(c.tokenChangeListeners.delete(R),w(B))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=mn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,T.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,T.Z)(function*(){le(Mi()&&!Su(),c.auth,"internal-error"),yield function rI(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function du(f){return Cn.apply(this,arguments)}(c.auth);le(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xu{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=_s._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function Ei(){return(Ei=(0,T.Z)(function*(f,c,l){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Rt(f),y=yield ws(p,c,(0,ee.m9)(l));return new xu(y,w=>Gc(p,w))})).apply(this,arguments)}function tl(){return(tl=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f);yield zc(!1,p,"phone");const y=yield ws(p.auth,c,(0,ee.m9)(l));return new xu(y,w=>Xg(p,w))})).apply(this,arguments)}function Ou(){return(Ou=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f);if((0,Se._isFirebaseServerApp)(p.auth.app))return Promise.reject(je(p.auth));const y=yield ws(p.auth,c,(0,ee.m9)(l));return new xu(y,w=>em(p,w))})).apply(this,arguments)}function ws(f,c,l){return _r.apply(this,arguments)}function _r(){return _r=(0,T.Z)(function*(f,c,l){var p;const y=yield l.verify();try{let w;if(le("string"==typeof y,f,"argument-error"),le(l.type===Em,f,"argument-error"),w="string"==typeof c?{phoneNumber:c}:c,"session"in w){const R=w.session;if("phoneNumber"in w)return le("enroll"===R.type,f,"internal-error"),(yield function NA(f,c){return me(f,"POST","/v2/accounts/mfaEnrollment:start",J(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===R.type,f,"internal-error");const B=(null===(p=w.multiFactorHint)||void 0===p?void 0:p.uid)||w.multiFactorUid;return le(B,f,"missing-multi-factor-info"),(yield function gm(f,c){return me(f,"POST","/v2/accounts/mfaSignIn:start",J(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:B,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function jE(f,c){return Wi.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:y});return R}}finally{l._reset()}}),_r.apply(this,arguments)}function nl(){return(nl=(0,T.Z)(function*(f,c){const l=(0,ee.m9)(f);if((0,Se._isFirebaseServerApp)(l.auth.app))return Promise.reject(je(l.auth));yield Hc(l,c)})).apply(this,arguments)}let Ji=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=Rt(l)}verifyPhoneNumber(l,p){return ws(this.auth,l,(0,ee.m9)(p))}static credential(l,p){return _s._fromVerification(l,p)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:y}=l;return p&&y?_s._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Bn(f,c){return c?Ue(c):(le(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Th extends oa{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return lo(c,this._buildIdpRequest())}_linkToIdToken(c,l){return lo(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return lo(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function sI(f){return Jg(f.auth,new Th(f),f.bypassAuthState)}function aI(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Yg(l,new Th(f),f.bypassAuthState)}function jo(f){return rl.apply(this,arguments)}function rl(){return(rl=(0,T.Z)(function*(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Hc(l,new Th(f),f.bypassAuthState)})).apply(this,arguments)}class Cm{constructor(c,l,p,y,w=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,T.Z)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(w){c.reject(w)}});return function(p,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,T.Z)(function*(){const{urlResponse:p,sessionId:y,postBody:w,tenantId:R,error:B,type:re}=c;if(B)return void l.reject(B);const ve={auth:l.auth,requestUri:p,sessionId:y,tenantId:R||void 0,postBody:w||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(re)(ve))}catch(De){l.reject(De)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return sI;case"linkViaPopup":case"linkViaRedirect":return jo;case"reauthViaPopup":case"reauthViaRedirect":return aI;default:St(this.auth,"internal-error")}}resolve(c){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tm=new Z(2e3,1e4);function il(){return(il=(0,T.Z)(function*(f,c,l){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(Lt(f,"operation-not-supported-in-this-environment"));const p=Rt(f);bn(f,c,qn);const y=Bn(p,l);return new Dh(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function He(){return(He=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f);if((0,Se._isFirebaseServerApp)(p.auth.app))return Promise.reject(Lt(p.auth,"operation-not-supported-in-this-environment"));bn(p.auth,c,qn);const y=Bn(p.auth,l);return new Dh(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function Sm(){return(Sm=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f);bn(p.auth,c,qn);const y=Bn(p.auth,l);return new Dh(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let Dh=(()=>{class f extends Cm{constructor(l,p,y,w,R){super(l,p,w,R),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,T.Z)(function*(){const p=yield l.execute();return le(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,T.Z)(function*(){Yt(1===l.filter.length,"Popup operations only handle one event");const p=fa();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(Lt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Tm.get())};l()}}return f.currentPopupAction=null,f})();const cI="pendingRedirect",ku=new Map;class Rm extends Cm{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,T.Z)(function*(){let p=ku.get(l.auth._key());if(!p){try{const w=(yield function ga(f,c){return Ah.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(w)}catch(y){p=()=>Promise.reject(y)}ku.set(l.auth._key(),p)}return l.bypassAuthState||ku.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,T.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function Ah(){return(Ah=(0,T.Z)(function*(f,c){const l=Et(c),p=ae(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(l));return yield p._remove(l),y})).apply(this,arguments)}function Sh(f,c){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,T.Z)(function*(f,c){return ae(f)._set(Et(c),"true")})).apply(this,arguments)}function Ph(f,c){ku.set(f._key(),c)}function ae(f){return Ue(f._redirectPersistence)}function Et(f){return Ze(cI,f.config.apiKey,f.name)}function bs(f,c,l){return function Cs(f,c,l){return jn.apply(this,arguments)}(f,c,l)}function jn(){return(jn=(0,T.Z)(function*(f,c,l){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Rt(f);bn(f,c,qn),yield p._initializationPromise;const y=Bn(p,l);return yield Sh(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Pm(f,c,l){return function Vu(f,c,l){return Ii.apply(this,arguments)}(f,c,l)}function Ii(){return(Ii=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f);if(bn(p.auth,c,qn),(0,Se._isFirebaseServerApp)(p.auth.app))return Promise.reject(je(p.auth));yield p.auth._initializationPromise;const y=Bn(p.auth,l);yield Sh(y,p.auth);const w=yield Oh(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",w)})).apply(this,arguments)}function Mh(f,c,l){return function Nh(f,c,l){return xh.apply(this,arguments)}(f,c,l)}function xh(){return(xh=(0,T.Z)(function*(f,c,l){const p=(0,ee.m9)(f);bn(p.auth,c,qn),yield p.auth._initializationPromise;const y=Bn(p.auth,l);yield zc(!1,p,c.providerId),yield Sh(y,p.auth);const w=yield Oh(p);return y._openRedirect(p.auth,c,"linkViaRedirect",w)})).apply(this,arguments)}function ol(){return(ol=(0,T.Z)(function*(f,c){return yield Rt(f)._initializationPromise,Wn(f,c,!1)})).apply(this,arguments)}function Wn(f,c){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,T.Z)(function*(f,c,l=!1){if((0,Se._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Rt(f),y=Bn(p,c),R=yield new Rm(p,y,l).execute();return R&&!l&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function Oh(f){return $o.apply(this,arguments)}function $o(){return($o=(0,T.Z)(function*(f){const c=fa(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Mm{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function dI(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nm(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Nm(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Lt(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kh(c))}saveEventToCache(c){this.cachedEventUids.add(kh(c)),this.lastProcessedEventTime=Date.now()}}function kh(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function Nm({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function sl(f){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,T.Z)(function*(f,c={}){return me(f,"GET","/v1/projects",c)})).apply(this,arguments)}const xm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vh=/^https?/;function al(){return(al=(0,T.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield sl(f);for(const l of c)try{if(Fh(l))return}catch{}St(f,"unauthorized-domain")})).apply(this,arguments)}function Fh(f){const c=Or(),{protocol:l,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&R.hostname===p}if(!Vh.test(l))return!1;if(xm.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Om=new Z(3e4,6e4);function Lh(){const f=mn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Lu=null;const fI=new Z(5e3,15e3),pI="__/auth/iframe",Sr="emulator/auth/iframe",Ts={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ul(f){const c=f.config;le(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?Y(c,Sr):`https://${f.config.authDomain}/${pI}`,p={apiKey:c.apiKey,appName:f.name,v:Se.SDK_VERSION},y=cn.get(f.config.apiHost);y&&(p.eid=y);const w=f._getFrameworks();return w.length&&(p.fw=w.join(",")),`${l}?${(0,ee.xO)(p).slice(1)}`}function cl(){return cl=(0,T.Z)(function*(f){const c=yield function Uh(f){return Lu=Lu||function km(f){return new Promise((c,l)=>{var p,y,w;function R(){Lh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Lh(),l(Lt(f,"network-request-failed"))},timeout:Om.get()})}if(null!==(y=null===(p=mn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(w=mn().gapi)||void 0===w||!w.load){const B=VE("iframefcb");return mn()[B]=()=>{gapi.load?R():l(Lt(f,"network-request-failed"))},Ng(`${function kE(){return kc.gapiScript}()}?onload=${B}`).catch(re=>l(re))}R()}}).catch(c=>{throw Lu=null,c})}(f),Lu}(f),l=mn().gapi;return le(l,f,"internal-error"),c.open({where:document.body,url:ul(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ts,dontclear:!0},p=>new Promise(function(){var y=(0,T.Z)(function*(w,R){yield p.restyle({setHideOnLeave:!1});const B=Lt(f,"network-request-failed"),re=mn().setTimeout(()=>{R(B)},fI.get());function ve(){mn().clearTimeout(re),w(p)}p.ping(ve).then(ve,()=>{R(B)})});return function(w,R){return y.apply(this,arguments)}}()))}),cl.apply(this,arguments)}const mI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lm{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fl="__/auth/handler",Bh="emulator/auth/handler",Um=encodeURIComponent("fac");function pl(f,c,l,p,y,w){return jh.apply(this,arguments)}function jh(){return(jh=(0,T.Z)(function*(f,c,l,p,y,w){le(f.config.authDomain,f,"auth-domain-config-required"),le(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:p,v:Se.SDK_VERSION,eventId:y};if(c instanceof qn){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,ee.xb)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[De,Ae]of Object.entries(w||{}))R[De]=Ae}if(c instanceof mt){const De=c.getScopes().filter(Ae=>""!==Ae);De.length>0&&(R.scopes=De.join(","))}f.tenantId&&(R.tid=f.tenantId);const B=R;for(const De of Object.keys(B))void 0===B[De]&&delete B[De];const re=yield f._getAppCheckToken(),ve=re?`#${Um}=${encodeURIComponent(re)}`:"";return`${function ma({config:f}){return f.emulator?Y(f,Bh):`https://${f.authDomain}/${fl}`}(f)}?${(0,ee.xO)(B).slice(1)}${ve}`})).apply(this,arguments)}const Ds="webStorageSupport",yI=class _I{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Un,this._completeRedirectFn=Wn,this._overrideRedirectResult=Ph}_openPopup(c,l,p,y){var w=this;return(0,T.Z)(function*(){var R;Yt(null===(R=w.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const B=yield pl(c,l,p,Or(),y);return function dl(f,c,l,p=500,y=600){const w=Math.max((window.screen.availHeight-y)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let B="";const re=Object.assign(Object.assign({},mI),{width:p.toString(),height:y.toString(),top:w,left:R}),ve=(0,ee.z$)().toLowerCase();l&&(B=Ot(ve)?"_blank":l),Oi(ve)&&(c=c||"http://localhost",re.scrollbars="yes");const De=Object.entries(re).reduce((Zt,[bi,wl])=>`${Zt}${bi}=${wl},`,"");if(function j(f=(0,ee.z$)()){var c;return co(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ve)&&"_self"!==B)return function hl(f,c){const l=document.createElement("a");l.href=f,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",B),new Lm(null);const Ae=window.open(c||"",B,De);le(Ae,f,"popup-blocked");try{Ae.focus()}catch{}return new Lm(Ae)}(c,B,fa())})()}_openRedirect(c,l,p,y){var w=this;return(0,T.Z)(function*(){return yield w._originValidation(c),function um(f){mn().location.href=f}(yield pl(c,l,p,Or(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:w}=this.eventManagers[l];return y?Promise.resolve(y):(Yt(w,"If manager is not set, promise should be"),w)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,T.Z)(function*(){const p=yield function gI(f){return cl.apply(this,arguments)}(c),y=new Mm(c);return p.register("authEvent",w=>(le(w?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Ds,{type:Ds},y=>{var w;const R=null===(w=y?.[0])||void 0===w?void 0:w[Ds];void 0!==R&&l(!!R),St(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function hI(f){return al.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return he()||fs()||co()}};class $h{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return tn("unexpected MultiFactorSessionType")}}}class Bm extends $h{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Bm(c)}_finalizeEnroll(c,l,p){return function xA(f,c){return me(f,"POST","/v2/accounts/mfaEnrollment:finalize",J(f,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function mm(f,c){return me(f,"POST","/v2/accounts/mfaSignIn:finalize",J(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vI=(()=>{class f{constructor(){}static assertion(l){return Bm._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var ya="@firebase/auth";class Uu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,T.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xi(){return window}(0,ee.Pz)("authIdTokenMaxAge"),function IA(f){kc=f}({loadJS:f=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const w=Lt("internal-error");w.customData=y,l(w)},p.type="text/javascript",p.charset="UTF-8",function wI(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function gl(f){(0,Se._registerComponent)(new pn.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),w=c.getProvider("app-check-internal"),{apiKey:R,authDomain:B}=p.options;le(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const re={apiKey:R,authDomain:B,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(f)},ve=new Mg(p,y,w,re);return function kg(f,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ue);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ve,l),ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Se._registerComponent)(new pn.wA("auth-internal",c=>{const l=Rt(c.getProvider("auth").getImmediate());return new Uu(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Se.registerVersion)(ya,"1.7.5",function Hh(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Se.registerVersion)(ya,"1.7.5","esm2017")}("Browser");function va(){return va=(0,T.Z)(function*(f,c,l){var p;const{BuildInfo:y}=Xi();Yt(c.sessionId,"AuthEvent did not contain a session ID");const w=yield function bI(f){return Ea.apply(this,arguments)}(c.sessionId),R={};return co()?R.ibi=y.packageName:uo()?R.apn=y.packageName:St(f,"operation-not-supported-in-this-environment"),y.displayName&&(R.appDisplayName=y.displayName),R.sessionId=w,pl(f,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,R)}),va.apply(this,arguments)}function Wh(){return(Wh=(0,T.Z)(function*(f){const{BuildInfo:c}=Xi(),l={};co()?l.iosBundleId=c.packageName:uo()?l.androidPackageName=c.packageName:St(f,"operation-not-supported-in-this-environment"),yield sl(f,l)})).apply(this,arguments)}function ml(){return(ml=(0,T.Z)(function*(f,c,l){const{cordova:p}=Xi();let y=()=>{};try{yield new Promise((w,R)=>{let B=null;function re(){var Ae;w();const Zt=null===(Ae=p.plugins.browsertab)||void 0===Ae?void 0:Ae.close;"function"==typeof Zt&&Zt(),"function"==typeof l?.close&&l.close()}function ve(){B||(B=window.setTimeout(()=>{R(Lt(f,"redirect-cancelled-by-user"))},2e3))}function De(){"visible"===document?.visibilityState&&ve()}c.addPassiveListener(re),document.addEventListener("resume",ve,!1),uo()&&document.addEventListener("visibilitychange",De,!1),y=()=>{c.removePassiveListener(re),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",De,!1),B&&window.clearTimeout(B)}})}finally{y()}})).apply(this,arguments)}function Ea(){return(Ea=(0,T.Z)(function*(f){const c=function As(f){if(Yt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let p=0;p<f.length;p++)l[p]=f.charCodeAt(p);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Zm extends Mm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,T.Z)(function*(){yield c.initPromise})()}}function Qm(f){return or.apply(this,arguments)}function or(){return(or=(0,T.Z)(function*(f){const c=yield ju()._get(Zh(f));return c&&(yield ju()._remove(Zh(f))),c})).apply(this,arguments)}function sr(){const f=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function ju(){return Ue(Mn)}function Zh(f){return Ze("authEvent",f.config.apiKey,f.name)}function vo(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,ee.zd)(l.join("?"))}const Jm=class wa{constructor(){this._redirectPersistence=Un,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wn,this._overrideRedirectResult=Ph}_initialize(c){var l=this;return(0,T.Z)(function*(){const p=c._key();let y=l.eventManagers.get(p);return y||(y=new Zm(c),l.eventManagers.set(p,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){St(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,y){var w=this;return(0,T.Z)(function*(){!function Wm(f){var c,l,p,y,w,R,B,re,ve,De;const Ae=Xi();le("function"==typeof(null===(c=Ae?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(l=Ae?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(w=null===(y=null===(p=Ae?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===w?void 0:w.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(re=null===(B=null===(R=Ae?.cordova)||void 0===R?void 0:R.plugins)||void 0===B?void 0:B.browsertab)||void 0===re?void 0:re.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(De=null===(ve=Ae?.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===De?void 0:De.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const R=yield w._initialize(c);yield R.initialized(),R.resetRedirect(),function lI(){ku.clear()}(),yield w._originValidation(c);const B=function Km(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:sr(),postBody:null,tenantId:f.tenantId,error:Lt(f,"no-auth-event")}}(c,p,y);yield function Bu(f,c){return ju()._set(Zh(f),c)}(c,B);const re=yield function zm(f,c,l){return va.apply(this,arguments)}(c,B,l),ve=yield function qm(f){const{cordova:c}=Xi();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function S(f=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(re);return function Gm(f,c,l){return ml.apply(this,arguments)}(c,R,ve)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Gh(f){return Wh.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:y,BuildInfo:w}=Xi(),R=setTimeout((0,T.Z)(function*(){yield Qm(c),l.onEvent(yl())}),500),B=function(){var De=(0,T.Z)(function*(Ae){clearTimeout(R);const Zt=yield Qm(c);let bi=null;Zt&&Ae?.url&&(bi=function TI(f,c){var l,p;const y=function _l(f){const c=vo(f),l=c.link?decodeURIComponent(c.link):void 0,p=vo(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return vo(y).link||y||p||l||f}(c);if(y.includes("/__/auth/callback")){const w=vo(y),R=w.firebaseError?function Ym(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,B=null===(p=null===(l=R?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],re=B?Lt(B):null;return re?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(Zt,Ae.url)),l.onEvent(bi||yl())});return function(Zt){return De.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,B);const re=y,ve=`${w.packageName.toLowerCase()}://`;Xi().handleOpenURL=function(){var De=(0,T.Z)(function*(Ae){if(Ae.toLowerCase().startsWith(ve)&&B({url:Ae}),"function"==typeof re)try{re(Ae)}catch(Zt){console.error(Zt)}});return function(Ae){return De.apply(this,arguments)}}()}};function yl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Lt("no-auth-event")}}function vl(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function AI(f=(0,ee.z$)()){return!("file:"!==vl()&&"ionic:"!==vl()&&"capacitor:"!==vl()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xm(){try{const f=self.localStorage,c=fa();if(f)return f.setItem(c,"1"),f.removeItem(c),!function SI(f=(0,ee.z$)()){return function WA(){return(0,ee.w1)()&&11===document?.documentMode}()||function Ca(f=(0,ee.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,ee.hl)()}catch{return An()&&(0,ee.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kh(){return(function qA(){return"http:"===vl()||"https:"===vl()}()||(0,ee.ru)()||AI())&&!function GA(){return(0,ee.b$)()||(0,ee.UG)()}()&&Xm()&&!An()}function Ta(){return AI()&&typeof document<"u"}function Ur(){return(Ur=(0,T.Z)(function*(){return!!Ta()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const Br={LOCAL:"local",NONE:"none",SESSION:"session"},zo=le,Aa="persistence";function e_(f){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,T.Z)(function*(f){yield f._initializationPromise;const c=jr(),l=Ze(Aa,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function jr(){var f;try{return(null===(f=function Da(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const Yh=le;class si{constructor(){this.browserResolver=Ue(yI),this.cordovaResolver=Ue(Jm),this.underlyingResolver=null,this._redirectPersistence=Un,this._completeRedirectFn=Wn,this._overrideRedirectResult=Ph}_initialize(c){var l=this;return(0,T.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,y){var w=this;return(0,T.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(c,l,p,y)})()}_openRedirect(c,l,p,y){var w=this;return(0,T.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(c,l,p,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Ta()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,T.Z)(function*(){if(c.underlyingResolver)return;const l=yield function RI(){return Ur.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function MI(f){return f.unwrap()}function NI(f){return n_(f)}function n_(f){const{_tokenResponse:c}=f instanceof ee.ZR?f.customData:f;if(!c)return null;if(!(f instanceof ee.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Ji.credentialFromResult(f);const l=c.providerId;if(!l||l===pt.PASSWORD)return null;let p;switch(l){case pt.GOOGLE:p=Bc;break;case pt.FACEBOOK:p=Uc;break;case pt.GITHUB:p=ih;break;case pt.TWITTER:p=jc;break;default:const{oauthIdToken:y,oauthAccessToken:w,oauthTokenSecret:R,pendingToken:B,nonce:re}=c;return w||R||y||B?B?l.startsWith("saml.")?Zi._create(l,B):Tr._fromParams({providerId:l,signInMethod:l,pendingToken:B,idToken:y,accessToken:w}):new ho(l).credential({idToken:y,accessToken:w,rawNonce:re}):null}return f instanceof ee.ZR?p.credentialFromError(f):p.credentialFromResult(f)}function $r(f,c){return c.catch(l=>{throw l instanceof ee.ZR&&function xI(f,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new ef(f,function MA(f,c){var l;const p=(0,ee.m9)(f),y=c;return le(c.customData.operationType,p,"argument-error"),le(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),im._fromError(p,y)}(f,c));else if(p){const y=n_(c),w=c;y&&(w.credential=y,w.tenantId=p.tenantId||void 0,w.email=p.email||void 0,w.phoneNumber=p.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:NI(l),additionalUserInfo:mh(l),user:wi.getOrCreate(y)}})}function Jh(f,c){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,T.Z)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>$r(f,l.confirm(p))}})).apply(this,arguments)}class ef{constructor(c,l){this.resolver=l,this.auth=function t_(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return $r(MI(this.auth),this.resolver.resolveSignIn(c))}}class wi{constructor(c){this._delegate=c,this.multiFactor=function VA(f){const c=(0,ee.m9)(f);return Jc.has(c)||Jc.set(c,Yc._fromUser(c)),Jc.get(c)}(c)}static getOrCreate(c){return wi.USER_MAP.has(c)||wi.USER_MAP.set(c,new wi(c)),wi.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,T.Z)(function*(){return $r(l.auth,Xg(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,T.Z)(function*(){return Jh(p.auth,function bm(f,c,l){return tl.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,T.Z)(function*(){return $r(l.auth,function Am(f,c,l){return Sm.apply(this,arguments)}(l._delegate,c,si))})()}linkWithRedirect(c){var l=this;return(0,T.Z)(function*(){return yield e_(Rt(l.auth)),Mh(l._delegate,c,si)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,T.Z)(function*(){return $r(l.auth,em(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Jh(this.auth,function Wt(f,c,l){return Ou.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return $r(this.auth,function uI(f,c,l){return He.apply(this,arguments)}(this._delegate,c,si))}reauthenticateWithRedirect(c){var l=this;return(0,T.Z)(function*(){return yield e_(Rt(l.auth)),Pm(l._delegate,c,si)})()}sendEmailVerification(c){return function Ki(f,c){return vs.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,T.Z)(function*(){return yield function ki(f,c){return uh.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function AA(f,c){const l=(0,ee.m9)(f);return(0,Se._isFirebaseServerApp)(l.auth.app)?Promise.reject(je(l.auth)):gh(l,c,null)}(this._delegate,c)}updatePassword(c){return function ph(f,c){return gh((0,ee.m9)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function oI(f,c){return nl.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Du(f,c){return ct.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function nm(f,c,l){return Qi.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wi.USER_MAP=new WeakMap;const $u=le;let Sa=(()=>{class f{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;$u(y,"invalid-api-key",{appName:l.name}),$u(y,"invalid-api-key",{appName:l.name});const w=typeof window<"u"?si:void 0;this._delegate=p.initialize({options:{persistence:El(y,l.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(Jn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function Vg(f,c,l){const p=Rt(f);le(p._canInitEmulator,p,"emulator-config-failed"),le(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!l?.disableWarnings,w=mu(c),{host:R,port:B}=function Vc(f){const c=mu(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const w=y[1];return{host:w,port:Fc(p.substr(w.length+1))}}{const[w,R]=p.split(":");return{host:w,port:Fc(R)}}}(c);p.config.emulator={url:`${w}//${R}${null===B?"":`:${B}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:B,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Fg(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,p)}applyActionCode(l){return function gn(f,c){return Te.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return et(this._delegate,l)}confirmPasswordReset(l,p){return function GE(f,c,l){return fh.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var y=this;return(0,T.Z)(function*(){return $r(y._delegate,function mr(f,c,l){return Vo.apply(this,arguments)}(y._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Tu(f,c){return Uo.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function Ye(f,c){const l=ri.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,T.Z)(function*(){$u(Kh(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function BA(f,c){return ol.apply(this,arguments)}(l._delegate,si);return p?$r(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function ba(f,c){Rt(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,y){const{next:w,error:R,complete:B}=r_(l,p,y);return this._delegate.onAuthStateChanged(w,R,B)}onIdTokenChanged(l,p,y){const{next:w,error:R,complete:B}=r_(l,p,y);return this._delegate.onIdTokenChanged(w,R,B)}sendSignInLinkToEmail(l,p){return function Fo(f,c,l){return Lo.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function tm(f,c,l){return ua.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,T.Z)(function*(){let y;switch(function PI(f,c){zo(Object.values(Br).includes(c),f,"invalid-persistence-type"),(0,ee.b$)()?zo(c!==Br.SESSION,f,"unsupported-persistence-type"):(0,ee.UG)()?zo(c===Br.NONE,f,"unsupported-persistence-type"):An()?zo(c===Br.NONE||c===Br.LOCAL&&(0,ee.hl)(),f,"unsupported-persistence-type"):zo(c===Br.NONE||Xm(),f,"unsupported-persistence-type")}(p._delegate,l),l){case Br.SESSION:y=Un;break;case Br.LOCAL:y=(yield Ue(pa)._isAvailable())?pa:Mn;break;case Br.NONE:y=nn;break;default:return St("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return $r(this._delegate,function Zg(f){return ah.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return $r(this._delegate,Gc(this._delegate,l))}signInWithCustomToken(l){return $r(this._delegate,function Ge(f,c){return gr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return $r(this._delegate,function Dn(f,c,l){return(0,Se._isFirebaseServerApp)(f.app)?Promise.reject(je(f)):Gc((0,ee.m9)(f),ii.credential(c,l)).catch(function(){var p=(0,T.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Dr(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return $r(this._delegate,function Cu(f,c,l){return Kc.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Jh(this._delegate,function iI(f,c,l){return Ei.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,T.Z)(function*(){return $u(Kh(),p._delegate,"operation-not-supported-in-this-environment"),$r(p._delegate,function Dm(f,c,l){return il.apply(this,arguments)}(p._delegate,l,si))})()}signInWithRedirect(l){var p=this;return(0,T.Z)(function*(){return $u(Kh(),p._delegate,"operation-not-supported-in-this-environment"),yield e_(p._delegate),bs(p._delegate,l,si)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Fi(f,c){return ys.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Br,f})();function r_(f,c,l){let p=f;"function"!=typeof f&&({next:p,error:c,complete:l}=f);const y=p;return{next:R=>y(R&&wi.getOrCreate(R)),error:c,complete:l}}function El(f,c){const l=function ZA(f,c){const l=jr();if(!l)return[];const p=Ze(Aa,f,c);switch(l.getItem(p)){case Br.NONE:return[nn];case Br.LOCAL:return[pa,Un];case Br.SESSION:return[Un];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(pa)&&l.push(pa),typeof window<"u")for(const p of[Mn,Un])l.includes(p)||l.push(p);return l.includes(nn)||l.push(nn),l}class tf{constructor(){this.providerId="phone",this._delegate=new Ji(MI(ze.Z.auth()))}static credential(c,l){return Ji.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}tf.PHONE_SIGN_IN_METHOD=Ji.PHONE_SIGN_IN_METHOD,tf.PROVIDER_ID=Ji.PROVIDER_ID;const i_=le;class nf{constructor(c,l,p=ze.Z.app()){var y;i_(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new wm(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function o_(f){f.INTERNAL.registerComponent(new pn.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Sa(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ii,FacebookAuthProvider:Uc,GithubAuthProvider:ih,GoogleAuthProvider:Bc,OAuthProvider:ho,SAMLAuthProvider:wu,PhoneAuthProvider:tf,PhoneMultiFactorGenerator:vI,RecaptchaVerifier:nf,TwitterAuthProvider:jc,Auth:Sa,AuthCredential:oa,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.10")}(ze.Z)},861:(ao,Qn,nt)=>{function T(Se,ee,bt,an,pn,Yn,pt){try{var se=Se[Yn](pt),ge=se.value}catch(Ne){return void bt(Ne)}se.done?ee(ge):Promise.resolve(ge).then(an,pn)}function ze(Se){return function(){var ee=this,bt=arguments;return new Promise(function(an,pn){var Yn=Se.apply(ee,bt);function pt(ge){T(Yn,an,pn,pt,se,"next",ge)}function se(ge){T(Yn,an,pn,pt,se,"throw",ge)}pt(void 0)})}}nt.d(Qn,{Z:()=>ze})},582:(ao,Qn,nt)=>{function ee(Z,Y){var te={};for(var ie in Z)Object.prototype.hasOwnProperty.call(Z,ie)&&Y.indexOf(ie)<0&&(te[ie]=Z[ie]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var _e=0;for(ie=Object.getOwnPropertySymbols(Z);_e<ie.length;_e++)Y.indexOf(ie[_e])<0&&Object.prototype.propertyIsEnumerable.call(Z,ie[_e])&&(te[ie[_e]]=Z[ie[_e]])}return te}function Ne(Z,Y,te,ie){return new(te||(te=Promise))(function(J,me){function vt(yt){try{Le(ie.next(yt))}catch(Ut){me(Ut)}}function Oe(yt){try{Le(ie.throw(yt))}catch(Ut){me(Ut)}}function Le(yt){yt.done?J(yt.value):function _e(J){return J instanceof te?J:new te(function(me){me(J)})}(yt.value).then(vt,Oe)}Le((ie=ie.apply(Z,Y||[])).next())})}function en(Z){return this instanceof en?(this.v=Z,this):new en(Z)}function St(Z,Y,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ie=te.apply(Z,Y||[]),J=[];return _e={},vt("next"),vt("throw"),vt("return",function me(Nt){return function(Vn){return Promise.resolve(Vn).then(Nt,Ut)}}),_e[Symbol.asyncIterator]=function(){return this},_e;function vt(Nt,Vn){ie[Nt]&&(_e[Nt]=function(Rn){return new Promise(function(tr,kr){J.push([Nt,Rn,tr,kr])>1||Oe(Nt,Rn)})},Vn&&(_e[Nt]=Vn(_e[Nt])))}function Oe(Nt,Vn){try{!function Le(Nt){Nt.value instanceof en?Promise.resolve(Nt.value.v).then(yt,Ut):mi(J[0][2],Nt)}(ie[Nt](Vn))}catch(Rn){mi(J[0][3],Rn)}}function yt(Nt){Oe("next",Nt)}function Ut(Nt){Oe("throw",Nt)}function mi(Nt,Vn){Nt(Vn),J.shift(),J.length&&Oe(J[0][0],J[0][1])}}function wr(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Y=Z[Symbol.asyncIterator];return Y?Y.call(Z):(Z=function At(Z){var Y="function"==typeof Symbol&&Symbol.iterator,te=Y&&Z[Y],ie=0;if(te)return te.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ie>=Z.length&&(Z=void 0),{value:Z&&Z[ie++],done:!Z}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),te={},ie("next"),ie("throw"),ie("return"),te[Symbol.asyncIterator]=function(){return this},te);function ie(J){te[J]=Z[J]&&function(me){return new Promise(function(vt,Oe){!function _e(J,me,vt,Oe){Promise.resolve(Oe).then(function(Le){J({value:Le,done:vt})},me)}(vt,Oe,(me=Z[J](me)).done,me.value)})}}}nt.d(Qn,{FC:()=>St,KL:()=>wr,_T:()=>ee,mG:()=>Ne,qq:()=>en}),"function"==typeof SuppressedError&&SuppressedError}},ao=>{ao(ao.s=713)}]);